(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1108:function(t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><path d="M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z" stroke="#000" stroke-width="2"></path></svg>'},1261:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n#priority[data-v-95f06344] {\n\tdisplay: inline-block;\n}\n.app-content-list-item[data-v-95f06344]:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n","",{version:3,sources:["webpack://./src/components/SectionTitle.vue"],names:[],mappings:";AAyCA;CACA,qBAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA",sourcesContent:['\x3c!--\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div id="priority">\n\t\t<div class="app-content-list-item">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: \'SectionTitle\',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n</style>\n'],sourceRoot:""}]),n.a=i},1267:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"[data-v-0b6e590a] .modal-content{padding:0 20px 20px 20px;max-height:calc(100vh - 210px);overflow-y:auto}[data-v-0b6e590a] .modal-container{width:auto !important}.tag-title[data-v-0b6e590a]{margin-top:20px;margin-left:10px}.tag-group[data-v-0b6e590a]{display:block;position:relative;margin:0 1px;overflow:hidden;left:4px}.tag-actions[data-v-0b6e590a]{background-color:rgba(0,0,0,0);border:none;float:right}.tag-actions[data-v-0b6e590a]:hover,.tag-actions[data-v-0b6e590a]:focus{background-color:var(--color-border-dark)}.tag-group__label[data-v-0b6e590a]{z-index:2;font-weight:bold;border:none;background-color:rgba(0,0,0,0);padding-left:10px;padding-right:10px;overflow:hidden;text-overflow:ellipsis;max-width:94px}.app-navigation-entry-bullet-wrapper[data-v-0b6e590a]{width:44px;height:44px;display:inline-block;position:absolute;list-style:none}.app-navigation-entry-bullet-wrapper .color0[data-v-0b6e590a]{width:30px !important;height:30px;border-radius:50%;background-size:14px;margin-top:-65px;margin-left:180px;z-index:2;display:flex;position:relative}.icon-colorpicker[data-v-0b6e590a]{background-image:var(--icon-add-fff)}.tagButton[data-v-0b6e590a]{display:inline-block;margin-left:10px}[data-v-0b6e590a] .action-input{margin-left:-31px}[data-v-0b6e590a] .icon-tag{background-image:none}.action-item[data-v-0b6e590a]{right:8px;float:right}.create-tag[data-v-0b6e590a]{list-style:none}@media only screen and (max-width: 512px){[data-v-0b6e590a] .modal-container{top:100px !important;max-height:calc(100vh - 170px) !important}}","",{version:3,sources:["webpack://./src/components/TagModal.vue"],names:[],mappings:"AAgPA,iCACC,wBAAA,CACA,8BAAA,CACA,eAAA,CAED,mCACC,qBAAA,CAED,4BACC,eAAA,CACA,gBAAA,CAED,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,WAAA,CACA,wEAEC,yCAAA,CAGF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,cAAA,CAED,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,eAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAGF,mCACC,oCAAA,CAED,4BACC,oBAAA,CACA,gBAAA,CAED,gCACC,iBAAA,CAED,4BACC,qBAAA,CAED,8BACC,SAAA,CACA,WAAA,CAED,6BACC,eAAA,CAED,0CACC,mCACA,oBAAA,CACA,yCAAA,CAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep .modal-content {\n\tpadding: 0 20px 20px 20px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n::v-deep .modal-container {\n\twidth: auto !important;\n}\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-left: 10px;\n}\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: right;\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-border-dark);\n\t}\n}\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 94px;\n}\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tlist-style: none;\n\n\t.color0 {\n\t\twidth: 30px !important;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tmargin-top: -65px;\n\t\tmargin-left: 180px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-left: 10px;\n}\n::v-deep .action-input {\n\tmargin-left: -31px;\n}\n::v-deep .icon-tag {\n\tbackground-image: none;\n}\n.action-item {\n\tright: 8px;\n\tfloat: right;\n}\n.create-tag {\n\tlist-style: none;\n}\n@media only screen and (max-width: 512px) {\n\t::v-deep .modal-container {\n\ttop: 100px !important;\n\tmax-height: calc(100vh - 170px) !important\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1308:function(t,n){},1310:function(t,n){},1332:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".calendar-picker-option[data-v-9bd234a6]{width:100%;display:flex;align-items:center}.calendar-picker-option__color-indicator[data-v-9bd234a6]{width:12px;height:12px;border-radius:50%;border:none;margin-right:8px;flex-basis:12px;flex-shrink:0}.calendar-picker-option__label[data-v-9bd234a6]{overflow:hidden;text-overflow:ellipsis;flex-grow:1;max-width:80px}","",{version:3,sources:["webpack://./src/components/CalendarPickerOption.vue"],names:[],mappings:"AAmCA,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CAEA,0DACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CAGD,gDACC,eAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.calendar-picker-option {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&__color-indicator {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tmargin-right: 8px;\n\t\tflex-basis: 12px;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tflex-grow: 1;\n\t\tmax-width: 80px;\n\t}\n}\n\n"],sourceRoot:""}]),n.a=i},1333:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"[data-v-ebd3f16a] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}.modal-content[data-v-ebd3f16a]{padding:30px 30px 20px !important}input[data-v-ebd3f16a]{width:100%}[data-v-ebd3f16a] input[type=text].multiselect__input{padding:0 !important}[data-v-ebd3f16a] .multiselect__single{margin-left:-18px;width:100px}[data-v-ebd3f16a] .multiselect__tags{border:none !important}.all-day[data-v-ebd3f16a]{margin-left:-1px;margin-top:5px;margin-bottom:5px}.eventTitle[data-v-ebd3f16a]{margin-bottom:5px}.primary[data-v-ebd3f16a]{height:44px !important;float:right}[data-v-ebd3f16a] .mx-datepicker{width:213px}","",{version:3,sources:["webpack://./src/components/EventModal.vue"],names:[],mappings:"AAwLA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAED,gCACC,iCAAA,CAED,uBACC,UAAA,CAED,sDACC,oBAAA,CAED,uCACC,iBAAA,CACA,WAAA,CAED,qCACC,sBAAA,CAED,0BACC,gBAAA,CACA,cAAA,CACA,iBAAA,CAED,6BACC,iBAAA,CAED,0BACC,sBAAA,CACA,WAAA,CAED,iCACC,WAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep .modal-wrapper .modal-container {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n}\ninput {\n\twidth: 100%;\n}\n::v-deep input[type='text'].multiselect__input {\n\tpadding: 0 !important;\n}\n::v-deep .multiselect__single {\n\tmargin-left: -18px;\n\twidth: 100px;\n}\n::v-deep .multiselect__tags {\n\tborder: none !important;\n}\n.all-day {\n\tmargin-left: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n.eventTitle {\n\tmargin-bottom: 5px;\n}\n.primary {\n\theight: 44px !important;\n\tfloat: right;\n}\n::v-deep .mx-datepicker {\n\twidth: 213px;\n}\n"],sourceRoot:""}]),n.a=i},1334:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n}\n.list-item-content__actions--primary .action--primary .action-button__text {\n\tfont-size: 14px;\n\tmargin-top: -8px;\n}\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n","",{version:3,sources:["webpack://./src/components/EnvelopePrimaryActions.vue"],names:[],mappings:";AAaA;CACA,aAAA;CACA,8BAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,mBAAA;CACA,sBAAA;CACA,yBAAA;AACA;AAEA;CACA,eAAA;CACA,gBAAA;AACA;AAEA;;CAEA,YAAA;AACA",sourcesContent:["<template>\n\t<ul class=\"list-item-content__actions--primary\">\n\t\t<slot />\n\t</ul>\n</template>\n\n<script>\nexport default {\n\tname: 'EnvelopePrimaryActions',\n}\n<\/script>\n\n<style>\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text {\n\tfont-size: 14px;\n\tmargin-top: -8px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1335:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,'.mail-message-account-color[data-v-17434778]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.icon-important[data-v-17434778]  path{fill:#fc0;stroke:var(--color-main-background)}.list-item:hover .icon-important[data-v-17434778]  path,.list-item:focus .icon-important[data-v-17434778]  path,.list-item.active .icon-important[data-v-17434778]  path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-17434778]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-17434778]:hover,.icon-important.app-content-list-item-star[data-v-17434778]:focus{opacity:.5}.app-content-list-item-select-checkbox[data-v-17434778]{display:inline-block;vertical-align:middle;position:absolute;left:33px;top:35px;z-index:50}.list-item-style[data-v-17434778]:not(.seen){font-weight:bold}.list-item-style.selected[data-v-17434778]{background-color:var(--color-background-dark)}.icon-junk[data-v-17434778]{opacity:.2;display:flex;top:6px;left:34px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}list-item-style.draft .app-content-list-item-line-two[data-v-17434778]{font-style:italic}.list-item-style.active[data-v-17434778]{background-color:var(--color-primary-light);border-radius:16px}.icon-reply[data-v-17434778],.icon-attachment[data-v-17434778]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-17434778]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}.icon-attachment[data-v-17434778]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}.app-content-list .list-item[data-v-17434778]{padding-right:0}.app-content-list .list-item .app-content-list-item-line-two[data-v-17434778]{padding-right:0;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]{margin-right:-2px;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]  .action-item__menu{right:7px !important}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]  .action-item__menu .action-item__menu_arrow{right:6px !important}.app-content-list .list-item .app-content-list-item-details[data-v-17434778]{padding-right:7px}[data-v-17434778] .list-item__extra{margin-left:41px !important}.tag-group__label[data-v-17434778]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-17434778]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-17434778]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}[data-v-17434778].list-item__wrapper{list-style:none}.app-content-list-item-star.icon-starred[data-v-17434778]{display:block}[data-v-17434778].icon-important.app-content-list-item-star{position:absolute;top:7px;z-index:1}.app-content-list-item-star.icon-starred[data-v-17434778]{display:inline-block;position:absolute;margin-bottom:32px;margin-left:28px;cursor:pointer;z-index:1}[data-v-17434778] .svg svg{height:16px;width:16px}',"",{version:3,sources:["webpack://./src/components/Envelope.vue"],names:[],mappings:"AAsgBA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uCACA,SAAA,CACA,mCAAA,CAKA,yKACA,mCAAA,CAKA,4DACA,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEA,UAAA,CAKD,wDACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,6CACC,gBAAA,CAED,2CACC,6CAAA,CAED,4BACC,UAAA,CACA,YAAA,CACA,OAAA,CACA,SAAA,CACA,oBAAA,CACA,WAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CAED,uEACC,iBAAA,CAED,yCACC,2CAAA,CACA,kBAAA,CAGD,+DAEC,oBAAA,CACA,uBAAA,CAGD,6BACC,gEAAA,CACA,WAAA,CAGD,kCACC,gEAAA,CACA,WAAA,CAKD,8CACC,eAAA,CAEA,8EACA,eAAA,CACA,eAAA,CAGA,0EACA,iBAAA,CACA,eAAA,CAEA,8FACA,oBAAA,CAEA,uHACA,oBAAA,CAKA,6EACC,iBAAA,CAGF,oCACC,2BAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,qCACC,eAAA,CAED,0DACC,aAAA,CAED,4DACC,iBAAA,CACA,OAAA,CACA,SAAA,CAED,0DACC,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,SAAA,CAED,2BACC,WAAA,CACA,UAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.icon-important {\n\t::v-deep path {\n\tfill: #ffcc00;\n\tstroke: var(--color-main-background);\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t::v-deep path {\n\tstroke: var(--color-background-dark);\n\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\tbackground-image: none;\n\tleft: 7px;\n\ttop: 13px;\n\topacity: 1;\n\n\t&:hover,\n\t&:focus {\n\topacity: 0.5;\n\t}\n\t}\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n.list-item-style.selected {\n\tbackground-color: var(--color-background-dark);\n}\n.icon-junk {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 6px;\n\tleft: 34px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n}\nlist-item-style.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n.list-item-style.active {\n\tbackground-color: var(--color-primary-light);\n\tborder-radius: 16px;\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n\t// Fix layout of messages in list until we move to component\n\n.app-content-list .list-item {\n\tpadding-right: 0;\n\n\t.app-content-list-item-line-two {\n\tpadding-right: 0;\n\tmargin-top: -8px;\n\t}\n\n\t.app-content-list-item-menu {\n\tmargin-right: -2px;\n\tmargin-top: -8px;\n\n\t::v-deep .action-item__menu {\n\tright: 7px !important;\n\n\t.action-item__menu_arrow {\n\tright: 6px !important;\n\t}\n\t}\n\t}\n\n\t.app-content-list-item-details {\n\t\tpadding-right: 7px;\n\t\t}\n}\n::v-deep .list-item__extra {\n\tmargin-left: 41px !important;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n::v-deep.list-item__wrapper {\n\tlist-style: none;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: block;\n}\n::v-deep.icon-important.app-content-list-item-star {\n\tposition: absolute;\n\ttop: 7px;\n\tz-index: 1;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-bottom: 32px;\n\tmargin-left: 28px;\n\tcursor: pointer;\n\tz-index: 1;\n}\n::v-deep .svg svg{\n\theight: 16px;\n\twidth: 16px;\n}\n"],sourceRoot:""}]),n.a=i},1336:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"div[data-v-0c4ad86c]{position:relative}.load-more[data-v-0c4ad86c]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast)}.multiselect-header[data-v-0c4ad86c]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-0c4ad86c]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages.icon-loading-small[data-v-0c4ad86c]{padding-left:32px;background-position:9px center}#list-refreshing[data-v-0c4ad86c]{position:absolute;left:calc(50% - 8px);overflow:hidden;padding:12px;background-color:var(--color-main-background);z-index:1;border-radius:var(--border-radius-pill);border:1px solid var(--color-border);top:-24px;opacity:0;transition-property:top,opacity;transition-duration:.5s;transition-timing-function:ease-in-out}#list-refreshing.refreshing[data-v-0c4ad86c]{top:4px;opacity:1}.multiselect-header-enter-active[data-v-0c4ad86c],.multiselect-header-leave-active[data-v-0c4ad86c],.list-enter-active[data-v-0c4ad86c],.list-leave-active[data-v-0c4ad86c]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-0c4ad86c],.multiselect-header-leave-to[data-v-0c4ad86c],.list-enter[data-v-0c4ad86c],.list-leave-to[data-v-0c4ad86c]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-0c4ad86c]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-0c4ad86c]{display:block}}","",{version:3,sources:["webpack://./src/components/EnvelopeList.vue"],names:[],mappings:"AAqcA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,6DACC,iBAAA,CACA,8BAAA,CAGD,kCACC,iBAAA,CACA,oBAAA,CACA,eAAA,CACA,YAAA,CACA,6CAAA,CACA,SAAA,CACA,uCAAA,CACA,oCAAA,CACA,SAAA,CACA,SAAA,CACA,+BAAA,CACA,uBAAA,CACA,sCAAA,CAEA,6CACC,OAAA,CACA,SAAA,CAIF,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\tposition: absolute;\n\tleft: calc(50% - 8px);\n\toverflow: hidden;\n\tpadding: 12px;\n\tbackground-color: var(--color-main-background);\n\tz-index: 1;\n\tborder-radius: var(--border-radius-pill);\n\tborder: 1px solid var(--color-border);\n\ttop: -24px;\n\topacity: 0;\n\ttransition-property: top, opacity;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n\n\t&.refreshing {\n\t\ttop: 4px;\n\t\topacity: 1;\n\t}\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1338:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".fade-enter-active[data-v-d31c7de6],.fade-leave-active[data-v-d31c7de6]{transition:opacity .5s}.fade-enter[data-v-d31c7de6],.fade-leave-to[data-v-d31c7de6]{opacity:0}.wrapper[data-v-d31c7de6]{display:flex;justify-content:space-around;flex-direction:column;flex:1 auto}","",{version:3,sources:["webpack://./src/components/Loading.vue"],names:[],mappings:"AAgDA,wEAEC,sBAAA,CAED,6DAEC,SAAA,CAGD,0BACC,YAAA,CACA,4BAAA,CACA,qBAAA,CACA,WAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tflex-direction: column;\n\tflex: 1 auto;\n}\n"],sourceRoot:""}]),n.a=i},1339:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"#emptycontent[data-v-4512145e]{margin-top:10px}","",{version:3,sources:["webpack://./src/components/EmptyMailboxSection.vue"],names:[],mappings:"AAYA,+BACC,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n#emptycontent {\n\tmargin-top: 10px;\n}\n"],sourceRoot:""}]),n.a=i},1340:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".nameimportant[data-v-f7652ee8]  #load-more-mail-messages,.namestarred[data-v-f7652ee8]  #load-more-mail-messages{margin-top:0;margin-bottom:8px}","",{version:3,sources:["webpack://./src/components/Mailbox.vue"],names:[],mappings:"AA4eC,kHACC,YAAA,CACA,iBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Fix vertical space between sections in priority inbox\n.nameimportant,\n.namestarred {\n\t::v-deep #load-more-mail-messages {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1341:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.icon[data-v-3def5510] {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\nh2[data-v-3def5510],\np[data-v-3def5510] {\n\ttext-align: center;\n}\n","",{version:3,sources:["webpack://./src/components/NoMessageSelected.vue"],names:[],mappings:";AA2CA;CACA,YAAA;CACA,WAAA;CACA,mBAAA;CACA,qBAAA;CACA,YAAA;AACA;AAEA;;CAEA,kBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<AppContentDetails>\n\t\t<div id=\"emptycontent\">\n\t\t\t<div class=\"icon icon-mail\" />\n\t\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t\t<p />\n\t\t</div>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n}\n<\/script>\n\n<style scoped>\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1345:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".user-bubble__title[data-v-09fd225b]{max-width:30vw}.user-bubble-email[data-v-09fd225b]{margin:10px}.contact-menu[data-v-09fd225b]{display:flex;flex-wrap:wrap}.contact-popover[data-v-09fd225b]{display:inline-block}.contact-wrapper[data-v-09fd225b]{padding:10px;min-width:300px}.contact-wrapper a[data-v-09fd225b]{opacity:.7}.contact-wrapper a[data-v-09fd225b]:hover{opacity:1}.contact-input-wrapper[data-v-09fd225b]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-09fd225b],.contact-input-wrapper .multiselect[data-v-09fd225b]{width:100%}.icon-clippy[data-v-09fd225b],.icon-user[data-v-09fd225b],.icon-reply[data-v-09fd225b],.icon-checkmark[data-v-09fd225b],.icon-close[data-v-09fd225b],.icon-add[data-v-09fd225b]{display:flex;align-items:center;height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (min-width: 600px){.icon-clippy[data-v-09fd225b],.icon-user[data-v-09fd225b],.icon-reply[data-v-09fd225b],.icon-checkmark[data-v-09fd225b],.icon-close[data-v-09fd225b],.icon-add[data-v-09fd225b]{background-position:12px center}}.contact-existing[data-v-09fd225b]{margin-bottom:10px;font-size:small}.contact-existing .icon-details[data-v-09fd225b]{padding-left:34px;background-position:10px center;text-align:left}","",{version:3,sources:["webpack://./src/components/RecipientBubble.vue"],names:[],mappings:"AA4NA,qCACC,cAAA,CAED,oCACC,WAAA,CAGD,+BACC,YAAA,CACA,cAAA,CAED,kCACC,oBAAA,CAED,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAGF,wCACC,eAAA,CACG,kBAAA,CACH,mGAEC,UAAA,CAGF,gLAMC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,cAAA,CACA,QAAA,CACA,0BAAA,CAED,0CACC,gLAMC,+BAAA,CAAA,CAIF,mCACC,kBAAA,CACA,eAAA,CACA,iDACC,iBAAA,CACA,+BAAA,CACA,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n\n.contact-menu {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n.contact-popover {\n\tdisplay: inline-block;\n}\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput,\n\t.multiselect {\n\t\twidth: 100%;\n\t}\n}\n.icon-clippy,\n.icon-user,\n.icon-reply,\n.icon-checkmark,\n.icon-close,\n.icon-add {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n@media only screen and (min-width: 600px) {\n\t.icon-clippy,\n\t.icon-user,\n\t.icon-reply,\n\t.icon-checkmark,\n\t.icon-close,\n\t.icon-add {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n.contact-existing {\n\tmargin-bottom: 10px;\n\tfont-size: small;\n\t.icon-details {\n\t\tpadding-left: 34px;\n\t\tbackground-position: 10px center;\n\t\ttext-align: left;\n\t}\n}\n\n"],sourceRoot:""}]),n.a=i},1348:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.reservation[data-v-4ec97965] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.event[data-v-4ec97965] {\n\tflex-grow: 1;\n}\n.event-name[data-v-4ec97965] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/EventReservation.vue"],names:[],mappings:";AAoJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\n\t\t\t} else if ('startDate' in this.data.reservationFor) {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tconst end = this.getEndDateTime(this.data.reservationFor)\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1349:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.reservation[data-v-2a317718] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-2a317718],\n.arrival[data-v-2a317718] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-2a317718],\n.arrival[data-v-2a317718],\n.connection[data-v-2a317718] {\n\tjustify-content: center;\n}\n.iata[data-v-2a317718] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.airport[data-v-2a317718] {\n\tfont-size: large;\n}\n.departure[data-v-2a317718] {\n\ttext-align: right;\n}\n.connection[data-v-2a317718] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/FlightReservation.vue"],names:[],mappings:";AA2JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1350:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.reservation[data-v-08dee74f] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-08dee74f],\n.arrival[data-v-08dee74f] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-08dee74f],\n.arrival[data-v-08dee74f],\n.connection[data-v-08dee74f] {\n\tjustify-content: center;\n}\n.station[data-v-08dee74f] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.departure[data-v-08dee74f] {\n\ttext-align: right;\n}\n.connection[data-v-08dee74f] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/TrainReservation.vue"],names:[],mappings:";AA+JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1356:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,'.attachment[data-v-016cf9f4]{position:relative;display:inline-block;width:calc(100% - 32px);padding:16px}.attachment[data-v-016cf9f4]:hover,.attachment span[data-v-016cf9f4]:hover{background-color:var(--color-background-hover);cursor:pointer}.mail-attached-image[data-v-016cf9f4]{display:block;max-width:100%;border-radius:var(--border-radius);cursor:pointer}.attachment-import-popover[data-v-016cf9f4]{right:32px;top:42px}.mail-attached-image[data-v-016cf9f4]:hover{opacity:.8}.attachment-name[data-v-016cf9f4]{display:inline-block;width:calc(100% - 72px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;margin-bottom:20px}.attachment-size[data-v-016cf9f4]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.5}.attachment-icon[data-v-016cf9f4]{vertical-align:middle;text-align:left;margin-bottom:20px}.action-item[data-v-016cf9f4]{display:inline-block !important;position:relative !important}.mail-message-attachments[data-v-016cf9f4]{overflow-x:auto;overflow-y:auto}',"",{version:3,sources:["webpack://./src/components/MessageAttachment.vue"],names:[],mappings:"AAiNA,6BACC,iBAAA,CACA,oBAAA,CACA,uBAAA,CACA,YAAA,CAGD,2EAEC,8CAAA,CACA,cAAA,CAGD,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CACA,cAAA,CAED,4CACC,UAAA,CACA,QAAA,CAED,4CACC,UAAA,CAED,kCACC,oBAAA,CACA,uBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CACA,kBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CAGD,kCACC,qBAAA,CACA,eAAA,CACA,kBAAA,CAED,8BACC,+BAAA,CACA,4BAAA,CAED,2CACC,eAAA,CACA,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: calc(100% - 32px);\n\tpadding: 16px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\tcursor: pointer;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n\tcursor: pointer;\n}\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 72px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n\tmargin-bottom: 20px;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n\tmargin-bottom: 20px;\n}\n.action-item {\n\tdisplay: inline-block !important;\n\tposition: relative !important;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n"],sourceRoot:""}]),n.a=i},1357:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"[data-v-4507de1c] .modal-wrapper .modal-container{background-color:unset !important;box-shadow:none !important;height:auto !important;top:unset !important}[data-v-4507de1c] .modal-wrapper .modal__attachment{display:flex;margin:0 auto;max-width:min(850px,85vw);max-height:85vh;background-color:var(--color-main-background)}","",{version:3,sources:["webpack://./src/components/AttachmentImageViewer.vue"],names:[],mappings:"AA4BC,kDACC,iCAAA,CACA,0BAAA,CACA,sBAAA,CACA,oBAAA,CAGD,oDACC,YAAA,CACA,aAAA,CACA,yBAAA,CACA,eAAA,CACA,6CAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep .modal-wrapper {\n\t.modal-container {\n\t\tbackground-color: unset !important;\n\t\tbox-shadow: none !important;\n\t\theight: auto !important;\n\t\ttop: unset !important;\n\t}\n\n\t.modal__attachment {\n\t\tdisplay: flex;\n\t\tmargin: 0 auto;\n\t\tmax-width: min(850px, 85vw);\n\t\tmax-height: 85vh;\n\t\tbackground-color: var(--color-main-background);\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1358:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".attachments{width:230px;position:relative;display:flex}.attachments-button-wrapper{text-align:center}.attachments-save-to-cloud{display:inline-block;margin:16px;background-position:16px center;padding:12px 12px 12px 37px !important}.oc-dialog{z-index:10000000}.mail-message-attachments{overflow-x:auto;overflow-y:auto}","",{version:3,sources:["webpack://./src/components/MessageAttachments.vue"],names:[],mappings:"AA2IA,aACC,WAAA,CACC,iBAAA,CACA,YAAA,CAKF,4BACC,iBAAA,CAED,2BACC,oBAAA,CACA,WAAA,CACA,+BAAA,CACC,sCAAA,CAEF,WACC,gBAAA,CAED,0BACC,eAAA,CACA,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.attachments {\n\twidth: 230px;\n  position: relative;\n  display: flex;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n}\n.attachments-save-to-cloud {\n\tdisplay: inline-block;\n\tmargin: 16px;\n\tbackground-position: 16px center;\n  padding: 12px 12px 12px 37px !important;\n}\n.oc-dialog {\n\tz-index: 10000000;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n"],sourceRoot:""}]),n.a=i},1359:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}","",{version:3,sources:["webpack://./src/components/MdnRequest.vue"],names:[],mappings:"AA4DA,+CACC,kBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n"],sourceRoot:""}]),n.a=i},1360:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n#mail-content[data-v-812ccd96] {\n\theight: 450px;\n}\n","",{version:3,sources:["webpack://./src/components/MessageEncryptedBody.vue"],names:[],mappings:";AA8CA;CACA,aAAA;AACA",sourcesContent:["<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n<\/script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1364:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"#mail-content[data-v-f2e16bd6]{margin-left:48px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-f2e16bd6]{margin-left:8px}#message-container[data-v-f2e16bd6]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-f2e16bd6]{max-height:50vh;overflow-y:auto}[data-v-f2e16bd6] .icon-toggle{background-image:var(--icon-toggle-000) !important}[data-v-f2e16bd6] .action-item__menutoggle--with-title{background-color:var(--color-background-hover) !important}.message-frame[data-v-f2e16bd6]{width:100%}","",{version:3,sources:["webpack://./src/components/MessageHTMLBody.vue"],names:[],mappings:"AAgJA,+BACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,eAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,+BACC,kDAAA,CAED,uDACC,yDAAA,CAED,gCACC,UAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 48px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 8px;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n::v-deep .icon-toggle {\n\tbackground-image: var(--icon-toggle-000) !important;\n}\n::v-deep .action-item__menutoggle--with-title {\n\tbackground-color: var(--color-background-hover) !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n"],sourceRoot:""}]),n.a=i},1365:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".quoted-text{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AAqEA,aACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1366:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"#mail-content[data-v-9fd9f8e0],.mail-signature[data-v-9fd9f8e0]{white-space:pre-wrap}.mail-signature[data-v-9fd9f8e0],.quoted[data-v-9fd9f8e0]{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AA8EA,gEACC,oBAAA,CAED,0DACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#mail-content, .mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1367:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".v-popover>.trigger>.action-item[data-v-0c1b32ff]{border-radius:22px;background-color:var(--color-background-darker)}","",{version:3,sources:["webpack://./src/components/Message.vue"],names:[],mappings:"AAqGA,kDACC,kBAAA,CACA,+CAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n"],sourceRoot:""}]),n.a=i},1370:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".source-modal[data-v-44419322]  .modal-container{height:800px}.source-modal .source-modal-content[data-v-44419322]{width:100%;height:100%;overflow-y:scroll !important}","",{version:3,sources:["webpack://./src/components/MenuEnvelope.vue"],names:[],mappings:"AA0eC,iDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.source-modal {\n\t::v-deep .modal-container {\n\t\theight: 800px;\n\t}\n\n\t.source-modal-content {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow-y: scroll !important;\n\t}\n}\n\n"],sourceRoot:""}]),n.a=i},1371:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".sender[data-v-494361d8]{margin-left:8px}.centered-sender[data-v-494361d8]{margin-top:8px}.right[data-v-494361d8]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;height:44px}.right .app-content-list-item-menu[data-v-494361d8]{margin-left:4px}.right .timestamp[data-v-494361d8]{margin-right:10px;font-size:small;white-space:nowrap;margin-bottom:0}.button[data-v-494361d8]{color:var(--color-main-background)}.button[data-v-494361d8]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-494361d8]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.avatardiv[data-v-494361d8]{display:inline-block;margin-bottom:-23px}.subject[data-v-494361d8]{margin-left:8px;cursor:default}.envelope[data-v-494361d8]{display:flex;flex-direction:column;box-shadow:0 0 10px var(--color-box-shadow);border-radius:16px;margin-left:10px;margin-right:10px;background-color:var(--color-main-background);padding-bottom:20px}.envelope+.envelope[data-v-494361d8]{margin-top:-20px}.envelope[data-v-494361d8]:last-of-type{margin-bottom:10px;padding-bottom:0}.envelope--header[data-v-494361d8]{position:relative;display:flex;padding:10px;border-radius:var(--border-radius)}.envelope--header[data-v-494361d8]:hover{background-color:var(--color-background-hover);border-radius:16px}.left[data-v-494361d8]{flex-grow:1}.icon-important[data-v-494361d8]  path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-494361d8]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex}.icon-important.app-content-list-item-star[data-v-494361d8]:hover,.icon-important.app-content-list-item-star[data-v-494361d8]:focus{opacity:.5}.app-content-list-item-star.icon-starred[data-v-494361d8]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer}.app-content-list-item-star.icon-junk[data-v-494361d8]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer;opacity:.2}.left[data-v-494361d8]:not(.seen){font-weight:bold}.tag-group__label[data-v-494361d8]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-494361d8]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-494361d8]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.envelope--header.list-item-style[data-v-494361d8]{border-radius:16px}","",{version:3,sources:["webpack://./src/components/ThreadEnvelope.vue"],names:[],mappings:"AA6SA,yBACC,eAAA,CAED,kCACC,cAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAKH,4BACC,oBAAA,CACA,mBAAA,CAED,0BACC,eAAA,CACA,cAAA,CAGD,2BACC,YAAA,CACA,qBAAA,CACA,2CAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CACA,6CAAA,CACA,mBAAA,CAEA,qCACC,gBAAA,CAGD,wCACC,kBAAA,CACA,gBAAA,CAIF,mCACC,iBAAA,CACA,YAAA,CACA,YAAA,CACA,kCAAA,CAEA,yCACC,8CAAA,CACA,kBAAA,CAGF,uBACC,WAAA,CAGA,uCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CAEA,oIAEC,UAAA,CAIH,0DACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CAED,uDACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CACA,UAAA,CAED,kCACC,gBAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,mDACC,kBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.sender {\n\tmargin-left: 8px;\n}\n.centered-sender {\n\tmargin-top: 8px;\n}\n\n.right {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tmargin-left: 10px;\n\theight: 44px;\n\n\t.app-content-list-item-menu {\n\t\tmargin-left: 4px;\n\t}\n\n\t.timestamp {\n\t\tmargin-right: 10px;\n\t\tfont-size: small;\n\t\twhite-space: nowrap;\n\t\tmargin-bottom: 0;\n\t}\n}\n.button {\n\tcolor: var(--color-main-background);\n\t&:not(.active):not(.primary) {\n\t\tdisplay: none;\n\n\t\t&.primary {\n\t\t\tbackground-color: var(--color-primary);\n\t\t\topacity: 1;\n\t\t\tmargin-bottom: 0;\n\n\t\t}\n\t}\n}\n.avatardiv {\n\tdisplay: inline-block;\n\tmargin-bottom: -23px;\n}\n.subject {\n\tmargin-left: 8px;\n\tcursor: default;\n}\n\n.envelope {\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-shadow: 0 0 10px var(--color-box-shadow);\n\tborder-radius: 16px;\n\tmargin-left: 10px;\n\tmargin-right: 10px;\n\tbackground-color: var(--color-main-background);\n\tpadding-bottom: 20px;\n\n\t& + .envelope {\n\t\tmargin-top: -20px;\n\t}\n\n\t&:last-of-type {\n\t\tmargin-bottom: 10px;\n\t\tpadding-bottom: 0;\n\t}\n}\n\n.envelope--header {\n\tposition: relative;\n\tdisplay: flex;\n\tpadding: 10px;\n\tborder-radius: var(--border-radius);\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\t\tborder-radius: 16px;\n\t}\n}\n.left {\n\tflex-grow: 1;\n}\n.icon-important {\n\t::v-deep path {\n\t\tfill: #ffcc00;\n\t\tstroke: var(--color-main-background);\n\t\tcursor: pointer;\n\t}\n\n\t&.app-content-list-item-star {\n\t\tbackground-image: none;\n\t\tposition: absolute;\n\t\topacity: 1;\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tmargin-left: -1px;\n\t\tdisplay: flex;\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-top: -2px;\n\tmargin-left: 27px;\n\tcursor: pointer;\n}\n.app-content-list-item-star.icon-junk {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-top: -2px;\n\tmargin-left: 27px;\n\tcursor: pointer;\n\topacity: .2;\n}\n.left:not(.seen) {\n\tfont-weight: bold;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.envelope--header.list-item-style {\n\tborder-radius: 16px;\n}\n\n"],sourceRoot:""}]),n.a=i},1372:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"#mail-message{flex-grow:1}#mail-message .icon-loading:only-child:after{margin-top:20px}.mail-message-body{flex:1;margin-bottom:60px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:60px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content{margin:10px 38px 0 60px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0 !important;padding:9px 18px 10px 32px !important}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}.app-content-details,.splitpanes__pane-details{max-width:unset !important;width:100% !important}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.splitpanes__pane-list,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}","",{version:3,sources:["webpack://./src/components/Thread.vue"],names:[],mappings:"AAgQA,cACC,WAAA,CAGC,6CACC,eAAA,CAKH,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,cACC,uBAAA,CAGD,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAGD,wCAEC,WAAA,CACA,cAAA,CACA,mBAAA,CACA,qCAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAED,+CAEC,0BAAA,CACA,qBAAA,CAED,+KASC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#mail-message {\n\tflex-grow: 1;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 60px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 60px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content {\n\tmargin: 10px 38px 0 60px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n.icon-reply-white,\n.icon-reply-all-white {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0 !important;\n\tpadding: 9px 18px 10px 32px !important;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\t.app-content-details,\n\t.splitpanes__pane-details {\n\t\tmax-width: unset !important;\n\t\twidth: 100% !important;\n\t}\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.splitpanes__pane-list,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n"],sourceRoot:""}]),n.a=i},1373:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".v-popover>.trigger[data-v-443131b3]>{z-index:1}.icon-info[data-v-443131b3]{background-image:var(--icon-info-000)}.important-info[data-v-443131b3]{max-width:230px;padding:16px}.app-content-list[data-v-443131b3]{display:flex}.app-content-list-item[data-v-443131b3]:hover{background:rgba(0,0,0,0)}.button[data-v-443131b3]{background-color:var(--color-main-background);width:44px;height:44px;border:0;margin-bottom:17px}.button[data-v-443131b3]:hover,.button[data-v-443131b3]:focus{background-color:var(--color-background-dark)}#app-content-wrapper[data-v-443131b3]{display:flex}.envelope-list[data-v-443131b3]{max-height:calc(100vh - var(--header-height));overflow-y:auto}","",{version:3,sources:["webpack://./src/components/MailboxThread.vue"],names:[],mappings:"AAoOA,sCACC,SAAA,CAGD,4BACC,qCAAA,CAGD,iCACC,eAAA,CACA,YAAA,CAGD,mCAEC,YAAA,CAGD,8CACC,wBAAA,CAGD,yBACC,6CAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,kBAAA,CAEA,8DAEC,6CAAA,CAIF,sCACC,YAAA,CAGD,gCACC,6CAAA,CACA,eAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.v-popover > .trigger > {\n\tz-index: 1;\n}\n\n.icon-info {\n\tbackground-image: var(--icon-info-000);\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list {\n\t// Required for centering the loading indicator\n\tdisplay: flex;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\twidth: 44px;\n\theight: 44px;\n\tborder: 0;\n\tmargin-bottom: 17px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n#app-content-wrapper {\n\tdisplay: flex;\n}\n\n.envelope-list {\n\tmax-height: calc(100vh - var(--header-height));\n\toverflow-y: auto;\n}\n"],sourceRoot:""}]),n.a=i},1393:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".new-message-attachments ul[data-v-3f65042e]{display:flex;flex-wrap:wrap;max-height:140px;overflow:auto}.new-message-attachments li[data-v-3f65042e]{padding:10px}.new-message-attachments-action[data-v-3f65042e]{display:inline-block;vertical-align:middle;padding:10px;opacity:.5}.new-message-attachment-name[data-v-3f65042e]{display:inline-block}.new-message-attachment-name.upload-ongoing[data-v-3f65042e]{color:#0082c9}.new-message-attachment-name.upload-warning[data-v-3f65042e]{color:#d2322d}.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-3f65042e]{border:1px solid #e9322d;background:#e9322d}.attachments-upload-progress[data-v-3f65042e]{display:flex}.attachments-upload-progress>div[data-v-3f65042e]{padding-left:3px}","",{version:3,sources:["webpack://./src/components/ComposerAttachments.vue"],names:[],mappings:"AAyOC,6CACC,YAAA,CACA,cAAA,CAEA,gBAAA,CACA,aAAA,CAED,6CACC,YAAA,CAIF,iDACC,oBAAA,CACA,qBAAA,CACA,YAAA,CACA,UAAA,CAID,8CACC,oBAAA,CAID,6DACC,aAAA,CAID,6DACC,aAAA,CAID,mFACC,wBAAA,CACA,kBAAA,CAGD,8CACC,YAAA,CAGD,kDACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.new-message-attachments {\n\tul {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t// 2 and a half attachment height\n\t\tmax-height: 140px;\n\t\toverflow: auto;\n\t}\n\tli {\n\t\tpadding: 10px;\n\t}\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 10px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n\n.attachments-upload-progress {\n\tdisplay: flex;\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n"],sourceRoot:""}]),n.a=i},1394:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n.multiselect\n\t.multiselect__tags\n\t.multiselect__tags-wrap\n\t.multiselect__tag--recipient[data-v-796d2733] {\n\tpadding: 0 25px 0 0;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n}\n.multiselect__tag--recipient .action-item--single[data-v-796d2733] {\n\twidth: auto;\n\tmin-width: 24px;\n\theight: 24px;\n\tmin-height: 24px;\n\tposition: absolute;\n\tright: 0;\n}\n.multiselect__tag--recipient .action-item--single .material-design-icon[data-v-796d2733] {\n\theight: 24px;\n\twidth: 24px;\n}\n","",{version:3,sources:["webpack://./src/components/RecipientListItem.vue"],names:[],mappings:";AA4CA;;;;CAIA,mBAAA;CACA,mBAAA;CACA,yBAAA;CACA,8CAAA;AACA;AACA;CACA,WAAA;CACA,eAAA;CACA,YAAA;CACA,gBAAA;CACA,kBAAA;CACA,QAAA;AACA;AACA;CACA,YAAA;CACA,WAAA;AACA",sourcesContent:["<template>\n\t<div class=\"multiselect__tag multiselect__tag--recipient\">\n\t\t<ListItemIcon\n\t\t\t:no-margin=\"true\"\n\t\t\t:title=\"option.label\"\n\t\t\t:avatar-size=\"24\" />\n\t\t<Actions>\n\t\t\t<ActionButton @click.prevent=\"removeRecipient(option)\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Close :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</ActionButton>\n\t\t</Actions>\n\t</div>\n</template>\n\n<script>\nimport ListItemIcon from '@nextcloud/vue/dist/Components/ListItemIcon'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Close from 'vue-material-design-icons/Close'\nexport default {\n\tname: 'RecipientListItem',\n\tcomponents: {\n\t\tListItemIcon,\n\t\tActions,\n\t\tActionButton,\n\t\tClose,\n\t},\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tremoveRecipient(option, field) {\n\t\t\tthis.$emit('remove-recipient', option, field)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.multiselect\n\t.multiselect__tags\n\t.multiselect__tags-wrap\n\t.multiselect__tag--recipient {\n\tpadding: 0 25px 0 0;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n}\n.multiselect__tag--recipient .action-item--single {\n\twidth: auto;\n\tmin-width: 24px;\n\theight: 24px;\n\tmin-height: 24px;\n\tposition: absolute;\n\tright: 0;\n}\n.multiselect__tag--recipient .action-item--single .material-design-icon {\n\theight: 24px;\n\twidth: 24px;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1439:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"\n#mailvelope-composer[data-v-1320c887] {\n\twidth: 100%;\n\theight: 450px;\n}\n","",{version:3,sources:["webpack://./src/components/MailvelopeEditor.vue"],names:[],mappings:";AA6EA;CACA,WAAA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n"],sourceRoot:""}]),n.a=i},1440:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".message-composer[data-v-673cf596]{margin:0;z-index:100;display:flex;flex-direction:column;height:100%;max-height:100%}.composer-actions[data-v-673cf596]{position:sticky;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-fields[data-v-673cf596]{display:flex;border-top:1px solid var(--color-border);align-items:flex-start}.composer-fields .multiselect.multiselect--multiple[data-v-673cf596]::after{position:absolute;right:0;top:auto;bottom:8px}.composer-fields .multiselect__tag[data-v-673cf596]{position:relative}.composer-fields.mail-account[data-v-673cf596]{border-top:none;padding-top:10px}.composer-fields.mail-account>.multiselect[data-v-673cf596]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-673cf596],.composer-fields input[data-v-673cf596],.composer-fields TextEditor[data-v-673cf596]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .composer-fields--custom[data-v-673cf596]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-top:5px;width:calc(100% - 120px)}.composer-fields .composer-fields--custom button[data-v-673cf596]{margin-top:0;background-color:rgba(0,0,0,0);border:none;opacity:.5}.composer-fields .composer-fields--custom button.active[data-v-673cf596],.composer-fields .composer-fields--custom button[data-v-673cf596]:active{opacity:1}.composer-fields .composer-fields--custom .multiselect[data-v-673cf596]{width:calc(100% - 150px)}.composer-fields .multiselect[data-v-673cf596]{margin-right:12px}.subject[data-v-673cf596]{font-size:20px;font-weight:bold;margin:0;padding:24px 20px}.warning-box[data-v-673cf596]{padding:5px 12px;border-radius:0}.message-editor[data-v-673cf596]{flex:1 1 100%;min-height:0}.message-body[data-v-673cf596]{height:100%;width:100%;margin:0;border:none !important;outline:none !important;box-shadow:none !important;padding-top:12px;padding-bottom:12px;padding-left:20px;-webkit-user-select:text;user-select:text}.draft-status[data-v-673cf596]{padding:2px;opacity:.5;font-size:small;display:block}.from-label[data-v-673cf596],.to-label[data-v-673cf596],.copy-toggle[data-v-673cf596],.cc-label[data-v-673cf596],.bcc-label[data-v-673cf596]{padding-top:12px;padding-bottom:12px;padding-right:20px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.bcc-label[data-v-673cf596]{top:initial;bottom:0}.copy-toggle[data-v-673cf596]{cursor:pointer;width:initial}.copy-toggle[data-v-673cf596]:hover,.copy-toggle[data-v-673cf596]:focus{color:var(--color-main-text)}.reply[data-v-673cf596]{min-height:100px}[data-v-673cf596] .multiselect .multiselect__tags{border:none !important}[data-v-673cf596] [data-select=create] .avatardiv--unknown{background:var(--color-text-maxcontrast) !important}[data-v-673cf596] .multiselect.opened .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap}.submit-message.send.primary.icon-confirm-white[data-v-673cf596]{color:var(--color-main-background)}.sending-hint[data-v-673cf596]{height:50px;margin-top:50px}.button[data-v-673cf596]{background-color:rgba(0,0,0,0);border:none}.send-action-radio[data-v-673cf596]{padding:5px 0 5px 0}.send-button[data-v-673cf596]{display:flex;align-items:center;padding:10px 15px;margin-left:5px}.send-button .send-icon[data-v-673cf596]{padding-right:5px}.centered-content[data-v-673cf596]{margin-top:0 !important}.composer-actions-right[data-v-673cf596]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;bottom:5px}.composer-actions--primary-actions[data-v-673cf596]{display:flex;flex-direction:row;padding-left:10px;align-items:center}.composer-actions--secondary-actions[data-v-673cf596]{display:flex;flex-direction:row;padding:5px}.composer-actions--primary-actions .button[data-v-673cf596]{padding:2px}.composer-actions--secondary-actions .button[data-v-673cf596]{flex-shrink:0}.composer-actions-draft-status[data-v-673cf596]{padding-left:10px}@media only screen and (max-width: 580px){.composer-actions-right[data-v-673cf596]{align-items:end;flex-direction:column-reverse}.composer-actions-draft-status[data-v-673cf596]{text-align:end;padding-right:15px}.composer-actions--primary-actions[data-v-673cf596]{padding-right:5px}}","",{version:3,sources:["webpack://./src/components/Composer.vue"],names:[],mappings:"AA+qCA,mCACC,QAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,mCACC,eAAA,CACA,gGAAA,CAGD,kCACC,YAAA,CACA,wCAAA,CACA,sBAAA,CAEA,4EACC,iBAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CAGD,oDACC,iBAAA,CAGD,+CACC,eAAA,CACA,gBAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,cAAA,CACA,eAAA,CACA,wBAAA,CAEA,kEACC,YAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CAGD,kJACC,SAAA,CAGD,wEACC,wBAAA,CAIF,+CACC,iBAAA,CAIF,0BACC,cAAA,CACA,gBAAA,CACA,QAAA,CACA,iBAAA,CAGD,8BACC,gBAAA,CACA,eAAA,CAID,iCACC,aAAA,CACA,YAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,QAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CACA,gBAAA,CACA,mBAAA,CACA,iBAAA,CAIA,wBAAA,CACA,gBAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAID,6IAKC,gBAAA,CACA,mBAAA,CACA,kBAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,kDACC,sBAAA,CAED,2DACC,mDAAA,CAED,iFACC,cAAA,CAGD,iEACC,kCAAA,CAED,+BACC,WAAA,CACA,eAAA,CAED,yBACC,8BAAA,CACA,WAAA,CAED,oCACC,mBAAA,CAED,8BACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,eAAA,CAED,yCACC,iBAAA,CAED,mCACC,uBAAA,CAED,yCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CAED,oDACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,kBAAA,CAED,sDACC,YAAA,CACA,kBAAA,CACA,WAAA,CAED,4DACC,WAAA,CAED,8DACC,aAAA,CAGD,gDACC,iBAAA,CAGD,0CACC,yCACC,eAAA,CACA,6BAAA,CAED,gDACC,cAAA,CACA,kBAAA,CAED,oDACC,iBAAA,CAAA",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 100%;\n}\n\n.composer-actions {\n\tposition: sticky;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-fields {\n\tdisplay: flex;\n\tborder-top: 1px solid var(--color-border);\n\talign-items: flex-start;\n\n\t.multiselect.multiselect--multiple::after {\n\t\tposition:absolute;\n\t\tright: 0;\n\t\ttop: auto;\n\t\tbottom:8px\n\t}\n\n\t.multiselect__tag {\n\t\tposition: relative;\n\t}\n\n\t&.mail-account {\n\t\tborder-top: none;\n\t\tpadding-top: 10px;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.composer-fields--custom {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t\tpadding-top:5px;\n\t\twidth: calc(100% - 120px);\n\n\t\tbutton {\n\t\t\tmargin-top: 0;\n\t\t\tbackground-color: transparent;\n\t\t\tborder:none;\n\t\t\topacity: 0.5\n\t\t}\n\n\t\tbutton.active,button:active {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.multiselect {\n\t\t\twidth: calc(100% - 150px);\n\t\t}\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n}\n\n.subject {\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tmargin: 0;\n\tpadding: 24px 20px;\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n// Make composer editor expand\n.message-editor {\n\tflex: 1 1 100%;\n\tmin-height: 0;\n}\n\n.message-body {\n\theight: 100%;\n\twidth: 100%;\n\tmargin: 0;\n\tborder: none !important;\n\toutline: none !important;\n\tbox-shadow: none !important;\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-left: 20px;\n\n\t// Fix contenteditable not becoming focused upon clichint within it\'s\n\t// boundaries in safari\n\t-webkit-user-select: text;\n\tuser-select: text;\n}\n\n.draft-status {\n\tpadding: 2px;\n\topacity: 0.5;\n\tfont-size: small;\n\tdisplay: block;\n\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-right: 20px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-weight: bold;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n::v-deep .multiselect .multiselect__tags {\n\tborder: none !important;\n}\n::v-deep [data-select="create"] .avatardiv--unknown {\n\tbackground: var(--color-text-maxcontrast) !important;\n}\n::v-deep .multiselect.opened .multiselect__tags .multiselect__tags-wrap {\n\tflex-wrap: wrap;\n}\n\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n.sending-hint {\n\theight: 50px;\n\tmargin-top: 50px;\n}\n.button {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.send-action-radio {\n\tpadding: 5px 0 5px 0;\n}\n.send-button {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10px 15px;\n\tmargin-left: 5px;\n}\n.send-button .send-icon {\n\tpadding-right: 5px;\n}\n.centered-content {\n\tmargin-top: 0 !important;\n}\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbottom: 5px;\n}\n.composer-actions--primary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-left: 10px;\n\talign-items: center;\n}\n.composer-actions--secondary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 5px;\n}\n.composer-actions--primary-actions .button {\n\tpadding: 2px;\n}\n.composer-actions--secondary-actions .button{\n\tflex-shrink: 0;\n}\n\n.composer-actions-draft-status {\n\tpadding-left: 10px;\n}\n\n@media only screen and (max-width: 580px) {\n\t.composer-actions-right {\n\t\talign-items: end;\n\t\tflex-direction: column-reverse;\n\t}\n\t.composer-actions-draft-status {\n\t\ttext-align: end;\n\t\tpadding-right: 15px;\n\t}\n\t.composer-actions--primary-actions {\n\t\tpadding-right: 5px;\n\t}\n}\n\n'],sourceRoot:""}]),n.a=i},1441:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"@media only screen and (max-width: 600px){[data-v-4ae59572] .modal-container{max-width:80%}}[data-v-4ae59572] .modal-wrapper .modal-container{overflow-y:auto !important;overflow-x:auto !important;height:90%;max-height:700px !important}","",{version:3,sources:["webpack://./src/components/NewMessageModal.vue"],names:[],mappings:"AA4MA,0CACC,mCACC,aAAA,CAAA,CAGF,kDACC,0BAAA,CACA,0BAAA,CAEA,UAAA,CAEA,2BAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@media only screen and (max-width: 600px) {\n\t::v-deep .modal-container {\n\t\tmax-width: 80%;\n\t}\n}\n::v-deep .modal-wrapper .modal-container {\n\toverflow-y: auto !important;\n\toverflow-x: auto !important;\n\t// from original Modal max-height\n\theight: 90%;\n\t// Max editor + modal height\n\tmax-height: 700px !important;\n}\n"],sourceRoot:""}]),n.a=i},1488:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,".outbox-message[data-v-e4a083f2]{list-style:none}.outbox-message.active[data-v-e4a083f2]{background-color:var(--color-background-dark);border-radius:16px}.outbox-message .account-color[data-v-e4a083f2]{position:absolute;left:0;width:2px;height:69px;z-index:1}","",{version:3,sources:["webpack://./src/components/OutboxMessageListItem.vue"],names:[],mappings:"AAsKA,iCACC,eAAA,CACA,wCACC,6CAAA,CACA,kBAAA,CAGD,gDACC,iBAAA,CACA,MAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.outbox-message {\n\tlist-style: none;\n\t&.active {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: 16px;\n\t}\n\n\t.account-color {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: 2px;\n\t\theight: 69px;\n\t\tz-index: 1;\n\t}\n}\n"],sourceRoot:""}]),n.a=i},1489:function(t,n,e){"use strict";var r=e(40),o=e.n(r),a=e(41),i=e.n(a)()(o.a);i.push([t.i,"[data-v-491f4e65] .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:0}","",{version:3,sources:["webpack://./src/views/Home.vue"],names:[],mappings:"AAkHA,uCACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,WAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 0;\n}\n"],sourceRoot:""}]),n.a=i},1531:function(n,e,r){"use strict";r.r(e);var o=r(1102),a=r.n(o),i=r(1029),s=r.n(i),c=r(9),l=r(1103),u=r.n(l),d=r(1104),p=r.n(d),h=r(1031),f=r.n(h),m={name:"SectionTitle",props:{name:{type:String,required:!0}}},v=r(39),g=r.n(v),A=r(1261),y={insert:"head",singleton:!1},b=(g()(A.a,y),A.a.locals,r(29)),C=Object(b.a)(m,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"priority"}},[n("div",{staticClass:"app-content-list-item"},[n("h2",[this._v(this._s(this.name))])])])}),[],!1,null,"95f06344",null).exports,w=r(6),x="@@InfiniteScroll",_=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},k=document.defaultView.getComputedStyle,E=function(t){return t===window?_(window):t.getBoundingClientRect().top+_(window)},L=function(t){for(var n=t.parentNode;n;){if("HTML"===n.tagName)return!0;if(11===n.nodeType)return!1;n=n.parentNode}return!1},S=function(){if(!this.binded){this.binded=!0;var t,n,e,r,o,a,i,s,c=this,l=c.el,u=l.getAttribute("infinite-scroll-throttle-delay"),d=200;u&&(d=Number(c.vm[u]||u),(isNaN(d)||d<0)&&(d=200)),c.throttleDelay=d,c.scrollEventTarget=function(t){for(var n=t;n&&"HTML"!==n.tagName&&"BODY"!==n.tagName&&1===n.nodeType;){var e=k(n).overflowY;if("scroll"===e||"auto"===e)return n;n=n.parentNode}return window}(l),c.scrollListener=(t=I.bind(c),n=c.throttleDelay,s=function(){t.apply(a,i),r=e},function(){if(a=this,i=arguments,e=Date.now(),o&&(clearTimeout(o),o=null),r){var t=n-(e-r);t<0?s():o=setTimeout((function(){s()}),t)}else s()}),c.scrollEventTarget.addEventListener("scroll",c.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){c.scrollEventTarget.removeEventListener("scroll",c.scrollListener)}));var p=l.getAttribute("infinite-scroll-disabled"),h=!1;p&&(this.vm.$watch(p,(function(t){c.disabled=t,!t&&c.immediateCheck&&I.call(c)})),h=Boolean(c.vm[p])),c.disabled=h;var f=l.getAttribute("infinite-scroll-distance"),m=0;f&&(m=Number(c.vm[f]||f),isNaN(m)&&(m=0)),c.distance=m;var v=l.getAttribute("infinite-scroll-immediate-check"),g=!0;v&&(g=Boolean(c.vm[v])),c.immediateCheck=g,g&&I.call(c);var A=l.getAttribute("infinite-scroll-listen-for-event");A&&c.vm.$on(A,(function(){I.call(c)}))}},I=function(t){var n=this.scrollEventTarget,e=this.el,r=this.distance;if(!0===t||!this.disabled){var o=_(n),a=o+function(t){return t===window?document.documentElement.clientHeight:t.clientHeight}(n),i=!1;if(n===e)i=n.scrollHeight-a<=r;else i=a+r>=E(e)-E(n)+e.offsetHeight+o;i&&this.expression&&this.expression()}},T={bind:function(t,n,e){t[x]={el:t,vm:e.context,expression:n.value};var r=arguments;console.info("binding",t,n,e),t[x].vm.$nextTick((function(){L(t)&&S.call(t[x],r),t[x].bindTryCount=0;!function n(){t[x].bindTryCount>10||(t[x].bindTryCount++,L(t)?S.call(t[x],r):setTimeout(n,50))}()}))},unbind:function(t){t&&t[x]&&t[x].scrollEventTarget&&t[x].scrollEventTarget.removeEventListener("scroll",t[x].scrollListener)}},O={name:"EmptyMailbox"},D=Object(b.a)(O,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"emptycontent"}},[n("div",{staticClass:"icon-mail"}),this._v(" "),n("h2",[this._v(this._s(this.t("mail","No messages in this mailbox")))])])}),[],!1,null,null,null).exports,j=r(937),M=r.n(j),B=r(911),P=r.n(B),N=r(33),F=r(1105),G=r.n(F),$=r(1245),R=r(566),z=r(1032),q=r(1246),U=r(1247),Y=r(987),W=r(1022),V=r(758),H=r(374),Q=r.n(H),K=r(1108),J=r.n(K),X=r(992),Z=r(1264),tt=r.n(Z);function nt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var et=function(){function t(n,e,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=n,this.options=r,this.registerListeners.bind(this)(n),this.setInitialAttributes()}var n,e,r;return n=t,(e=[{key:"setInitialAttributes",value:function(){this.el.setAttribute("draggable","true"),this.el.classList.add("draggable-envelope")}},{key:"update",value:function(t,n){this.options=n.options}},{key:"registerListeners",value:function(t){t.addEventListener("dragstart",this.onDragStart.bind(this)),t.addEventListener("dragend",this.onDragEnd.bind(this))}},{key:"removeListeners",value:function(t){t.removeEventListener("dragstart",this.onDragStart),t.removeEventListener("dragend",this.onDragEnd)}},{key:"onDragStart",value:function(t){var n=this.options,e=n.accountId,r=n.mailboxId,o=n.selectedEnvelopes;t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move";var a=[];if(o.length)o.forEach((function(t,n){a.push({accountId:e,mailboxId:r,envelopeId:t.databaseId,draggableLabel:"".concat(t.subject," (").concat(t.from[0].label,")")})}));else{var i=this.options,s=i.envelopeId,c=i.draggableLabel;a.push({accountId:e,mailboxId:r,envelopeId:s,draggableLabel:c})}t.dataTransfer.setData("text/plain",JSON.stringify(a)),this.attachGhost({event:t,envelopes:a}),X.a.$emit("dragStart",{accountId:e,mailboxId:r,itemCount:a.length})}},{key:"onDragEnd",value:function(t){X.a.$emit("dragEnd",{accountId:this.options.accountId})}},{key:"attachGhost",value:function(t){var n=t.event,e=t.envelopes,r="draggable-envelope-ghost",o=document.createElement("div");o.classList.add(r);var a=document.createElement("span");a.classList.add("".concat(r,"--counter"));var i=document.createTextNode(e.length);a.appendChild(i),o.appendChild(a);var s=document.createElement("div");s.classList.add("".concat(r,"--label-wrapper")),e.forEach((function(t){var n=document.createElement("div");n.classList.add("".concat(r,"--label-wrapper--label"));var e=document.createTextNode(t.draggableLabel);n.appendChild(e),s.appendChild(n)})),o.appendChild(s),document.body.appendChild(o),n.dataTransfer.setDragImage(o,0,15),tt()((function(){document.body.removeChild(o)}))}}])&&nt(n.prototype,e),r&&nt(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),rt=[],ot={bind:function(t,n,e){var r=new et(t,e.context,n.value);rt.push(r)},componentUpdated:function(t,n){var e=n.value;setTimeout((function(){rt.forEach((function(n){n.options.selectedEnvelopes=e.selectedEnvelopes,n.update(t,n)}))}))},unbind:function(t){rt=rt.filter((function(n){return n.el!==t}))}},at=r(343),it=r(244),st=r(360);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */lt=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ct(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function ut(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return dt(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return dt(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(s)throw a}}}}function dt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function pt(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var ht={name:"MoveModal",components:{MailboxPicker:r(1238).a},props:{account:{type:Object,required:!0},envelopes:{type:Array,required:!0},moveThread:{type:Boolean,default:!1}},data:function(){return{moving:!1,destMailboxId:void 0}},methods:{onClose:function(){this.$emit("close")},onMove:function(){var t,n=this;return(t=lt().mark((function t(){var e,r,o,a;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.moving=!0,t.prev=1,0!==(e=n.envelopes.filter((function(t){return t.mailboxId!==n.destMailboxId}))).length){t.next=5;break}return t.abrupt("return");case 5:r=ut(e),t.prev=6,r.s();case 8:if((o=r.n()).done){t.next=19;break}if(a=o.value,!n.moveThread){t.next=15;break}return t.next=13,n.$store.dispatch("moveThread",{envelope:a,destMailboxId:n.destMailboxId});case 13:t.next=17;break;case 15:return t.next=17,n.$store.dispatch("moveMessage",{id:a.databaseId,destMailboxId:n.destMailboxId});case 17:t.next=8;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),r.e(t.t0);case 24:return t.prev=24,r.f(),t.finish(24);case 27:return t.next=29,n.$store.dispatch("syncEnvelopes",{mailboxId:n.destMailboxId});case 29:n.$emit("move"),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(1),c.a.error("could not move messages",{error:t.t1});case 35:return t.prev=35,n.moving=!1,n.$emit("close"),t.finish(35);case 39:case"end":return t.stop()}}),t,null,[[1,32,35,39],[6,21,24,27]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){pt(a,r,o,i,s,"next",t)}function s(t){pt(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},ft=Object(b.a)(ht,(function(){var t=this,n=t.$createElement;return(t._self._c||n)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"label-select":t.moveThread?t.t("mail","Move thread"):t.t("mail","Move message"),"label-select-loading":t.moveThread?t.t("mail","Moving thread"):t.t("mail","Moving message")},on:{"update:selected":function(n){t.destMailboxId=n},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports,mt=r(1081),vt=r(1248),gt=r(1249),At=r(1250),yt=r(1251),bt={name:"ImportantIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},Ct=Object(b.a)(bt,(function(t,n){var e=n._c;return e("span",n._g(n._b({staticClass:"material-design-icon important-icon",class:[n.data.class,n.data.staticClass],attrs:{"aria-hidden":!n.props.title,"aria-label":n.props.title,role:"img"}},"span",n.data.attrs,!1),n.listeners),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:n.props.fillColor,width:n.props.size,height:n.props.size,viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n._v(" "),e("path",{attrs:{d:"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z"}})])])}),[],!0,null,null,null).exports,wt=r(1252),xt=r(1253),_t=r(943),kt=r.n(_t),Et=r(1033),Lt=r.n(Et),St=r(993),It=r.n(St);function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ot=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Tt(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Dt(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function jt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Dt(a,r,o,i,s,"next",t)}function s(t){Dt(a,r,o,i,s,"throw",t)}i(void 0)}))}}function Mt(){for(var t=((1<<24)*Math.random()|0).toString(16);t.length<6;)t="0"+t;return"#"+t}var Bt={name:"TagModal",components:{Modal:kt.a,Actions:M.a,ActionText:Lt.a,ActionInput:It.a,ActionButton:P.a},props:{envelope:{required:!0,type:Object}},data:function(){return{isAdded:!1,editing:!1,tagLabel:!0,tagInput:!1,showSaving:!1,renameTagLabel:!0,renameTagInput:!1,color:Mt()}},computed:{tags:function(){var t=this;return this.$store.getters.getTags.filter((function(t){return"$label1"!==t.imapLabel})).sort((function(n,e){return n.isDefaultTag&&!e.isDefaultTag?-1:e.isDefaultTag&&!n.isDefaultTag?1:n.isDefaultTag&&e.isDefaultTag?n.displayName<e.displayName?1:-1:t.isSet(n.imapLabel)&&!t.isSet(e.imapLabel)?-1:!t.isSet(n.imapLabel)&&t.isSet(e.imapLabel)||n.displayName<e.displayName?1:-1}))}},methods:{onClose:function(){this.$emit("close")},isSet:function(t){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some((function(n){return n.imapLabel===t}))},addTag:function(t){this.isAdded=!0,this.$store.dispatch("addEnvelopeTag",{envelope:this.envelope,imapLabel:t})},removeTag:function(t){this.isAdded=!1,this.$store.dispatch("removeEnvelopeTag",{envelope:this.envelope,imapLabel:t})},addTagInput:function(){this.editing=!0,this.showSaving=!1},createTag:function(t){var n=this;return jt(Ot().mark((function e(){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.editing=!0,r=t.target.querySelector("input[type=text]").value,!n.$store.getters.getTags.some((function(t){return t.displayName===r}))){e.next=5;break}return Object(N.c)(n.t("mail","Tag already exists")),e.abrupt("return");case 5:return e.prev=5,e.next=8,n.$store.dispatch("createTag",{displayName:r,color:Mt()});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.debug(e.t0),Object(N.c)(n.t("mail","An error occurred, unable to create the tag."));case 14:return e.prev=14,n.showSaving=!1,n.tagLabel=!0,e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[5,10,14,18]])})))()},convertHex:function(t,n){if(4===t.length){var e=parseInt(t.substring(1,2),16),r=parseInt(t.substring(2,3),16),o=parseInt(t.substring(3,4),16);return"rgba(".concat(e,", ").concat(r,", ").concat(o,", ").concat(n,")")}var a=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16);return"rgba(".concat(a,", ").concat(i,", ").concat(s,", ").concat(n,")")},openEditTag:function(){this.renameTagLabel=!1,this.renameTagInput=!0,this.showSaving=!1},renameTag:function(n,e){var r=this;return jt(Ot().mark((function o(){var a;return Ot().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r.renameTagInput=!1,r.showSaving=!1,a=e.target.querySelector("input[type=text]").value,o.prev=3,o.next=6,r.$store.dispatch("updateTag",{tag:n,displayName:a,color:n.color});case 6:r.renameTagLabel=!0,r.renameTagInput=!1,r.showSaving=!1,o.next=18;break;case 11:o.prev=11,o.t0=o.catch(3),Object(N.d)(t("mail","An error occurred, unable to rename the tag.")),console.error(o.t0),r.renameTagLabel=!1,r.renameTagInput=!1,r.showSaving=!0;case 18:case"end":return o.stop()}}),o,null,[[3,11]])})))()}}},Pt=r(1267),Nt={insert:"head",singleton:!1},Ft=(g()(Pt.a,Nt),Pt.a.locals,Object(b.a)(Bt,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Modal",{attrs:{size:"large"},on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add default tags"))+"\n\t\t")]),t._v(" "),t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("button",{staticClass:"tag-group__label",style:{color:t.convertHex(n.color,1),"background-color":t.convertHex(n.color,.15)}},[t._v("\n\t\t\t\t"+t._s(n.displayName)+"\n\t\t\t")]),t._v(" "),e("Actions",{attrs:{"force-menu":!0}},[t.renameTagLabel?e("ActionButton",{attrs:{icon:"icon-rename"},on:{click:t.openEditTag}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Rename tag"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.renameTagInput?e("ActionInput",{attrs:{icon:"icon-tag",value:n.displayName},on:{submit:function(e){return t.renameTag(n,e)}}}):t._e(),t._v(" "),t.showSaving?e("ActionText",{attrs:{icon:"icon-loading-small"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Saving new tag name …"))+"\n\t\t\t\t")]):t._e()],1),t._v(" "),t.isSet(n.imapLabel)?e("button",{staticClass:"tag-actions",on:{click:function(e){return t.removeTag(n.imapLabel)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Unset"))+"\n\t\t\t")]):e("button",{staticClass:"tag-actions",on:{click:function(e){return t.addTag(n.imapLabel)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Set"))+"\n\t\t\t")])],1)})),t._v(" "),e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"create-tag"},[t.editing?t._e():e("button",{staticClass:"tagButton",on:{click:t.addTagInput}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{attrs:{icon:"icon-tag"},on:{submit:t.createTag}}):t._e(),t._v(" "),t.showSaving?e("ActionText",{attrs:{icon:"icon-loading-small"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving tag …"))+"\n\t\t\t")]):t._e()],1)],2)])}),[],!1,null,"0b6e590a",null).exports),Gt=r(1079),$t=r(1268),Rt=r.n($t),zt=r(1269),qt=r.n(zt),Ut=r(994),Yt=r.n(Ut),Wt=r(1273),Vt=r.n(Wt),Ht=r(953),Qt=r.n(Ht),Kt=r(1274),Jt=r(3),Xt=r.n(Jt),Zt=r(571),tn=r.n(Zt),nn=r(2),en=r(51),rn=tn()((function(t){return Xt.a.defaults.headers["X-Requested-With"]="XMLHttpRequest",Kt.getPatcher().patch("request",Xt.a),Kt.createClient(Object(nn.generateRemoteUrl)("dav/".concat(t,"/").concat(Object(en.getCurrentUser)().uid)))})),on=r(531),an=r.n(on),sn=r(1106),cn=r.n(sn);var ln=function(t){var n=t.toLowerCase();null===n.match(/^([0-9a-f]{4}-?){8}$/)&&(n=an()(n)),n=n.replace(/[^0-9a-f]/g,"");return function(t){t||(t=6);var n=new un(182,70,157),e=new un(221,203,85),r=new un(0,130,201),o=dn(t,n,e),a=dn(t,e,r),i=dn(t,r,n);return o.concat(a).concat(i)}(6)[function(t,n){for(var e=0,r=[],o=0;o<t.length;o++)r.push(parseInt(t.charAt(o),16)%16);for(var a in r)e+=r[a];return parseInt(parseInt(e,10)%n,10)}(n,18)]};function un(t,n,e){this.r=t,this.g=n,this.b=e}function dn(t,n,e){var r=[];r.push(n);for(var o=function(t,n){var e=new Array(3);return e[0]=(n[1].r-n[0].r)/t,e[1]=(n[1].g-n[0].g)/t,e[2]=(n[1].b-n[0].b)/t,e}(t,[n,e]),a=1;a<t;a++){var i=parseInt(n.r+o[0]*a,10),s=parseInt(n.g+o[1]*a,10),c=parseInt(n.b+o[2]*a,10);r.push(new un(i,s,c))}return r}function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */hn=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==pn(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function fn(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function mn(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return vn(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vn(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(s)throw a}}}}function vn(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var gn=function(t){var n,e=null==t||null===(n=t.acl)||void 0===n?void 0:n.ace;if(!e)return!1;Array.isArray(e)||(e=[e]);var r,o=mn(e);try{for(o.s();!(r=o.n()).done;){var a,i;if(void 0!==(null===(a=r.value.grant)||void 0===a||null===(i=a.privilege)||void 0===i?void 0:i.write))return!0}}catch(t){o.e(t)}finally{o.f()}return!1},An=function(t){var n,e,r,o;return{displayname:t.props.displayname,order:t.props["calendar-order"],components:{vevent:!0},writable:gn(t.props),url:Object(nn.generateRemoteUrl)("dav/calendars/".concat(Object(en.getCurrentUser)().uid).concat(t.filename,"/")),color:null!==(n=t.props["calendar-color"])&&void 0!==n?n:(r=null!==(e=t.props.displayname)&&void 0!==e?e:"",o=ln(r),"#"+cn.a.rgb.hex(o.r,o.g,o.b))}},yn=function(){var t,n=(t=hn().mark((function t(){var n;return hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rn("calendars").getDirectoryContents("/",{data:'<?xml version="1.0"?>\n<d:propfind  xmlns:d="DAV:" xmlns:c="urn:ietf:params:xml:ns:caldav" xmlns:aapl="http://apple.com/ns/ical/" xmlns:oc="http://owncloud.org/ns" xmlns:cs="http://calendarserver.org/ns/">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <aapl:calendar-color />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>',details:!0});case 2:return n=t.sent,t.abrupt("return",n.data.map(An).filter((function(t){return t.components.vevent&&!0===t.writable})));case 4:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){fn(a,r,o,i,s,"next",t)}function s(t){fn(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),bn=function(){for(var t="",n=0;n<7;n++)t+=Math.random().toString(36).substring(7);return t},Cn=Vt()((function(t,n){c.a.debug("importing events into calendar",{url:t,data:n});var e=[],r=function(t){var n=[],e={},r=Qt.a.parse(t),o=new Qt.a.Component(r);o.getAllSubcomponents("vtimezone").forEach((function(t){return n.push(t)}));var a=["vevent","vjournal","vtodo"];a.forEach((function(t){var n=o.getAllSubcomponents(t);e[t]={},n.forEach((function(n){var r=n.getFirstPropertyValue("uid");e[t][r]=e[t][r]||[],e[t][r].push(n)}))}));var i=[];return a.forEach((function(t){for(var r in i[t]=[],e[t]){var o=e[t][r],a=(c=void 0,(c=new Qt.a.Component(["vcalendar",[],[]])).updatePropertyWithValue("prodid","-//"+OC.theme.name+" Mail"),c);for(var s in n.forEach(a.addSubcomponent.bind(a)),o)a.addSubcomponent(o[s]);i[t].push(a.toString())}var c})),{name:o.getFirstPropertyValue("x-wr-calname"),color:o.getFirstPropertyValue("x-apple-calendar-color"),split:i}}(n);return["vevent","vjournal","vtodo"].forEach((function(n){for(var o in r.split[n]){var a=r.split[n][o];c.a.info("importing event component",{component:a}),e.push(Promise.resolve(Xt.a.put(t+bn()+".ics",a,{headers:{"Content-Type":"text/calendar; charset=utf-8"}})))}})),Promise.all(e)})),wn={name:"CalendarPickerOption",props:{color:{type:String,required:!0},displayname:{type:String,required:!0},displayIcon:{type:Boolean,default:!1}}},xn=r(1332),_n={insert:"head",singleton:!1};g()(xn.a,_n),xn.a.locals;function kn(t){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return Ln(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ln(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(s)throw a}}}}function Ln(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Sn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Sn=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==kn(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function In(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Tn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){In(a,r,o,i,s,"next",t)}function s(t){In(a,r,o,i,s,"throw",t)}i(void 0)}))}}var On={name:"EventModal",components:{CalendarPickerOption:Object(b.a)(wn,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"calendar-picker-option"},[n("div",{staticClass:"calendar-picker-option__color-indicator",style:{backgroundColor:this.color}}),this._v(" "),n("span",{staticClass:"calendar-picker-option__label"},[this._v("\n\t\t"+this._s(this.displayname)+"\n\t")]),this._v(" "),n("span",{class:this.displayIcon?"icon-caret-dark":""})])}),[],!1,null,"9bd234a6",null).exports,DatetimePicker:Rt.a,Modal:kt.a,Multiselect:Yt.a},props:{envelope:{type:Object,required:!0}},data:function(){var t=qt.a.determine(),n=t?t.name():"UTC";return{calendars:[],eventTitle:this.envelope.subject,startDate:new Date,endDate:new Date,isAllDay:!1,startTimezoneId:n,endTimezoneId:n,saving:!1,selectedCalendar:void 0}},computed:{dateFormat:function(){return this.isAllDay?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"},datePickerType:function(){return this.isAllDay?"date":"datetime"}},created:function(){c.a.debug("creating event from envelope",{envelope:this.envelope})},mounted:function(){var t=this;return Tn(Sn().mark((function n(){return Sn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yn();case 2:t.calendars=n.sent.filter((function(t){return t.writable})),t.calendars.length&&(t.selectedCalendar=t.calendars[0]);case 4:case"end":return n.stop()}}),n)})))()},methods:{onClose:function(){this.$emit("close")},onSave:function(){var n=this;return Tn(Sn().mark((function e(){var r,o,a,i,s,l,u,d,p;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.saving=!0,e.prev=1,c.a.debug("create event",{calendar:n.selectedCalendar,eventTitle:n.eventTitle,startDate:n.startDate,startTimezone:n.startTimezoneId,endTimezone:n.endTimezoneId}),(r=Object(Gt.getTimezoneManager)()).registerDefaultTimezones(),o=r.getTimezoneForId(n.startTimezoneId),a=Gt.DateTimeValue.fromJSDate(n.startDate,!0).getInTimezone(o),i=r.getTimezoneForId(n.endTimezoneId),s=Gt.DateTimeValue.fromJSDate(n.endDate,!0).getInTimezone(i),n.isAllDay&&(a.isDate=!0,s.isDate=!0),l=Object(Gt.createEvent)(a,s),(u=l.getFirstComponent("VEVENT")).addProperty(new Gt.TextProperty("SUMMARY",n.eventTitle)),d=En(l.getVObjectIterator());try{for(d.s();!(p=d.n()).done;)p.value.undirtify()}catch(t){d.e(t)}finally{d.f()}return c.a.debug("calendar object created",{calendar:l,event:u}),e.next=18,Cn(n.selectedCalendar.url,l.toICS());case 18:Object(N.e)(t("mail","Event created")),n.onClose(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),Object(N.c)(t("mail","Could not create event")),c.a.error("Creating event from message failed",{error:e.t0});case 26:return e.prev=26,n.saving=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,22,26,29]])})))()}}},Dn=r(1333),jn={insert:"head",singleton:!1},Mn=(g()(Dn.a,jn),Dn.a.locals,Object(b.a)(On,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Modal",{on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",[t._v(t._s(t.t("mail","Create event")))]),t._v(" "),e("div",{staticClass:"eventTitle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.eventTitle,expression:"eventTitle"}],attrs:{type:"text"},domProps:{value:t.eventTitle},on:{input:function(n){n.target.composing||(t.eventTitle=n.target.value)}}})]),t._v(" "),e("div",{staticClass:"dateTimePicker"},[e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.startTimezoneId},model:{value:t.startDate,callback:function(n){t.startDate=n},expression:"startDate"}}),t._v(" "),e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.endTimezoneId},model:{value:t.endDate,callback:function(n){t.endDate=n},expression:"endDate"}})],1),t._v(" "),e("div",{staticClass:"all-day"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllDay,expression:"isAllDay"}],staticClass:"checkbox",attrs:{id:"allDay",type:"checkbox"},domProps:{checked:Array.isArray(t.isAllDay)?t._i(t.isAllDay,null)>-1:t.isAllDay},on:{change:function(n){var e=t.isAllDay,r=n.target,o=!!r.checked;if(Array.isArray(e)){var a=t._i(e,null);r.checked?a<0&&(t.isAllDay=e.concat([null])):a>-1&&(t.isAllDay=e.slice(0,a).concat(e.slice(a+1)))}else t.isAllDay=o}}}),t._v(" "),e("label",{attrs:{for:"allDay"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","All day"))+"\n\t\t\t")])]),t._v(" "),e("Multiselect",{attrs:{label:"displayname","track-by":"url","allow-empty":!1,options:t.calendars},scopedSlots:t._u([{key:"option",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",r,!1))]}},{key:"singleLabel",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({attrs:{"display-icon":!0}},"CalendarPickerOption",r,!1))]}}]),model:{value:t.selectedCalendar,callback:function(n){t.selectedCalendar=n},expression:"selectedCalendar"}}),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"primary",on:{click:t.onSave}},[t._v("\n\t\t\t"+t._s(t.t("mail","Create"))+"\n\t\t")])],1)])}),[],!1,null,"ebd3f16a",null).exports),Bn={name:"EnvelopePrimaryActions"},Pn=r(1334),Nn={insert:"head",singleton:!1},Fn=(g()(Pn.a,Nn),Pn.a.locals,Object(b.a)(Bn,(function(){var t=this.$createElement;return(this._self._c||t)("ul",{staticClass:"list-item-content__actions--primary"},[this._t("default")],2)}),[],!1,null,null,null).exports);function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$n=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Gn(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Rn(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function zn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Rn(a,r,o,i,s,"next",t)}function s(t){Rn(a,r,o,i,s,"throw",t)}i(void 0)}))}}function qn(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Un(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?qn(Object(e),!0).forEach((function(n){Yn(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):qn(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Yn(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Wn={name:"Envelope",components:{AlertOctagonIcon:$.a,CalendarBlankIcon:q.a,CheckIcon:U.a,ChevronLeft:Y.default,DeleteIcon:W.a,DotsHorizontalIcon:V.default,EnvelopePrimaryActions:Fn,EventModal:Mn,ListItem:G.a,Avatar:R.a,ActionButton:P.a,MoveModal:ft,OpenInNewIcon:mt.a,PlusIcon:wt.a,TagIcon:xt.a,TagModal:Ft,Star:gt.a,StarOutline:vt.a,EmailOutline:At.a,Email:yt.a,ImportantIcon:Ct},directives:{draggableEnvelope:ot},props:{withReply:{type:Boolean,default:!0},data:{type:Object,required:!0},mailbox:{type:Object,required:!0},selectMode:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},selectedEnvelopes:{type:Array,required:!1,default:function(){return[]}},hasMultipleAccounts:{type:Boolean,default:!1}},data:function(){return{importantSvg:J.a,showMoveModal:!1,showEventModal:!1,showTagModal:!1,moreActionsOpen:!1}},computed:{hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.data.accountId});var t=Object(at.b)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},accountColor:function(){var t,n=this.$store.getters.getAccount(this.data.accountId);return Object(z.a)(null!==(t=null==n?void 0:n.emailAddress)&&void 0!==t?t:"")},draft:function(){return this.data.flags.draft},account:function(){var t=this.data.accountId;return this.$store.getters.getAccount(t)},link:function(){return this.draft?void 0:{name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:this.data.databaseId},exact:!0}},addresses:function(){var n,e,r,o;if("sent"===this.mailbox.specialRole){var a=[this.data.to,this.data.cc].flat().map((function(t){return t.label?t.label:t.email}));return a.length>0?a.join(", "):t("mail","Blind copy recipients only")}return null!==(n=null!==(e=null===(r=this.data.from[0])||void 0===r?void 0:r.label)&&void 0!==e?e:null===(o=this.data.from[0])||void 0===o?void 0:o.email)&&void 0!==n?n:"?"},avatarEmail:function(){if("sent"===this.mailbox.specialRole){var t=[this.data.to,this.data.cc].flat().map((function(t){return t.email}));return t.length>0?t[0]:""}return this.data.from.length>0?this.data.from[0].email:""},showFavoriteIconVariant:function(){return this.data.flags.flagged},showImportantIconVariant:function(){return this.data.flags.seen},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.data.databaseId).some((function(t){return"$label1"===t.imapLabel}))},tags:function(){return this.$store.getters.getEnvelopeTags(this.data.databaseId).filter((function(t){return t.imapLabel&&"$label1"!==t.imapLabel}))},draggableLabel:function(){var t,n,e,r=this.data.subject,o=null!==(t=null===(n=this.data.from[0])||void 0===n?void 0:n.label)&&void 0!==t?t:null===(e=this.data.from[0])||void 0===e?void 0:e.email;return o&&(r+=" (".concat(o,")")),r},subjectForSubtitle:function(){return this.data.subject||this.t("mail","No subject")}},methods:{setSelected:function(t){this.selected!==t&&this.$emit("update:selected",t)},formatted:function(){return Q.a.unix(this.data.dateInt).fromNow()},unselect:function(){this.selected&&this.$emit("updated:selected",!1)},toggleSelected:function(){this.$emit("update:selected",!this.selected)},onClick:function(t){this.draft&&!t.defaultPrevented&&this.$store.dispatch("showMessageComposer",{data:Un(Un({},this.data),{},{draftId:this.data.databaseId}),templateMessageId:this.data.databaseId})},onSelectMultiple:function(){this.$emit("select-multiple")},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.data)},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.data)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",{envelope:this.data})},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.data)},onDelete:function(){var n=this;return zn($n().mark((function e(){var r;return $n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSelected(!1),n.$emit("delete",n.data.databaseId),e.prev=2,e.next=5,n.$store.dispatch("deleteThread",{envelope:n.data});case 5:e.next=14;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t1=N.c,e.next=12,Object(st.a)(e.t0,(Yn(r={},it.a.getName(),(function(){return t("mail","No trash mailbox configured")})),Yn(r,"default",(function(n){return c.a.error("could not delete message",n),t("mail","Could not delete message")})),r));case 12:e.t2=e.sent,(0,e.t1)(e.t2);case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))()},onOpenEditAsNew:function(){var t=this;return zn($n().mark((function n(){return $n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("showMessageComposer",{templateMessageId:t.data.databaseId,data:t.data});case 2:case"end":return n.stop()}}),n)})))()},onOpenMoveModal:function(){this.showMoveModal=!0},onOpenEventModal:function(){this.showEventModal=!0},onMove:function(){this.$emit("move")},onCloseMoveModal:function(){this.showMoveModal=!1},onOpenTagModal:function(){this.showTagModal=!0},onCloseTagModal:function(){this.showTagModal=!1}}},Vn=r(1335),Hn={insert:"head",singleton:!1},Qn=(g()(Vn.a,Hn),Vn.a.locals,Object(b.a)(Wn,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ListItem",{directives:[{name:"draggable-envelope",rawName:"v-draggable-envelope",value:{accountId:t.data.accountId?t.data.accountId:t.mailbox.accountId,mailboxId:t.data.mailboxId,envelopeId:t.data.databaseId,draggableLabel:t.draggableLabel,selectedEnvelopes:t.selectedEnvelopes},expression:"{\n\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\tmailboxId: data.mailboxId,\n\t\tenvelopeId: data.databaseId,\n\t\tdraggableLabel,\n\t\tselectedEnvelopes,\n\t}"}],staticClass:"list-item-style",class:{seen:t.data.flags.seen,draft:t.draft,selected:t.selected},attrs:{to:t.link,"data-envelope-id":t.data.databaseId,title:t.addresses,details:t.formatted()},on:{click:t.onClick},scopedSlots:t._u([{key:"icon",fn:function(){return[t.mailbox.isUnified&&t.hasMultipleAccounts?e("div",{staticClass:"mail-message-account-color",style:{"background-color":t.accountColor}}):t._e(),t._v(" "),t.data.flags.flagged?e("div",{staticClass:"app-content-list-item-star icon-starred",attrs:{"data-starred":t.data.flags.flagged?"true":"false"},on:{click:function(n){return n.preventDefault(),t.onToggleFlagged.apply(null,arguments)}}}):t._e(),t._v(" "),t.isImportant?e("div",{staticClass:"app-content-list-item-star svg icon-important",attrs:{"data-starred":t.isImportant?"true":"false"},domProps:{innerHTML:t._s(t.importantSvg)},on:{click:function(n){return n.preventDefault(),t.onToggleImportant.apply(null,arguments)}}}):t._e(),t._v(" "),t.data.flags.$junk?e("div",{staticClass:"app-content-list-item-star icon-junk",attrs:{"data-starred":t.data.flags.$junk?"true":"false"},on:{click:function(n){return n.preventDefault(),t.onToggleJunk.apply(null,arguments)}}}):t._e(),t._v(" "),e("div",{staticClass:"app-content-list-item-icon"},[e("Avatar",{attrs:{"display-name":t.addresses,email:t.avatarEmail}}),t._v(" "),t.selectMode?e("p",{staticClass:"app-content-list-item-select-checkbox"},[e("input",{staticClass:"checkbox",attrs:{id:"select-checkbox-"+t.data.uid,type:"checkbox"},domProps:{checked:t.selected}}),t._v(" "),e("label",{attrs:{for:"select-checkbox-"+t.data.uid},on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:(n.preventDefault(),t.toggleSelected.apply(null,arguments))},function(n){return n.shiftKey?(n.preventDefault(),t.onSelectMultiple.apply(null,arguments)):null}]}})]):t._e()],1)]},proxy:!0},{key:"subtitle",fn:function(){return[t.data.flags.answered?e("span",{staticClass:"icon-reply"}):t._e(),t._v(" "),!0===t.data.flags.hasAttachments?e("span",{staticClass:"icon-public icon-attachment"}):t._e(),t._v(" "),t.draft?e("span",{staticClass:"draft"},[e("em",[t._v(t._s(t.t("mail","Draft: ")))])]):t._e(),t._v("\n\t\t"+t._s(t.subjectForSubtitle)+"\n\t")]},proxy:!0},{key:"actions",fn:function(){return[t.moreActionsOpen?t._e():e("EnvelopePrimaryActions",[e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("StarOutline",{attrs:{size:20}}):e("Star",{attrs:{size:20,"fill-color":"#f9cf3d"}})]},proxy:!0}],null,!1,2819323606)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.flagged?t.t("mail","Unfavorite"):t.t("mail","Favorite"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("Email",{attrs:{size:20}}):e("EmailOutline",{attrs:{size:20}})]},proxy:!0}],null,!1,251490435)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.seen?t.t("mail","Unread"):t.t("mail","Read"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4006335173)},[t._v("\n\t\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t\t")])],1),t._v(" "),t.moreActionsOpen?t._e():[e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{title:t.data.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"),size:20}})]},proxy:!0}],null,!1,922843479)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.toggleSelected.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{title:t.selected?t.t("mail","Unselect"):t.t("mail","Select"),size:20}})]},proxy:!0}],null,!1,805099236)},[t._v("\n\t\t\t\t"+t._s(t.selected?t.t("mail","Unselect"):t.t("mail","Select"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{title:t.t("mail","Edit tags"),size:20}})]},proxy:!0}],null,!1,1760434282)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{title:t.t("mail","Move"),size:20}})]},proxy:!0}],null,!1,1852981371)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move thread"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.moreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,2458825807)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete thread"),size:20}})]},proxy:!0}],null,!1,2482086091)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Delete thread"))+"\n\t\t\t")])],t._v(" "),t.moreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.moreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,194182918)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenEditAsNew.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{title:t.t("mail","Edit as new message"),size:20}})]},proxy:!0}],null,!1,2673016614)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){n.preventDefault(),t.showEventModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarBlankIcon",{attrs:{title:t.t("mail","Create event"),size:20}})]},proxy:!0}],null,!1,3283461621)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t\t")])]:t._e()]},proxy:!0},{key:"extra",fn:function(){return[t.mailbox.isUnified&&t.hasMultipleAccounts?e("div",{staticClass:"mail-message-account-color",style:{"background-color":t.accountColor}}):t._e(),t._v(" "),t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v(t._s(n.displayName)+" ")])])})),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.data],"move-thread":!0},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.data},on:{close:function(n){t.showEventModal=!1}}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelope:t.data},on:{close:t.onCloseTagModal}}):t._e()]},proxy:!0}])})}),[],!1,null,"17434778",null).exports),Kn=r(8);function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Zn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zn=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Jn(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function te(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ne(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){te(a,r,o,i,s,"next",t)}function s(t){te(a,r,o,i,s,"throw",t)}i(void 0)}))}}var ee={name:"EnvelopeList",components:{Actions:M.a,ActionButton:P.a,Envelope:Qn,MoveModal:ft},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},envelopes:{type:Array,required:!0},searchQuery:{type:String,required:!1,default:void 0},refreshing:{type:Boolean,required:!0,default:!0},loadingMore:{type:Boolean,required:!0},loadMoreButton:{type:Boolean,required:!1,default:!1}},data:function(){return{selection:[],showMoveModal:!1,lastToggledIndex:void 0}},computed:{selectMode:function(){return this.selection.length>0},areAllSelectedRead:function(){return this.selectedEnvelopes.every((function(t){return!0===t.flags.seen}))},isAtLeastOneSelectedImportant:function(){var t=this;return this.selectedEnvelopes.some((function(n){return t.$store.getters.getEnvelopeTags(n.databaseId).some((function(t){return"$label1"===t.imapLabel}))}))},isAtLeastOneSelectedUnimportant:function(){var t=this;return this.selectedEnvelopes.some((function(n){return!t.$store.getters.getEnvelopeTags(n.databaseId).some((function(t){return"$label1"===t.imapLabel}))}))},areAllSelectedFavorite:function(){return this.selectedEnvelopes.every((function(t){return!0===t.flags.flagged}))},selectedEnvelopes:function(){var t=this;return this.envelopes.filter((function(n){return t.selection.includes(n.databaseId)}))},hasMultipleAccounts:function(){var t=this.envelopes.map((function(t){return t.mailboxId}));return Array.from(new Set(t)).length>1}},watch:{envelopes:function(t,n){var e=t.map((function(t){return t.databaseId}));this.selection=this.selection.filter((function(t){return e.includes(t)})),Object(Kn.e)((function(t,n){return t.databaseId===n.databaseId}),n,t).forEach((function(t){t.flags.selected=!1}))}},mounted:function(){X.a.$on("envelopesDropped",this.unselectAll)},beforeDestroy:function(){X.a.$off("envelopesDropped",this.unselectAll)},methods:{isEnvelopeSelected:function(t){return 0!==this.selection.length&&this.selection.includes(t)},markSelectedSeenOrUnseen:function(){var t=this,n=!this.areAllSelectedRead;this.selectedEnvelopes.forEach((function(e){t.$store.dispatch("toggleEnvelopeSeen",{envelope:e,seen:n})})),this.unselectAll()},markSelectionImportant:function(){var t=this;this.selectedEnvelopes.forEach((function(n){t.$store.dispatch("markEnvelopeImportantOrUnimportant",{envelope:n,addTag:!0})})),this.unselectAll()},markSelectionUnimportant:function(){var t=this;this.selectedEnvelopes.forEach((function(n){t.$store.dispatch("markEnvelopeImportantOrUnimportant",{envelope:n,addTag:!1})})),this.unselectAll()},favoriteOrUnfavoriteAll:function(){var t=this,n=!this.areAllSelectedFavorite;this.selectedEnvelopes.forEach((function(e){t.$store.dispatch("markEnvelopeFavoriteOrUnfavorite",{envelope:e,favFlag:n})})),this.unselectAll()},deleteAllSelected:function(){var n=this;return ne(Zn().mark((function e(){var r,o,a,i,s;return Zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.selectedEnvelopes.length===n.envelopes.length?o=!0:-1!==n.selectedEnvelopes.findIndex((function(t){return t.databaseId===n.$route.params.threadId}))&&(a=n.selectedEnvelopes[n.selectedEnvelopes.length-1],i=n.envelopes.filter((function(t){return t===a||!n.selectedEnvelopes.includes(t)})),s=i.indexOf(a),r=i[0===s?1:s-1]),e.next=3,Promise.all(n.selectedEnvelopes.map(function(){var t=ne(Zn().mark((function t(e){return Zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.a.info("deleting thread ".concat(e.threadRootId)),t.next=3,n.$store.dispatch("deleteThread",{envelope:e});case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())).catch(function(){var n=ne(Zn().mark((function n(e){var r;return Zn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=N.c,n.next=3,Object(st.a)(e,(Xn(r={},it.a.getName(),(function(){return t("mail","No trash mailbox configured")})),Xn(r,"default",(function(n){return c.a.error("could not delete message",n),t("mail","Could not delete message")})),r));case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 3:if(!r){e.next=10;break}return e.next=6,n.$router.push({name:"message",params:{mailboxId:n.$route.params.mailboxId,threadId:r.databaseId}});case 6:return e.next=8,n.$store.dispatch("fetchNextEnvelopes",{mailboxId:n.mailbox.databaseId,query:n.searchQuery,quantity:n.selectedEnvelopes.length});case 8:e.next=13;break;case 10:if(!o){e.next=13;break}return e.next=13,n.$router.push({name:"mailbox",params:{mailboxId:n.$route.params.mailboxId}});case 13:n.unselectAll();case 14:case"end":return e.stop()}}),e)})))()},setEnvelopeSelected:function(t,n){var e=this.selection.includes(t.databaseId);n&&!e?(t.flags.selected=!0,this.selection.push(t.databaseId)):!n&&e&&(t.flags.selected=!1,this.selection.splice(this.selection.indexOf(t.databaseId),1))},onEnvelopeSelectToggle:function(t,n,e){this.lastToggledIndex=n,this.setEnvelopeSelected(t,e)},onEnvelopeSelectMultiple:function(t,n){if(void 0!==this.lastToggledIndex){for(var e=Math.min(this.lastToggledIndex,n),r=Math.max(this.lastToggledIndex,n),o=this.selection.includes(t.databaseId),a=e;a<=r;a++)this.setEnvelopeSelected(this.envelopes[a],!o);this.lastToggledIndex=n}},unselectAll:function(){this.envelopes.forEach((function(t){t.flags.selected=!1})),this.selection=[]},onOpenMoveModal:function(){this.showMoveModal=!0},forwardSelectedAsAttachment:function(){var t=this;return ne(Zn().mark((function n(){return Zn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("showMessageComposer",{forwardedMessages:t.selection});case 2:t.unselectAll();case 3:case"end":return n.stop()}}),n)})))()},onCloseMoveModal:function(){this.showMoveModal=!1,this.unselectAll()}}},re=r(1336),oe={insert:"head",singleton:!1},ae=(g()(re.a,oe),re.a.locals,Object(b.a)(ee,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("transition",{attrs:{name:"multiselect-header"}},[t.selectMode?e("div",{key:"multiselect-header",staticClass:"multiselect-header"},[e("div",{staticClass:"button primary",on:{click:function(n){return n.preventDefault(),t.markSelectedSeenOrUnseen.apply(null,arguments)}}},[e("span",{attrs:{id:"action-label"}},[t._v(t._s(t.areAllSelectedRead?t.n("mail","Mark {number} unread","Mark {number} unread",t.selection.length,{number:t.selection.length}):t.n("mail","Mark {number} read","Mark {number} read",t.selection.length,{number:t.selection.length})))])]),t._v(" "),e("Actions",{staticClass:"app-content-list-item-menu",attrs:{"menu-align":"right"}},[t.isAtLeastOneSelectedUnimportant?e("ActionButton",{attrs:{icon:"icon-important","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.markSelectionImportant.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as important","Mark {number} as important",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isAtLeastOneSelectedImportant?e("ActionButton",{attrs:{icon:"icon-important","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.markSelectionUnimportant.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as unimportant","Mark {number} as unimportant",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{icon:"icon-starred","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.favoriteOrUnfavoriteAll.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.areAllSelectedFavorite?t.n("mail","Unfavorite {number}","Unfavorite {number}",t.selection.length,{number:t.selection.length}):t.n("mail","Favorite {number}","Favorite {number}",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{icon:"icon-close","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.unselectAll.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Unselect {number}","Unselect {number}",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),t.account.isUnified?t._e():e("ActionButton",{attrs:{icon:"icon-external","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Move {number} thread","Move {number} threads",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{icon:"icon-forward","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Forward {number} as attachment","Forward {number} as attachment",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{icon:"icon-delete","close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.deleteAllSelected.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Delete {number} thread","Delete {number} threads",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")])],1),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:t.selectedEnvelopes,"move-thread":!0},on:{close:t.onCloseMoveModal}}):t._e()],1):t._e()]),t._v(" "),e("transition-group",{attrs:{name:"list"}},[e("div",{key:"loading",staticClass:"icon-loading-small",class:{refreshing:t.refreshing},attrs:{id:"list-refreshing"}}),t._v(" "),t._l(t.envelopes,(function(n,r){return e("Envelope",{key:n.databaseId,attrs:{data:n,mailbox:t.mailbox,selected:t.selection.includes(n.databaseId),"select-mode":t.selectMode,"has-multiple-accounts":t.hasMultipleAccounts,"selected-envelopes":t.selectedEnvelopes},on:{delete:function(e){return t.$emit("delete",n.databaseId)},"update:selected":function(e){return t.onEnvelopeSelectToggle.apply(void 0,[n,r].concat(e))},"select-multiple":function(e){return t.onEnvelopeSelectMultiple(n,r)}}})})),t._v(" "),t.loadMoreButton&&!t.loadingMore?e("div",{key:"list-collapse-"+t.searchQuery,staticClass:"load-more",on:{click:function(n){return t.$emit("loadMore")}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Load more"))+"\n\t\t")]):t._e(),t._v(" "),e("div",{key:"loadingMore",class:{"icon-loading-small":t.loadingMore},attrs:{id:"load-more-mail-messages"}})],2)],1)}),[],!1,null,"0c4ad86c",null).exports),ie=r(1337),se=r.n(ie),ce=function(t){return t.reduce((function(t,n){var e="";return n.class?e+="  at "+n.class+"::"+n.function:e+="  at "+n.function,n.file&&(e+="\n     "+n.file+", line "+n.line),t+e+"\n"}),"")},le=function(t){console.error(t);var n=t.message||"An unkown error occurred.";n.endsWith(".")||(n+=".");var e=(new se.a).addEmptyStepsToReproduce().addExpectedActualBehaviour().addLogs("Error",function(t){var n="";return t.type&&(n+=t.type+": "),n+=t.message,n+="\n",t.trace&&(n+=ce(t.trace)),t.stack&&(n+=t.stack),n}(t)).render();return"https://github.com/nextcloud/mail/issues/new?title="+encodeURIComponent(n)+"&body="+encodeURIComponent(e)},ue={name:"Error",props:{error:{type:String,required:!0},message:{type:String,required:!0},data:{type:Object,default:function(){}}},computed:{reportUrl:function(){return le(this.data)}}},de=Object(b.a)(ue,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"emptycontent"},[e("h2",[t._v(t._s(t.error))]),t._v(" "),e("p",[t._v(t._s(t.message))]),t._v(" "),t.data&&t.data.debug?e("p",[e("a",{staticClass:"button",attrs:{href:t.reportUrl,target:"_blank",rel:"noopener"}},[t._v(t._s(t.t("mail","Report this bug")))])]):t._e()])}),[],!1,null,null,null).exports,pe={name:"Loading",props:{hint:{type:String,default:"",required:!1},slowHint:{type:String,default:"",required:!1}},data:function(){return{slow:!1,slowTimer:void 0}},mounted:function(){var t=this;clearTimeout(this.slowTimer),this.slowTimer=setTimeout((function(){t.slow=!0}),3500)},beforeDestroy:function(){clearTimeout(this.slowTimer)}},he=r(1338),fe={insert:"head",singleton:!1},me=(g()(he.a,fe),he.a.locals,Object(b.a)(pe,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wrapper"},[t.hint?e("div",{staticClass:"emptycontent"},[e("a",{staticClass:"icon-loading"}),t._v(" "),e("h2",[t._v(t._s(t.hint))]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.slowHint&&t.slow?e("em",[t._v(t._s(t.slowHint))]):t._e()])],1):e("div",{staticClass:"container icon-loading"})])}),[],!1,null,"d31c7de6",null).exports),ve=r(144),ge=r(344),Ae=r(591),ye={name:"EmptyMailboxSection"},be=r(1339),Ce={insert:"head",singleton:!1};g()(be.a,Ce),be.a.locals;function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function _e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_e=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==we(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function ke(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Ee(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){ke(a,r,o,i,s,"next",t)}function s(t){ke(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Le={name:"Mailbox",components:{EmptyMailboxSection:Object(b.a)(ye,(function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{attrs:{id:"emptycontent"}},[t._t("default",(function(){return[t._v(" "+t._s(t.t("mail","No messages")))]}))],2)}),[],!1,null,"4512145e",null).exports,EmptyMailbox:D,EnvelopeList:ae,Error:de,Loading:me},mixins:[s.a],props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},bus:{type:Object,required:!0},paginate:{type:String,default:"scroll"},initialPageSize:{type:Number,default:20},openFirst:{type:Boolean,default:!0},searchQuery:{type:String,required:!1,default:void 0},isPriorityInbox:{type:Boolean,required:!1,default:!1}},data:function(){return{error:!1,refreshing:!1,loadingMore:!1,loadingEnvelopes:!0,loadingCacheInitialization:!1,loadMailboxInterval:void 0,expanded:!1,endReached:!1}},computed:{envelopes:function(){return this.$store.getters.getEnvelopes(this.mailbox.databaseId,this.searchQuery)},envelopesToShow:function(){return"manual"!==this.paginate||this.expanded?this.envelopes:this.envelopes.slice(0,5)},hasMessages:function(){return this.envelopes.length>0},showLoadMore:function(){return!this.endReached&&"manual"===this.paginate}},watch:{$route:function(t){if(void 0===t.params.threadId&&!this.isMobile){var n=this.envelopes[0];void 0!==n&&(c.a.debug("refreshing mailbox"),this.$route.params.mailboxId===this.account.draftsMailboxId||this.$router.replace({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:n.databaseId}}))}},account:function(){this.loadEnvelopes()},mailbox:function(){var t=this;this.loadEnvelopes().then((function(){c.a.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") after mailbox change")),t.sync(!1)}))},searchQuery:function(){this.loadEnvelopes()}},created:function(){this.bus.$on("loadMore",this.onScroll),this.bus.$on("delete",this.onDelete),this.bus.$on("shortcut",this.handleShortcut),this.loadMailboxInterval=setInterval(this.loadMailbox,6e4)},mounted:function(){var t=this;return Ee(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.loadEnvelopes().then((function(){c.a.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") after mount")),t.sync(!1)}));case 1:case"end":return n.stop()}}),n)})))()},destroyed:function(){this.bus.$off("loadMore",this.onScroll),this.bus.$off("delete",this.onDelete),this.bus.$off("shortcut",this.handleShortcut),this.stopInterval()},methods:{initializeCache:function(){var t=this;this.loadingCacheInitialization=!0,this.error=!1,c.a.debug("syncing mailbox ".concat(this.mailbox.databaseId," (").concat(this.searchQuery,") during cache initalization")),this.sync(!0).then((function(){return t.loadingCacheInitialization=!1,t.loadEnvelopes()}))},loadEnvelopes:function(){var t=this;return Ee(_e().mark((function n(){var e,r,o;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.a.debug("Fetching envelopes for mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),t.mailbox),t.loadingEnvelopes=!0,t.loadingCacheInitialization=!1,t.error=!1,n.prev=4,n.next=7,t.$store.dispatch("fetchEnvelopes",{mailboxId:t.mailbox.databaseId,query:t.searchQuery,limit:t.initialPageSize});case 7:e=n.sent,c.a.debug(e.length+" envelopes fetched",{envelopes:e}),t.loadingEnvelopes=!1,t.openFirst&&!t.isMobile&&"message"!==t.$route.name&&e.length>0&&(r=e[0],c.a.debug("showing the first message of mailbox "+t.$route.params.mailboxId),t.$route.params.mailboxId===t.account.draftsMailboxId?t.$router.replace({name:"message",params:{mailboxId:t.$route.params.mailboxId,filter:t.$route.params.filter?t.$route.params.filter:void 0,threadId:"new",draftId:r.databaseId}}):t.$router.replace({name:"message",params:{mailboxId:t.$route.params.mailboxId,filter:t.$route.params.filter?t.$route.params.filter:void 0,threadId:r.databaseId}})),n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(4),n.next=17,Object(st.a)(n.t0,(xe(o={},ve.a.getName(),function(){var n=Ee(_e().mark((function n(e){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.a.info("Mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") is locked"),{error:e}),n.next=3,Object(Ae.a)(15e3);case 3:return n.next=5,t.loadEnvelopes();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),xe(o,ge.a.getName(),function(){var n=Ee(_e().mark((function n(e){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.a.info("Mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") not cached. Triggering initialization"),{error:e}),t.loadingEnvelopes=!1,n.prev=2,n.next=5,t.initializeCache();case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),c.a.error("Could not initialize cache of mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),{error:n.t0}),t.error=n.t0;case 11:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(t){return n.apply(this,arguments)}}()),xe(o,"default",(function(n){c.a.error("Could not fetch envelopes of mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),{error:n}),t.loadingEnvelopes=!1,t.error=n})),o));case 17:case"end":return n.stop()}}),n,null,[[4,13]])})))()},loadMore:function(){var t=this;return Ee(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.expanded){n.next=4;break}return c.a.debug("expanding envelope list"),t.expanded=!0,n.abrupt("return");case 4:return c.a.debug("fetching next envelope page"),t.loadingMore=!0,n.prev=6,n.next=9,t.$store.dispatch("fetchNextEnvelopePage",{mailboxId:t.mailbox.databaseId,query:t.searchQuery});case 9:0===n.sent.length&&(c.a.info("envelope list end reached"),t.endReached=!0),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(6),c.a.error("could not fetch next envelope page",{error:n.t0});case 16:return n.prev=16,t.loadingMore=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[6,13,16,19]])})))()},handleShortcut:function(n){var e=this;return Ee(_e().mark((function r(){var o,a,i,s,l,u;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=e.envelopes,a=parseInt(e.$route.params.threadId,10),i=o.find((function(t){return t.databaseId===a})),s=o.indexOf(i),"refresh"===n.srcKey||i||c.a.debug("envelope is not in the list, ignoring shortcut",{srcKey:n.srcKey}),r.t0=n.srcKey,r.next="next"===r.t0||"prev"===r.t0?8:"del"===r.t0?14:"flag"===r.t0?30:"refresh"===r.t0?33:"unseen"===r.t0?36:39;break;case 8:if(l="next"===n.srcKey?o[s+1]:o[s-1]){r.next=12;break}return c.a.debug("ignoring shortcut: head or tail of envelope list reached",{envelopes:o,idx:s,srcKey:n.srcKey}),r.abrupt("return");case 12:return e.$router.push({name:"message",params:{mailboxId:e.$route.params.mailboxId,filter:e.$route.params.filter?e.$route.params.filter:void 0,threadId:l.databaseId}}),r.abrupt("break",40);case 14:return c.a.debug("deleting",{env:i}),e.onDelete(i.databaseId),r.prev=16,r.next=19,e.$store.dispatch("deleteThread",{envelope:i});case 19:r.next=29;break;case 21:return r.prev=21,r.t1=r.catch(16),c.a.error("could not delete envelope",{env:i,error:r.t1}),r.t2=N.c,r.next=27,Object(st.a)(r.t1,(xe(u={},it.a.getName(),(function(){return t("mail","No trash mailbox configured")})),xe(u,"default",(function(){return t("mail","Could not delete message")})),u));case 27:r.t3=r.sent,(0,r.t2)(r.t3);case 29:return r.abrupt("break",40);case 30:return c.a.debug("flagging envelope via shortkey",{env:i}),e.$store.dispatch("toggleEnvelopeFlagged",i).catch((function(t){return c.a.error("could not flag envelope via shortkey",{env:i,error:t})})),r.abrupt("break",40);case 33:return c.a.debug("syncing mailbox ".concat(e.mailbox.databaseId," (").concat(e.searchQuery,") per shortcut")),e.sync(!1),r.abrupt("break",40);case 36:return c.a.debug("marking message as seen/unseen via shortkey",{env:i}),e.$store.dispatch("toggleEnvelopeSeen",{envelope:i}).catch((function(t){return c.a.error("could not mark envelope as seen/unseen via shortkey",{env:i,error:t})})),r.abrupt("break",40);case 39:c.a.warn("shortcut "+n.srcKey+" is unknown. ignoring.");case 40:case"end":return r.stop()}}),r,null,[[16,21]])})))()},sync:function(){var t=arguments,n=this;return Ee(_e().mark((function e(){var r,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],!n.refreshing){e.next=4;break}return c.a.debug("already sync'ing mailbox ".concat(n.mailbox.databaseId," (").concat(n.searchQuery,"), aborting"),{init:r}),e.abrupt("return");case 4:return n.refreshing=!0,e.prev=5,e.next=8,n.$store.dispatch("syncEnvelopes",{mailboxId:n.mailbox.databaseId,query:n.searchQuery,init:r});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),Object(st.a)(e.t0,(xe(o={},ve.a.getName(),(function(t){c.a.info("Background sync failed because the mailbox is locked",{error:t,init:r})})),xe(o,"default",(function(t){c.a.error("Could not sync envelopes: "+t.message,{error:t,init:r})})),o));case 13:return e.prev=13,n.refreshing=!1,c.a.debug("finished sync'ing mailbox ".concat(n.mailbox.databaseId," (").concat(n.searchQuery,")"),{init:r}),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[5,10,13,17]])})))()},onDelete:function(t){this.$store.dispatch("fetchNextEnvelopes",{mailboxId:this.mailbox.databaseId,query:this.searchQuery,quantity:1});var n=Object(Kn.g)(Object(Kn.p)("databaseId",t),this.envelopes);if(-1!==n)if(t===this.$route.params.threadId){var e=this.envelopes[0===n?1:n-1];e?this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:e.databaseId}}):c.a.debug("no next/previous envelope, not navigating")}else c.a.debug("other message open, not jumping to the next/previous message");else c.a.debug("envelope to delete does not exist in envelope list")},onScroll:function(){"scroll"===this.paginate?this.loadMore():c.a.debug("ignoring scroll pagination")},loadMailbox:function(){var t=this;return Ee(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.account.isUnified&&"inbox"!==t.mailbox.specialRole){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,c.a.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") in background")),n.next=6,t.sync(!1);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),c.a.error("Background sync failed: "+n.t0.message,{error:n.t0});case 11:case"end":return n.stop()}}),n,null,[[2,8]])})))()},stopInterval:function(){clearInterval(this.loadMailboxInterval),this.loadMailboxInterval=void 0}}},Se=r(1340),Ie={insert:"head",singleton:!1},Te=(g()(Se.a,Ie),Se.a.locals,Object(b.a)(Le,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.error?e("Error",{attrs:{error:t.t("mail","Could not open mailbox"),message:"",role:"alert"}}):t.loadingEnvelopes?e("Loading",{attrs:{hint:t.t("mail","Loading messages …"),role:"alert"}}):t.loadingCacheInitialization?e("Loading",{attrs:{hint:t.t("mail","Loading messages …"),"slow-hint":t.t("mail","Indexing your messages. This can take a bit longer for larger mailboxes.")}}):t.isPriorityInbox&&!t.hasMessages?e("EmptyMailboxSection",{key:"empty"}):t.hasMessages?e("EnvelopeList",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.searchQuery,envelopes:t.envelopesToShow,refreshing:t.refreshing,"loading-more":t.loadingMore,"load-more-button":t.showLoadMore},on:{delete:t.onDelete,loadMore:t.loadMore}}):e("EmptyMailbox",{key:"empty"})}),[],!1,null,"f7652ee8",null).exports),Oe=r(1121),De=r.n(Oe),je={name:"NoMessageSelected",components:{AppContentDetails:De.a}},Me=r(1341),Be={insert:"head",singleton:!1},Pe=(g()(Me.a,Be),Me.a.locals,Object(b.a)(je,(function(){var t=this.$createElement,n=this._self._c||t;return n("AppContentDetails",[n("div",{attrs:{id:"emptycontent"}},[n("div",{staticClass:"icon icon-mail"}),this._v(" "),n("h2",[this._v(this._s(this.t("mail","No message selected")))]),this._v(" "),n("p")])])}),[],!1,null,"3def5510",null).exports),Ne=r(1122),Fe=r.n(Ne),Ge=r(31),$e=[":-(",":-/",":-\\",":-|",":'-(",":'-/",":'-\\",":'-|"],Re=function(){return $e[Math.floor(Math.random()*$e.length)]},ze=r(1343),qe=r.n(ze),Ue=r(570),Ye=r(1124),We=r.n(Ye),Ve=r(1125),He=r.n(Ve);function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ke=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Qe(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Je(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Xe(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Ze(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(e),!0).forEach((function(n){tr(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Xe(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function tr(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var nr=He()((function(t){var n=Object(nn.generateUrl)("/apps/mail/api/contactIntegration/autoComplete/{term}",{term:t});return Xt.a.get(n).then((function(t){return t.data}))}),500),er=Object.freeze({new:1,existing:2,select:3}),rr={name:"RecipientBubble",components:{UserBubble:qe.a,Popover:f.a,Multiselect:Yt.a},props:{email:{type:String,required:!0},label:{type:String,required:!0}},data:function(){return{avatarUrl:void 0,loadingContacts:!1,contactsWithEmail:[],autoCompleteContacts:[],selectedContact:"",newContactName:"",ContactSelectionStateEnum:er,selection:er.select,isContactPopoverOpen:!1}},computed:{avatarUrlAbsolute:function(){if(this.avatarUrl)return this.avatarUrl.startsWith("http")?this.avatarUrl:window.location.protocol+"//"+window.location.host+Object(nn.generateUrl)(this.avatarUrl)},selectableContacts:function(){return this.autoCompleteContacts.map((function(t){return Ze(Ze({},t),{},{label:t.label})}))},contactsWithEmailComputed:function(){var t="";return this.contactsWithEmail&&this.contactsWithEmail.length>3&&(t=" + ".concat(this.contactsWithEmail.length-3)),this.contactsWithEmail.slice(0,3).map((function(t){return t.label})).join(", ").concat(t)},addButtonDisabled:function(){return!(this.selection===er.existing&&this.selectedContact||this.selection===er.new&&""!==this.newContactName.trim())}},mounted:function(){var t,n=this;return(t=Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ue.a)(n.email);case 3:n.avatarUrl=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.debug("no avatar for "+n.email,{error:t.t0});case 9:n.newContactName=n.label;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Je(a,r,o,i,s,"next",t)}function s(t){Je(a,r,o,i,s,"throw",t)}i(void 0)}))})()},methods:{onClickCopyToClipboard:function(){this.$copyText(this.email)},onClickReply:function(){this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,threadId:"mailto"},query:{to:this.email}})},onClickOpenContactDialog:function(){var t,n,e=this;0===this.contactsWithEmail.length&&(t=this.email,n=Object(nn.generateUrl)("/apps/mail/api/contactIntegration/match/{mail}",{mail:t}),Xt.a.get(n).then((function(t){return t.data}))).then((function(t){t&&t.length>0&&(e.contactsWithEmail=t)}))},onClickAddToContact:function(){var t,n,e;this.selection===er.new?""!==this.newContactName&&(t=this.newContactName.trim(),n=this.email,e=Object(nn.generateUrl)("/apps/mail/api/contactIntegration/new"),Xt.a.put(e,{contactName:t,mail:n}).then((function(t){return t.data}))).then((function(t){return console.debug("ContactIntegration",t)})):this.selection===er.existing&&this.selectedContact&&function(t,n){var e=Object(nn.generateUrl)("/apps/mail/api/contactIntegration/add");return Xt.a.put(e,{uid:t,mail:n}).then((function(t){return t.data}))}(this.selectedContact.id,this.email).then((function(t){return console.debug("ContactIntegration",t)}))},onAutocomplete:function(t){var n=this;void 0!==t&&""!==t&&nr(t).then((function(t){n.autoCompleteContacts=We()("id")(n.autoCompleteContacts.concat(t))}))}}},or=r(1345),ar={insert:"head",singleton:!1},ir=(g()(or.a,ar),or.a.locals,Object(b.a)(rr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Popover",{staticClass:"contact-popover",attrs:{trigger:"click"}},[e("UserBubble",{attrs:{slot:"trigger","display-name":t.label,"avatar-image":t.avatarUrlAbsolute},on:{click:t.onClickOpenContactDialog},slot:"trigger"},[e("span",{staticClass:"user-bubble-email"},[t._v(t._s(t.email))])]),t._v(" "),e("div",{staticClass:"contact-wrapper"},[t.contactsWithEmail&&t.contactsWithEmail.length>0?e("div",{staticClass:"contact-existing"},[e("span",{staticClass:"icon-details"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Contacts with this address"))+":\n\t\t\t")]),t._v(" "),e("span",[t._v("\n\t\t\t\t"+t._s(t.contactsWithEmailComputed)+"\n\t\t\t")])]):t._e(),t._v(" "),t.selection===t.ContactSelectionStateEnum.select?e("div",{staticClass:"contact-menu"},[e("a",{staticClass:"icon-reply",on:{click:t.onClickReply}},[e("span",{staticClass:"action-label"},[t._v(t._s(t.t("mail","Reply")))])]),t._v(" "),e("a",{staticClass:"icon-user",on:{click:function(n){t.selection=t.ContactSelectionStateEnum.existing}}},[e("span",{staticClass:"action-label"},[t._v(t._s(t.t("mail","Add to Contact")))])]),t._v(" "),e("a",{staticClass:"icon-add",on:{click:function(n){t.selection=t.ContactSelectionStateEnum.new}}},[e("span",{staticClass:"action-label"},[t._v(t._s(t.t("mail","New Contact")))])]),t._v(" "),e("a",{staticClass:"icon-clippy",on:{click:t.onClickCopyToClipboard}},[e("span",{staticClass:"action-label"},[t._v(t._s(t.t("mail","Copy to clipboard")))])])]):e("div",{staticClass:"contact-input-wrapper"},[t.selection===t.ContactSelectionStateEnum.existing?e("Multiselect",{ref:"contact-selection-label",attrs:{id:"contact-selection",options:t.selectableContacts,taggable:!0,label:"label","track-by":"label",multiple:!1,placeholder:t.t("name","Contact name …"),"clear-on-select":!1,"show-no-options":!1,"preserve-search":!0},on:{"search-change":t.onAutocomplete},model:{value:t.selectedContact,callback:function(n){t.selectedContact=n},expression:"selectedContact"}}):t.selection===t.ContactSelectionStateEnum.new?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newContactName,expression:"newContactName"}],domProps:{value:t.newContactName},on:{input:function(n){n.target.composing||(t.newContactName=n.target.value)}}}):t._e()],1),t._v(" "),t.selection!==t.ContactSelectionStateEnum.select?e("div",[e("a",{staticClass:"icon-close",attrs:{type:"button"},on:{click:function(n){t.selection=t.ContactSelectionStateEnum.select}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go back"))+"\n\t\t\t")]),t._v(" "),e("a",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon-checkmark",attrs:{disabled:t.addButtonDisabled,type:"button"},on:{click:t.onClickAddToContact}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add"))+"\n\t\t\t")])]):t._e()])],1)}),[],!1,null,"09fd225b",null).exports),sr=r(45),cr=function(t){return"plain"===t.format&&t.value.startsWith("-----BEGIN PGP MESSAGE-----")},lr=r(1346),ur=r.n(lr),dr={name:"CalendarImport",components:{Actions:M.a,ActionButton:P.a},props:{calendars:{type:Array,required:!0},handler:{type:Function,required:!0}},computed:{cals:function(){var t=this;return this.calendars.map((function(n){return t.$set(n,"loading",!1),n}))}},methods:{onImport:function(t){t.loading=!0,this.handler(t).catch(console.error.bind(this)).then((function(){t.loading=!1}))}},itineraryDateTime:function(t){return"string"==typeof t?t:t["@value"]},addIcalTimeProperty:function(t,n,e){var r=Q()(this.itineraryDateTime(n)).format(),o=t.updatePropertyWithValue(e,Qt.a.Time.fromDateTimeString(r));"string"!=typeof n&&o.setParameter("TZID",n.timezone)}},pr=Object(b.a)(dr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.calendars.length?e("Actions",{attrs:{"default-icon":"icon-add"}},t._l(t.cals,(function(n,r){return e("ActionButton",{key:r,attrs:{icon:n.loading?"icon-loading-small":"icon-add"},on:{click:function(e){return t.onImport(n)}}},[t._v("\n\t\t"+t._s(t.t("mail","Import into {calendar}",{calendar:n.displayname}))+"\n\t")])})),1):t._e()}),[],!1,null,"c109c658",null).exports,hr={name:"EventReservation",components:{CalendarImport:pr},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{eventName:function(){return this.data.reservationFor.name},time:function(){if("startDate"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.startDate)).format("LT")},date:function(){if("startDate"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.startDate)).format("L")},location:function(){if("location"in this.data.reservationFor&&"name"in this.data.reservationFor.location)return this.data.reservationFor.location.name},canImport:function(){return"startDate"in this.data.reservationFor}},methods:{getEndDateTime:function(t){return"endDate"in this.data.reservationFor?Q()(pr.itineraryDateTime(this.data.reservationFor.endDate)).format():"startDate"in this.data.reservationFor?Q()(pr.itineraryDateTime(this.data.reservationFor.startDate)).add(2,"hours").format():void 0},handleImport:function(n){var e=new Qt.a.Component("VEVENT");e.updatePropertyWithValue("SUMMARY",this.eventName);var r=Q()(pr.itineraryDateTime(this.data.reservationFor.startDate)).format();e.updatePropertyWithValue("DTSTART",Qt.a.Time.fromDateTimeString(r));var o=this.getEndDateTime(this.data.reservationFor);e.updatePropertyWithValue("DTEND",Qt.a.Time.fromDateTimeString(o)),"location"in this.data.reservationFor&&(e.updatePropertyWithValue("LOCATION",this.data.reservationFor.location.name),"geo"in this.data.reservationFor.location&&e.updatePropertyWithValue("GEO","".concat(this.data.reservationFor.location.geo.latitude,";").concat(this.data.reservationFor.location.geo.longitude))),e.updatePropertyWithValue("PRODID","Nextcloud Mail"),e.updatePropertyWithValue("UID",an()(this.messageId+this.eventName));var a=new Qt.a.Component("VCALENDAR");return a.addSubcomponent(e),c.a.debug("generated calendar event from event reservation data",{ical:a.toString()}),Cn(n.url)(a.toString()).then((function(){c.a.debug("event successfully imported"),Object(N.e)(t("mail","Event imported into {calendar}",{calendar:n.displayname}))})).catch((function(n){c.a.error("Could not import event",{error:n}),Object(N.c)(t("mail","Could not create event"))}))}}},fr=r(1348),mr={insert:"head",singleton:!1},vr=(g()(fr.a,mr),fr.a.locals,Object(b.a)(hr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"event"},[e("div",{staticClass:"event-name"},[t._v("\n\t\t\t"+t._s(t.eventName)+"\n\t\t")]),t._v(" "),t.location?e("div",{staticClass:"venue"},[t._v("\n\t\t\t"+t._s(t.location)+"\n\t\t")]):t._e(),t._v(" "),t.date?e("div",[t._v("\n\t\t\t"+t._s(t.date)+"\n\t\t")]):t._e(),t._v(" "),t.time?e("div",[t._v("\n\t\t\t"+t._s(t.time)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"4ec97965",null).exports),gr=r(1517),Ar=r(1023),yr={name:"FlightReservation",components:{AirplaneIcon:gr.a,ArrowIcon:Ar.default,CalendarImport:pr},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate:function(){if("departureTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.departureTime)).format("L")},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},flightNumber:function(){return this.data.reservationFor.airline.iataCode+this.data.reservationFor.flightNumber},reservation:function(){if("reservationNumber"in this.data)return this.data.reservationNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor}},methods:{handleImport:function(n){var e=new Qt.a.Component("VEVENT");e.updatePropertyWithValue("SUMMARY",t("mail","Flight {flightNr} from {depAirport} to {arrAirport}",{flightNr:this.flightNumber,depAirport:this.data.reservationFor.departureAirport.iataCode,arrAirport:this.data.reservationFor.arrivalAirport.iataCode})),pr.addIcalTimeProperty(e,this.data.reservationFor.departureTime,"DTSTART"),pr.addIcalTimeProperty(e,this.data.reservationFor.arrivalTime,"DTEND"),e.updatePropertyWithValue("PRODID","Nextcloud Mail"),e.updatePropertyWithValue("UID",an()(this.messageId+this.flightNumber));var r=new Qt.a.Component("VCALENDAR");return r.addSubcomponent(e),c.a.debug("generated calendar event from flight reservation data",{ical:r.toString()}),Cn(n.url)(r.toString()).then((function(){c.a.debug("event successfully imported"),Object(N.e)(t("mail","Event imported into {calendar}",{calendar:n.displayname}))})).catch((function(n){c.a.error("Could not import event",{error:n}),Object(N.c)(t("mail","Could not create event"))}))}}},br=r(1349),Cr={insert:"head",singleton:!1},wr=(g()(br.a,Cr),br.a.locals,Object(b.a)(yr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("AirplaneIcon",{attrs:{title:t.t("mail","Airplane")}})],1),t._v(" "),e("div",[t._v(t._s(t.flightNumber))]),t._v(" "),t.reservation?e("div",[t._v("\n\t\t\t"+t._s(t.t("mail","Reservation {id}",{id:t.reservation}))+"\n\t\t")]):e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}})],1)}),[],!1,null,"2a317718",null).exports),xr=r(1518),_r={name:"TrainReservation",components:{ArrowIcon:Ar.default,CalendarImport:pr,TrainIcon:xr.a},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate:function(){return"departureTime"in this.data.reservationFor?Q()(pr.itineraryDateTime(this.data.reservationFor.departureTime)).format("L"):"departureDay"in this.data.reservationFor?Q()(this.data.reservationFor.departureDay).format("L"):void 0},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return Q()(pr.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},trainNumber:function(){return this.data.reservationFor.trainNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor||"departureDay"in this.data.reservationFor}},methods:{handleImport:function(n){var e=new Qt.a.Component("VEVENT");if("trainNumber"in this.data.reservationFor?e.updatePropertyWithValue("SUMMARY",t("mail","{trainNr} from {depStation} to {arrStation}",{trainNr:this.data.reservationFor.trainNumber,depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})):e.updatePropertyWithValue("SUMMARY",t("mail","Train from {depStation} to {arrStation}",{depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})),"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor)pr.addIcalTimeProperty(e,this.data.reservationFor.departureTime,"DTSTART"),pr.addIcalTimeProperty(e,this.data.reservationFor.arrivalTime,"DTEND");else if("departureDay"in this.data.reservationFor){var r=Q()(this.data.reservationFor.departureDay).format();e.updatePropertyWithValue("DTSTART",Qt.a.Time.fromDateTimeString(r))}e.updatePropertyWithValue("PRODID","Nextcloud Mail"),e.updatePropertyWithValue("UID",an()(this.messageId+this.departureTime));var o=new Qt.a.Component("VCALENDAR");return o.addSubcomponent(e),c.a.debug("generated calendar event from train reservation data",{ical:o.toString()}),Cn(n.url)(o.toString()).then((function(){c.a.debug("event successfully imported"),Object(N.e)(t("mail","Event imported into {calendar}",{calendar:n.displayname}))})).catch((function(n){c.a.error("Could not import event",{error:n}),Object(N.c)(t("mail","Could not create event"))}))}}},kr=r(1350),Er={insert:"head",singleton:!1},Lr=(g()(kr.a,Er),kr.a.locals,Object(b.a)(_r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureStation.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("TrainIcon",{attrs:{title:t.t("mail","Train")}})],1),t._v(" "),e("div",[t._v(t._s(t.trainNumber))]),t._v(" "),e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalStation.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"08dee74f",null).exports),Sr=ur()(yn),Ir={name:"Itinerary",components:{EventReservation:vr,FlightReservation:wr,TrainReservation:Lr},props:{entries:{type:Array,required:!0},messageId:{type:String,required:!0}},data:function(){return{calendars:[]}},mounted:function(){var t=this;Sr().then((function(n){return t.calendars=n})).catch((function(t){return c.a.error("Could not load calendars",{error:t})}))}},Tr=Object(b.a)(Ir,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._l(t.entries,(function(n,r){return["EventReservation"===n["@type"]?e("EventReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"FlightReservation"===n["@type"]?e("FlightReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"TrainReservation"===n["@type"]?e("TrainReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):e("span",{key:r},[t._v(t._s(t.t("mail","Itinerary for {type} is not supported yet",{type:n["@type"]})))])]}))],2)}),[],!1,null,null,null).exports;
/*
 * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
function Or(t,n,e){var r=Object(nn.generateUrl)("/apps/mail/api/messages/{id}/attachment/{attachmentId}",{id:t,attachmentId:n});return Xt.a.post(r,{targetPath:e})}var Dr,jr=r(1040),Mr=r(1354),Br=r(1355),Pr={name:"MessageAttachment",components:{PopoverMenu:r.n(Br).a,Actions:M.a,ActionButton:P.a},mixins:[Mr.mixin],props:{id:{type:String,required:!0},fileName:{type:String,default:Object(Ge.translate)("mail","Unnamed"),required:!1},url:{type:String,required:!0},size:{type:Number,required:!0},mime:{type:String,required:!0},mimeUrl:{type:String,required:!0},isImage:{type:Boolean,default:!1},isCalendarEvent:{type:Boolean,default:!1}},data:function(){return{savingToCloud:!1,loadingCalendars:!1,calendars:[],showCalendarPopover:!1}},computed:{name:function(){return"message/rfc822"===this.mime?Object(Ge.translate)("mail","Embedded message"):this.fileName},label:function(){return"message/rfc822"===this.mime?Object(Ge.translate)("mail","Embedded message")+" ("+Object(jr.formatFileSize)(this.size)+")":this.fileName+" ("+Object(jr.formatFileSize)(this.size)+")"},calendarMenuEntries:function(){var t=this;return this.calendars.map((function(n){return{icon:"icon-add",text:n.displayname,action:t.importCalendar(n.url)}}))},boundariesElement:function(){return document.querySelector("#content-vue")}},methods:{humanReadable:function(t){return Object(jr.formatFileSize)(t)},saveToCloud:function(){var t=this,n=this.$route.params.threadId;return Object(N.b)(Object(Ge.translate)("mail","Choose a folder to store the attachment in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).allowDirectories(!0).build().pick().then((function(n){return t.savingToCloud=!0,n})).then(function(t,n){return function(e){return Or(t,n,e)}}(n,this.id)).then((function(){return c.a.info("saved")})).catch((function(t){return c.a.error("not saved",{error:t})})).then((function(){return t.savingToCloud=!1}))},download:function(){window.location=this.url},loadCalendars:function(){var t=this;this.loadingCalendars=!0,yn().then((function(n){t.calendars=n,t.showCalendarPopover=!0,t.loadingCalendars=!1}))},closeCalendarPopover:function(){this.showCalendarPopover=!1},importCalendar:function(t){var n=this;return function(){(function(t){return Xt.a.get(t).then((function(t){return t.data}))})(n.url).then(Cn(t)).then((function(){return c.a.info("calendar imported")})).catch((function(t){return c.a.error("import error",{error:t})})).then((function(){return n.showCalendarPopover=!1}))}}}},Nr=r(1356),Fr={insert:"head",singleton:!1},Gr=(g()(Nr.a,Fr),Nr.a.locals,Object(b.a)(Pr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"attachment",on:{click:function(n){return t.$emit("click",n)}}},[t.isImage?e("img",{staticClass:"mail-attached-image",attrs:{src:t.url}}):t._e(),t._v(" "),e("img",{staticClass:"attachment-icon",attrs:{src:t.mimeUrl}}),t._v(" "),e("span",{staticClass:"attachment-name",attrs:{title:t.label}},[t._v(t._s(t.name)+"\n\t\t"),e("span",{staticClass:"attachment-size"},[t._v("("+t._s(t.humanReadable(t.size))+")")])]),t._v(" "),e("Actions",{attrs:{"boundaries-element":t.boundariesElement}},[t.isCalendarEvent?e("ActionButton",{staticClass:"attachment-import calendar",attrs:{icon:{"icon-add":!t.loadingCalendars,"icon-loading-small":t.loadingCalendars},disabled:t.loadingCalendars},on:{click:function(n){return n.stopPropagation(),t.loadCalendars.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Import into calendar"))+"\n\t\t")]):t._e(),t._v(" "),e("ActionButton",{staticClass:"attachment-download",attrs:{icon:"icon-download"},on:{click:t.download}},[t._v("\n\t\t\t"+t._s(t.t("mail","Download attachment"))+"\n\t\t")]),t._v(" "),e("ActionButton",{staticClass:"attachment-save-to-cloud",attrs:{icon:{"icon-folder":!t.savingToCloud,"icon-loading-small":t.savingToCloud},disabled:t.savingToCloud},on:{click:function(n){return n.stopPropagation(),t.saveToCloud.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Save to Files"))+"\n\t\t")]),t._v(" "),e("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:t.closeCalendarPopover,expression:"closeCalendarPopover"}],staticClass:"popovermenu bubble attachment-import-popover hidden",class:{open:t.showCalendarPopover}},[e("PopoverMenu",{attrs:{menu:t.calendarMenuEntries}})],1)],1)],1)}),[],!1,null,"016cf9f4",null).exports),$r={name:"AttachmentImageViewer",components:{Modal:kt.a},props:{url:{type:String,required:!0}}},Rr=r(1357),zr={insert:"head",singleton:!1},qr=(g()(Rr.a,zr),Rr.a.locals,{name:"MessageAttachments",components:{AttachmentImageViewer:Object(b.a)($r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Modal",{attrs:{size:"large"},on:{close:function(n){return t.$emit("close")}}},[e("img",{staticClass:"modal__attachment",attrs:{src:t.url}})])}),[],!1,null,"4507de1c",null).exports,MessageAttachment:Gr},props:{envelope:{required:!0,type:Object},attachments:{type:Array,required:!0}},data:function(){return{savingToCloud:!1,showPreview:!1,attachmentImageURL:""}},computed:{moreThanOne:function(){return this.attachments.length>1},zipUrl:function(){return Object(nn.generateUrl)("/apps/mail/api/messages/{id}/attachments",{id:this.envelope.databaseId})}},methods:{saveAll:function(){var n=this,e=Object(N.b)(t("mail","Choose a folder to store the attachments in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).allowDirectories(!0).build(),r=this.$route.params.threadId;return e.pick().then((function(t){return n.savingToCloud=!0,t})).then(function(t){return function(n){return function(t,n){return Or(t,0,n)}(t,n)}}(r)).then((function(){return c.a.info("saved")})).catch((function(t){return c.a.error("not saved",{error:t})})).then((function(){return n.savingToCloud=!1}))},downloadZip:function(){window.location=this.zipUrl},showViewer:function(t){t.isImage&&(this.showPreview=!0,this.attachmentImageURL=t.downloadUrl)}}}),Ur=r(1358),Yr={insert:"head",singleton:!1},Wr=(g()(Ur.a,Yr),Ur.a.locals,Object(b.a)(qr,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"mail-message-attachments"},[e("div",{staticClass:"attachments"},[t._l(t.attachments,(function(n){return e("MessageAttachment",{key:n.id,attrs:{id:n.id,"file-name":n.fileName,size:n.size,url:n.downloadUrl,"is-image":n.isImage,"is-calendar-event":n.isCalendarEvent,mime:n.mime,"mime-url":n.mimeUrl},on:{click:function(e){return t.showViewer(n)}}})})),t._v(" "),t.attachmentImageURL&&t.showPreview?e("AttachmentImageViewer",{attrs:{url:t.attachmentImageURL},on:{close:function(n){t.showPreview=!1}}}):t._e()],2),t._v(" "),t.moreThanOne?e("p",{staticClass:"attachments-button-wrapper"},[e("button",{staticClass:"attachments-save-to-cloud",class:{"icon-folder":!t.savingToCloud,"icon-loading-small":t.savingToCloud},attrs:{disabled:t.savingToCloud},on:{click:t.saveAll}},[t._v("\n\t\t\t"+t._s(t.t("mail","Save all to Files"))+"\n\t\t")]),t._v(" "),e("button",{staticClass:"attachments-save-to-cloud icon-folder",on:{click:t.downloadZip}},[t._v("\n\t\t\t"+t._s(t.t("mail","Download Zip"))+"\n\t\t")])]):t._e()])}),[],!1,null,null,null).exports);function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Hr=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Vr(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Qr(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var Kr=function(){var t,n=(t=Hr().mark((function t(){return Hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Dr){t.next=2;break}return t.abrupt("return",Dr);case 2:if(!(Dr=window.mailvelope)){t.next=6;break}return c.a.debug("mailvelope found statically"),t.abrupt("return",Dr);case 6:return c.a.debug("loading mailvelope dynamically"),t.next=9,new Promise((function(t){window.addEventListener("mailvelope",(function(){return t(window.mailvelope)}),!1)}));case 9:return Dr=t.sent,c.a.debug("mailvelope found dynamically"),t.abrupt("return",Dr);case 12:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Qr(a,r,o,i,s,"next",t)}function s(t){Qr(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),Jr=r(37);function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zr=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Xr(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function to(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var no={name:"MdnRequest",props:{message:{required:!0,type:Object}},data:function(){return{hasMdnRequest:this.message.dispositionNotificationTo&&this.message.dispositionNotificationTo.length>0,loading:!1}},computed:{mdnSent:function(){return this.message.flags.mdnsent}},methods:{sendMdn:function(){var n,e=this;return(n=Zr().mark((function n(){return Zr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,c.a.debug("send return receipt"),n.prev=2,n.next=5,Object(Jr.l)(e.message.databaseId);case 5:e.$store.commit("flagEnvelope",{envelope:e.message,flag:"mdnsent",value:!0}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(2),c.a.error("could not send mdn",n.t0),Object(N.c)(t("mail","Could not send mdn"));case 12:e.loading=!1;case 13:case"end":return n.stop()}}),n,null,[[2,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(t){to(a,r,o,i,s,"next",t)}function s(t){to(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},eo=r(1359),ro={insert:"head",singleton:!1},oo=(g()(eo.a,ro),eo.a.locals,Object(b.a)(no,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.hasMdnRequest&&!t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","The sender of this message has asked to be notified when you read this message."))+"\n\t"),e("button",{attrs:{disabled:t.loading},on:{click:t.sendMdn}},[t._v("\n\t\t"+t._s(t.t("mail","Notify the sender"))+"\n\t")])]):t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","You sent a read confirmation to the sender of this message."))+"\n")]):t._e()}),[],!1,null,"3bf60f28",null).exports);function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function io(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */io=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ao(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function so(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var co={name:"MessageEncryptedBody",components:{MdnRequest:oo},props:{body:{type:String,required:!0},from:{type:String,required:!1,default:void 0},message:{required:!0,type:Object}},data:function(){return{mailvelope:!1}},mounted:function(){var t,n=this;return(t=io().mark((function t(){return io().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kr();case 2:n.mailvelope=t.sent,n.mailvelope.createDisplayContainer("#mail-content",n.body,void 0,{senderAddress:n.from});case 4:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){so(a,r,o,i,s,"next",t)}function s(t){so(a,r,o,i,s,"throw",t)}i(void 0)}))})()}},lo=r(1360),uo={insert:"head",singleton:!1},po=(g()(lo.a,uo),lo.a.locals,Object(b.a)(co,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",[this.mailvelope?n("div",{attrs:{id:"mail-content"}},[n("MdnRequest",{attrs:{message:this.message}})],1):n("span",[this._v(this._s(this.t("mail","This message is encrypted with PGP. Install Mailvelope to decrypt it.")))])])}),[],!1,null,"812ccd96",null).exports),ho=r(1361),fo=r(1523),mo=r(1127);function vo(t){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */go=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==vo(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Ao(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function yo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Ao(a,r,o,i,s,"next",t)}function s(t){Ao(a,r,o,i,s,"throw",t)}i(void 0)}))}}var bo=new fo.a,Co={name:"MessageHTMLBody",components:{MdnRequest:oo,Actions:M.a,ActionButton:P.a},props:{url:{type:String,required:!0},fullHeight:{type:Boolean,required:!1,default:!1},message:{required:!0,type:Object}},data:function(){return{loading:!0,hasBlockedContent:!1,isSenderTrusted:this.message.isSenderTrusted}},computed:{sender:function(){var t;return null===(t=this.message.from[0])||void 0===t?void 0:t.email},domain:function(){var t;return null===(t=this.sender)||void 0===t?void 0:t.split("@").pop()}},beforeMount:function(){bo.on("beforeprint",this.onBeforePrint)},mounted:function(){Object(ho.iframeResizer)({log:!1,heightCalculationMethod:"taggedElement"},this.$refs.iframe)},beforeDestroy:function(){bo.off("beforeprint",this.onBeforePrint),this.$refs.iframe.iFrameResizer.close()},methods:{getIframeDoc:function(){var t=this.$refs.iframe;return t.contentDocument||t.contentWindow.document},onMessageFrameLoad:function(){var t=this.getIframeDoc();this.hasBlockedContent=t.querySelectorAll("[data-original-src]").length>0||t.querySelectorAll("[data-original-style]").length>0||t.querySelectorAll("style[data-original-content]").length>0,this.loading=!1,this.isSenderTrusted&&this.displayIframe()},onBeforePrint:function(){this.$refs.iframe.style.setProperty("height","".concat(this.getIframeDoc().body.scrollHeight,"px"),"important")},displayIframe:function(){var t=this.getIframeDoc();c.a.debug("showing external images"),t.querySelectorAll("[data-original-src]").forEach((function(t){t.style.display=null,t.setAttribute("src",t.getAttribute("data-original-src"))})),t.querySelectorAll("[data-original-style]").forEach((function(t){return t.setAttribute("style",t.getAttribute("data-original-style"))})),t.querySelectorAll("style[data-original-content]").forEach((function(t){t.innerHTML=t.getAttribute("data-original-content")})),this.hasBlockedContent=!1},onShowBlockedContent:function(){var t=this;return yo(go().mark((function n(){return go().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.displayIframe(),n.next=3,Object(mo.b)(t.message.from[0].email,"individual",!0);case 3:case"end":return n.stop()}}),n)})))()},onShowBlockedContentForDomain:function(){var t=this;return yo(go().mark((function n(){return go().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.displayIframe(),n.next=3,Object(mo.b)(t.domain,"domain",!0);case 3:case"end":return n.stop()}}),n)})))()}}},wo=r(1364),xo={insert:"head",singleton:!1},_o=(g()(wo.a,xo),wo.a.locals,Object(b.a)(Co,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"mail-content"}},[e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),t.hasBlockedContent?e("div",{staticStyle:{color:"#000000"},attrs:{id:"mail-message-has-blocked-content"}},[t._v("\n\t\t"+t._s(t.t("mail","The images have been blocked to protect your privacy."))+"\n\t\t"),e("Actions",{attrs:{"default-icon":"icon-toggle","menu-title":t.t("mail","Show")}},[e("ActionButton",{attrs:{icon:"icon-toggle"},on:{click:t.displayIframe}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show images temporarily"))+"\n\t\t\t")]),t._v(" "),t.sender?e("ActionButton",{attrs:{icon:"icon-toggle"},on:{click:t.onShowBlockedContent}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {sender}",{sender:t.sender}))+"\n\t\t\t")]):t._e(),t._v(" "),t.domain?e("ActionButton",{attrs:{icon:"icon-toggle"},on:{click:t.onShowBlockedContentForDomain}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {domain}",{domain:t.domain}))+"\n\t\t\t")]):t._e()],1)],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"icon-loading"}):t._e(),t._v(" "),e("div",{class:{hidden:t.loading,scroll:!t.fullHeight},attrs:{id:"message-container"}},[e("iframe",{ref:"iframe",staticClass:"message-frame",attrs:{title:t.t("mail","Message frame"),src:t.url,seamless:""},on:{load:t.onMessageFrameLoad}})])],1)}),[],!1,null,"f2e16bd6",null).exports),ko=/(.+\n\r?)+(\n\r?)+/,Eo={name:"MessagePlainTextBody",components:{MdnRequest:oo},props:{body:{type:String,required:!0},signature:{type:String,default:function(){}},message:{required:!0,type:Object}},computed:{enhancedBody:function(){return this.body.replace(/(^&gt;.*\n)+/gm,(function(n){return'<details class="quoted-text"><summary>'.concat(t("mail","Quoted text"),"</summary>").concat(n,"</details>")}))},signatureSummaryAndBody:function(){var t=this.signature.trim().match(ko);if(t&&t[0])return{summary:t[0],body:this.signature.substring(t[0].length)};var n=this.signature.trim().split(/\r?\n/);return{summary:n[0],body:n.slice(1).join("\n")}},signatureSummary:function(){return console.info(this.signature.match(ko)),this.signatureSummaryAndBody.summary}},methods:{nl2br:function(t){return t.replace(/(\r\n|\n\r|\n|\r)/g,"<br />")}}},Lo=r(1365),So={insert:"head",singleton:!1},Io=(g()(Lo.a,So),Lo.a.locals,r(1366)),To={insert:"head",singleton:!1},Oo=(g()(Io.a,To),Io.a.locals,{name:"Message",components:{Itinerary:Tr,MessageAttachments:Wr,MessageEncryptedBody:po,MessageHTMLBody:_o,MessagePlainTextBody:Object(b.a)(Eo,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"mail-content"}},[e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),e("div",{attrs:{id:"message-container"},domProps:{innerHTML:t._s(t.nl2br(t.enhancedBody))}}),t._v(" "),t.signature?e("details",{staticClass:"mail-signature"},[e("summary",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.summary))}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.body))}})]):t._e()],1)}),[],!1,null,"9fd9f8e0",null).exports},props:{envelope:{required:!0,type:Object},message:{required:!0,type:Object},fullHeight:{required:!1,type:Boolean,default:!1}},computed:{from:function(){return 0===this.message.from.length?"?":this.message.from[0].label||this.message.from[0].email},htmlUrl:function(){return Object(nn.generateUrl)("/apps/mail/api/messages/{id}/html",{id:this.envelope.databaseId})},isEncrypted:function(){return cr(this.message.hasHtmlBody?Object(sr.b)(this.message.body):Object(sr.c)(this.message.body))},itineraries:function(){var t;return null!==(t=this.message.itineraries)&&void 0!==t?t:[]}}}),Do=r(1367),jo={insert:"head",singleton:!1},Mo=(g()(Do.a,jo),Do.a.locals,Object(b.a)(Oo,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{class:[t.message.hasHtmlBody?"mail-message-body mail-message-body-html":"mail-message-body"],attrs:{role:"region","aria-label":t.t("mail","Message body")}},[t.itineraries.length>0?e("div",{staticClass:"message-itinerary"},[e("Itinerary",{attrs:{entries:t.itineraries,"message-id":t.message.messageId}})],1):t._e(),t._v(" "),t.message.hasHtmlBody?e("MessageHTMLBody",{attrs:{url:t.htmlUrl,message:t.message,"full-height":t.fullHeight}}):t.isEncrypted?e("MessageEncryptedBody",{attrs:{body:t.message.body,from:t.from,message:t.message}}):e("MessagePlainTextBody",{attrs:{body:t.message.body,signature:t.message.signature,message:t.message}}),t._v(" "),e("MessageAttachments",{attrs:{attachments:t.message.attachments,envelope:t.envelope}}),t._v(" "),e("div",{attrs:{id:"reply-composer"}})],1)}),[],!1,null,"0c1b32ff",null).exports),Bo=r(1368),Po=r.n(Bo),No=r(1369),Fo=r(1243),Go=r(1513),$o=r(1514),Ro=r(1515),zo=r(1516);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Uo=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==qo(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Yo(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Wo(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Vo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Wo(a,r,o,i,s,"next",t)}function s(t){Wo(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Ho={name:"MenuEnvelope",components:{Actions:M.a,ActionButton:P.a,ActionLink:Po.a,AlertOctagonIcon:$.a,CalendarBlankIcon:q.a,ChevronLeft:Y.default,CheckIcon:U.a,DeleteIcon:W.a,DotsHorizontalIcon:V.default,DownloadIcon:Fo.a,EnvelopePrimaryActions:Fn,EventModal:Mn,InformationIcon:Go.a,Modal:kt.a,MoveModal:ft,OpenInNewIcon:mt.a,PlusIcon:wt.a,ReplyIcon:$o.a,ReplyAllIcon:Ro.a,ShareIcon:zo.a,TagIcon:xt.a,TagModal:Ft,Star:gt.a,StarOutline:vt.a,Email:yt.a,EmailOutline:At.a,ImportantIcon:Ct},props:{envelope:{type:Object,required:!0},mailbox:{type:Object,required:!1,default:void 0},isSelected:{type:Boolean,default:!1},withReply:{type:Boolean,default:!0},withSelect:{type:Boolean,default:!0},withShowSource:{type:Boolean,default:!0}},data:function(){var t,n;return{debug:(null===(t=window)||void 0===t||null===(n=t.OC)||void 0===n?void 0:n.debug)||!1,rawMessage:"",showSourceModal:!1,showMoveModal:!1,showEventModal:!1,showTagModal:!1,moreActionsOpen:!1,forwardMessages:this.envelope.databaseId}},computed:{account:function(){var t,n=null!==(t=this.envelope.accountId)&&void 0!==t?t:this.mailbox.accountId;return this.$store.getters.getAccount(n)},hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});var t=Object(at.b)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},threadingFile:function(){return"data:text/plain;base64,".concat(No.a.encode(JSON.stringify({subject:this.envelope.subject,messageId:this.envelope.messageId,inReplyTo:this.envelope.inReplyTo,references:this.envelope.references,threadRootId:this.envelope.threadRootId},null,2)))},threadingFileName:function(){return"".concat(this.envelope.databaseId,".json")},showFavoriteIconVariant:function(){return this.envelope.flags.flagged},showImportantIconVariant:function(){return this.envelope.flags.seen},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some((function(t){return"$label1"===t.imapLabel}))}},methods:{onForward:function(){this.$store.dispatch("showMessageComposer",{reply:{mode:"forward",data:this.envelope}})},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.envelope)},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.envelope)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",{envelope:this.envelope})},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.envelope)},toggleSelected:function(){this.$emit("update:selected")},onDelete:function(){var n=this;return Vo(Uo().mark((function e(){var r;return Uo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.withSelect&&n.$emit("unselect"),n.$emit("delete",n.envelope.databaseId),c.a.info("deleting message ".concat(n.envelope.databaseId)),e.prev=3,e.next=6,n.$store.dispatch("deleteMessage",{id:n.envelope.databaseId});case 6:e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(3),e.t1=N.c,e.next=13,Object(st.a)(e.t0,(Yo(r={},it.a.getName(),(function(){return t("mail","No trash mailbox configured")})),Yo(r,"default",(function(n){return c.a.error("could not delete message",n),t("mail","Could not delete message")})),r));case 13:e.t2=e.sent,(0,e.t1)(e.t2);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})))()},forwardSelectedAsAttachment:function(){var t=this;return Vo(Uo().mark((function n(){return Uo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.forwardedMessages=[t.envelope.databaseId],n.next=3,t.$store.dispatch("showMessageComposer",{forwardedMessages:t.forwardedMessages});case 3:case"end":return n.stop()}}),n)})))()},onShowSourceModal:function(){var t=this;return Vo(Uo().mark((function n(){var e;return Uo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xt.a.get(Object(nn.generateUrl)("/apps/mail/api/messages/{id}/source",{id:t.envelope.databaseId}));case 2:e=n.sent,t.rawMessage=e.data.source,t.showSourceModal=!0;case 5:case"end":return n.stop()}}),n)})))()},onCloseSourceModal:function(){this.showSourceModal=!1},onMove:function(){this.$emit("move")},onOpenMoveModal:function(){this.showMoveModal=!0},onCloseMoveModal:function(){this.showMoveModal=!1},onOpenEventModal:function(){this.showEventModal=!0},onOpenTagModal:function(){this.showTagModal=!0},onReply:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.dispatch("showMessageComposer",{reply:{mode:t?"reply":"replyAll",data:this.envelope}})},onCloseTagModal:function(){this.showTagModal=!1},onOpenEditAsNew:function(){var t=this;return Vo(Uo().mark((function n(){return Uo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("showMessageComposer",{templateMessageId:t.envelope.databaseId,data:t.envelope});case 2:case"end":return n.stop()}}),n)})))()}}},Qo=r(1370),Ko={insert:"head",singleton:!1},Jo=(g()(Qo.a,Ko),Qo.a.locals,Object(b.a)(Ho,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Actions",{attrs:{"menu-align":"right",event:""},nativeOn:{click:function(t){t.preventDefault()}}},[t.moreActionsOpen?t._e():[e("EnvelopePrimaryActions",[e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("StarOutline",{attrs:{size:20}}):e("Star",{attrs:{size:20,"fill-color":"#f9cf3d"}})]},proxy:!0}],null,!1,2819323606)},[t._v("\n\t\t\t\t\t"+t._s(t.envelope.flags.flagged?t.t("mail","Unfavorite"):t.t("mail","Favorite"))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("Email",{attrs:{size:20}}):e("EmailOutline",{attrs:{size:20}})]},proxy:!0}],null,!1,251490435)},[t._v("\n\t\t\t\t\t"+t._s(t.envelope.flags.seen?t.t("mail","Unread"):t.t("mail","Read"))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4006335173)},[t._v("\n\t\t\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t\t\t")])],1),t._v(" "),t.withReply?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onReply},scopedSlots:t._u([{key:"icon",fn:function(){return[t.hasMultipleRecipients?e("ReplyAllIcon",{attrs:{title:t.t("mail","Reply all"),size:20}}):e("ReplyIcon",{attrs:{title:t.t("mail","Reply"),size:20}})]},proxy:!0}],null,!1,1812719128)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Reply"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasMultipleRecipients?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return t.onReply(!0)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ReplyIcon",{attrs:{title:t.t("mail","Reply to sender only"),size:20}})]},proxy:!0}],null,!1,1847095553)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Reply to sender only"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onForward},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward"),size:20}})]},proxy:!0}],null,!1,3681882419)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Forward"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{title:t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"),size:20}})]},proxy:!0}],null,!1,3018406441)},[t._v("\n\t\t\t\t"+t._s(t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{title:t.t("mail","Edit tags"),size:20}})]},proxy:!0}],null,!1,1760434282)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t\t")]),t._v(" "),t.withSelect?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.toggleSelected.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{title:t.isSelected?t.t("mail","Unselect"):t.t("mail","Select"),size:20}})]},proxy:!0}],null,!1,3004720510)},[t._v("\n\t\t\t\t"+t._s(t.isSelected?t.t("mail","Unselect"):t.t("mail","Select"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{title:t.t("mail","Move message"),size:20}})]},proxy:!0}],null,!1,3082800176)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.moreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,2458825807)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete message"),size:20}})]},proxy:!0}],null,!1,698101614)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Delete message"))+"\n\t\t\t")])],t._v(" "),t.moreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.moreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","More actions"),size:20}}),t._v("\n\t\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t\t")]},proxy:!0}],null,!1,2293545807)}),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward message as attachment"),size:20}})]},proxy:!0}],null,!1,1446130195)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Forward message as attachment"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onOpenEditAsNew},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{title:t.t("mail","Edit as new message"),size:20}})]},proxy:!0}],null,!1,2673016614)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){n.preventDefault(),t.showEventModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarBlankIcon",{attrs:{title:t.t("mail","Create event"),size:20}})]},proxy:!0}],null,!1,3283461621)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t\t")]),t._v(" "),t.withShowSource?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(n){return n.preventDefault(),t.onShowSourceModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("InformationIcon",{attrs:{title:t.t("mail","View source"),size:20}})]},proxy:!0}],null,!1,3604652729)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","View source"))+"\n\t\t\t")]):t._e(),t._v(" "),t.debug?e("ActionLink",{attrs:{download:t.threadingFileName,href:t.threadingFile,"close-after-click":!0},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{title:t.t("mail","Download thread data for debugging"),size:20}})]},proxy:!0}],null,!1,1608243158)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download thread data for debugging"))+"\n\t\t\t")]):t._e()]:t._e()],2),t._v(" "),t.showSourceModal?e("Modal",{staticClass:"source-modal",on:{close:t.onCloseSourceModal}},[e("div",{staticClass:"source-modal-content"},[e("div",{staticClass:"section"},[e("h2",[t._v(t._s(t.t("mail","Message source")))]),t._v(" "),e("pre",{staticClass:"message-source"},[t._v(t._s(t.rawMessage))])])])]):t._e(),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.envelope]},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.envelope},on:{close:function(n){t.showEventModal=!1}}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelope:t.envelope},on:{close:t.onCloseTagModal}}):t._e()],1)}),[],!1,null,"44419322",null).exports),Xo={name:"Moment",props:{timestamp:{type:Number,required:!0},format:{type:String,default:"LLL"}},computed:{title:function(){return Q.a.unix(this.timestamp).format(this.format)},formatted:function(){return Q.a.unix(this.timestamp).fromNow()}}};function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ta(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ta=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Zo(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function na(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ea(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){na(a,r,o,i,s,"next",t)}function s(t){na(a,r,o,i,s,"throw",t)}i(void 0)}))}}var ra={name:"ThreadEnvelope",components:{Error:de,Loading:me,MenuEnvelope:Jo,Moment:Object(b.a)(Xo,(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"live-relative-timestamp",attrs:{"data-timestamp":1e3*this.timestamp,title:this.title}},[this._v(this._s(this.formatted))])}),[],!1,null,null,null).exports,Message:Mo,Avatar:R.a},props:{envelope:{required:!0,type:Object},mailboxId:{required:!1,type:[String,Number],default:void 0},threadSubject:{required:!0,type:String},expanded:{required:!1,type:Boolean,default:!1},fullHeight:{required:!1,type:Boolean,default:!1}},data:function(){return{loading:!1,error:void 0,message:void 0,importantSvg:J.a,seenTimer:void 0}},computed:{account:function(){return this.$store.getters.getAccount(this.envelope.accountId)},hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});var t=Object(at.b)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},route:function(){return{name:"message",params:{mailboxId:this.mailboxId||this.envelope.mailboxId,threadId:this.envelope.databaseId}}},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).find((function(t){return"$label1"===t.imapLabel}))},tags:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).filter((function(t){return"$label1"!==t.imapLabel}))},hasChangedSubject:function(){return this.cleanSubject!==this.threadSubject},cleanSubject:function(){return this.envelope.subject.replace(/((?:[\t ]*(?:R|RE|F|FW|FWD):[\t ]*)*)/i,"")},centeredSender:function(){return(!this.hasChangedSubject||0===this.cleanSubject.length)&&0===this.tags.length}},watch:{expanded:function(t){t?this.fetchMessage():this.message=void 0}},mounted:function(){var t=this;return ea(ta().mark((function n(){return ta().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.expanded){n.next=4;break}return n.next=3,t.fetchMessage();case 3:t.$nextTick((function(){return t.scrollToCurrentEnvelope()}));case 4:case"end":return n.stop()}}),n)})))()},beforeDestroy:function(){void 0!==this.seenTimer&&(c.a.info("Navigating away before seenTimer delay, will not mark message as seen/read"),clearTimeout(this.seenTimer))},methods:{fetchMessage:function(){var t=this;return ea(ta().mark((function n(){return ta().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,c.a.debug("fetching thread message ".concat(t.envelope.databaseId)),n.prev=2,n.next=5,t.$store.dispatch("fetchMessage",t.envelope.databaseId);case 5:t.message=n.sent,c.a.debug("message ".concat(t.envelope.databaseId," fetched"),{message:t.message}),t.envelope.flags.seen||(c.a.info("Starting timer to mark message as seen/read"),t.seenTimer=setTimeout((function(){t.$store.dispatch("toggleEnvelopeSeen",{envelope:t.envelope}),t.seenTimer=void 0}),2e3)),t.loading=!1,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),c.a.error("Could not fetch message",{error:n.t0});case 14:if(!t.message||t.message.itineraries){n.next=17;break}return n.next=17,t.fetchItineraries();case 17:case"end":return n.stop()}}),n,null,[[2,11]])})))()},fetchItineraries:function(){var t=this;return ea(ta().mark((function n(){var e;return ta().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.message.hasHtmlBody||0!==t.message.attachments.length){n.next=2;break}return n.abrupt("return");case 2:return c.a.debug("Fetching itineraries for message ".concat(t.envelope.databaseId)),n.prev=3,n.next=6,t.$store.dispatch("fetchItineraries",t.envelope.databaseId);case 6:e=n.sent,c.a.debug("Itineraries of message ".concat(t.envelope.databaseId," fetched"),{itineraries:e}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),c.a.error("Could not fetch itineraries of message ".concat(t.envelope.databaseId),{error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))()},scrollToCurrentEnvelope:function(){var t=document.querySelector("#header").clientHeight,n=document.querySelector("#mail-thread-header").clientHeight,e=this.$el.getBoundingClientRect().top-t-n;window.scrollTo({top:e})},onReply:function(){this.$store.dispatch("showMessageComposer",{reply:{mode:this.hasMultipleRecipients?"replyAll":"reply",data:this.envelope}})},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.envelope)},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.envelope)},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.envelope)}}},oa=r(1371),aa={insert:"head",singleton:!1},ia=(g()(oa.a,aa),oa.a.locals,Object(b.a)(ra,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"envelope"},[e("div",{staticClass:"envelope--header",class:{"list-item-style":t.expanded}},[t.envelope.from&&t.envelope.from[0]?e("Avatar",{attrs:{email:t.envelope.from[0].email,"display-name":t.envelope.from[0].label,"disable-tooltip":!0,size:40}}):t._e(),t._v(" "),t.isImportant?e("div",{staticClass:"app-content-list-item-star icon-important",attrs:{"data-starred":t.isImportant?"true":"false"},domProps:{innerHTML:t._s(t.importantSvg)},on:{click:function(n){return n.preventDefault(),t.onToggleImportant.apply(null,arguments)}}}):t._e(),t._v(" "),t.envelope.flags.flagged?e("div",{staticClass:"app-content-list-item-star icon-starred",attrs:{"data-starred":t.envelope.flags.flagged?"true":"false"},on:{click:function(n){return n.preventDefault(),t.onToggleFlagged.apply(null,arguments)}}}):t._e(),t._v(" "),t.envelope.flags.$junk?e("div",{staticClass:"app-content-list-item-star icon-junk",attrs:{"data-starred":t.envelope.flags.$junk?"true":"false"},on:{click:function(n){return n.preventDefault(),t.onToggleJunk.apply(null,arguments)}}}):t._e(),t._v(" "),e("router-link",{staticClass:"left",class:{seen:t.envelope.flags.seen},attrs:{to:t.route,event:""},nativeOn:{click:function(n){return n.preventDefault(),t.$emit("toggleExpand",n)}}},[e("div",{staticClass:"sender",class:{"centered-sender":t.centeredSender}},[t._v("\n\t\t\t\t"+t._s(t.envelope.from&&t.envelope.from[0]?t.envelope.from[0].label:"")+"\n\t\t\t")]),t._v(" "),t.hasChangedSubject?e("div",{staticClass:"subject"},[e("span",{staticClass:"preview"},[t._v("\n\t\t\t\t\t"+t._s(t.cleanSubject)+"\n\t\t\t\t")])]):t._e(),t._v(" "),t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v(t._s(n.displayName)+" ")])])}))],2),t._v(" "),e("div",{staticClass:"right"},[e("Moment",{staticClass:"timestamp",attrs:{timestamp:t.envelope.dateInt}}),t._v(" "),e("button",{staticClass:"button",class:{"icon-reply-all-white":t.hasMultipleRecipients,"icon-reply-white":!t.hasMultipleRecipients,primary:t.expanded},on:{click:t.onReply}},[e("span",{staticClass:"action-label"},[t._v(" "+t._s(t.hasMultipleRecipients?t.t("mail","Reply all"):t.t("mail","Reply")))])]),t._v(" "),e("MenuEnvelope",{staticClass:"app-content-list-item-menu",attrs:{envelope:t.envelope,"with-reply":!1,"with-select":!1,"with-show-source":!0},on:{delete:function(n){return t.$emit("delete",t.envelope.databaseId)}}})],1)],1),t._v(" "),t.loading?e("Loading"):t.message?e("Message",{attrs:{envelope:t.envelope,message:t.message,"full-height":t.fullHeight}}):t.error?e("Error",{attrs:{error:t.error&&t.error.message?t.error.message:t.t("mail","Not found"),message:t.errorMessage,data:t.error,role:"alert"}}):t._e()],1)}),[],!1,null,"494361d8",null).exports);function sa(t){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ca(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ca=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==sa(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function la(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ua(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){la(a,r,o,i,s,"next",t)}function s(t){la(a,r,o,i,s,"throw",t)}i(void 0)}))}}var da={name:"Thread",components:{RecipientBubble:ir,AppContentDetails:De.a,Loading:me,ThreadEnvelope:ia,Popover:f.a},data:function(){return{loading:!0,message:void 0,errorMessage:"",error:void 0,expandedThreads:[],participantsToDisplay:999,resizeDebounced:Fe()(500,this.updateParticipantsToDisplay)}},computed:{moreParticipantsString:function(){return"+".concat(this.threadParticipants.length-this.participantsToDisplay)},threadId:function(){return parseInt(this.$route.params.threadId,10)},thread:function(){var t=this,n=this.$store.getters.getEnvelopeThread(this.threadId),e=n.find((function(n){return n.databaseId===t.threadId}));if(void 0===e)return[];var r=this.$store.getters.getMailbox(e.mailboxId),o=this.$store.getters.getMailboxes(r.accountId).find((function(t){return"trash"===t.specialRole}));return void 0===o?n:r.databaseId===o.databaseId?n.filter((function(t){return t.mailboxId===o.databaseId})):n.filter((function(t){return t.mailboxId!==o.databaseId}))},threadParticipants:function(){var t=this.thread.flatMap((function(t){return t.from.concat(t.to).concat(t.cc)}));return Object(Kn.t)(Object(Kn.o)("email"),t)},threadSubject:function(){var t=this.thread;return 0===t.length?(console.warn("thread is empty"),""):t[0].subject}},watch:{$route:function(t,n){n.name!==t.name||n.params.mailboxId!==t.params.mailboxId||n.params.threadId!==t.params.threadId||n.params.filter!==t.params.filter?(c.a.debug("navigated to another thread",{to:t,from:n}),this.resetThread()):c.a.debug("navigated but the thread is still the same")}},created:function(){this.resetThread(),window.addEventListener("resize",this.resizeDebounced)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeDebounced)},methods:{updateParticipantsToDisplay:function(){if(this.$refs.avatarHeader&&this.threadParticipants){for(var t=this.$refs.avatarHeader,n=t.clientWidth-100,e=0,r=0,o=0;e<n&&r<this.threadParticipants.length;)void 0!==t.childNodes[o].clientWidth?(e+=t.childNodes[o].clientWidth,r++,o++):o+=3;this.participantsToDisplay=e>n?r>1?r-1:0===r?1:r:this.threadParticipants.length}},toggleExpand:function(t){this.expandedThreads.includes(t)?(console.debug("collapse thread ".concat(t)),this.expandedThreads=this.expandedThreads.filter((function(n){return n!==t}))):(console.debug("expand thread ".concat(t)),this.expandedThreads.push(t))},onMove:function(t){t===this.threadId?this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}):(this.expandedThreads=this.expandedThreads.filter((function(n){return n!==t})),this.fetchThread())},resetThread:function(){var t=this;return ua(ca().mark((function n(){return ca().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.expandedThreads=[t.threadId],n.next=3,t.fetchThread();case 3:t.updateParticipantsToDisplay();case 4:case"end":return n.stop()}}),n)})))()},fetchThread:function(){var n=this;return ua(ca().mark((function e(){var r,o;return ca().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,n.errorMessage="",n.error=void 0,r=n.threadId,e.prev=4,e.next=7,n.$store.dispatch("fetchThread",r);case 7:if(o=e.sent,c.a.debug("thread for envelope ".concat(r," fetched"),{thread:o}),r===parseInt(n.$route.params.threadId,10)){e.next=12;break}return c.a.debug("User navigated away, loaded envelope won't be shown nor flagged as seen",{oldId:r,newId:n.$route.params.threadId}),e.abrupt("return");case 12:if(0!==o.length){e.next=17;break}return c.a.info("thread could not be found and is empty",{threadId:r}),n.errorMessage=(a=void 0,(a=[Object(Ge.translate)("mail","Could not load your message"),Object(Ge.translate)("mail","Could not load the desired message"),Object(Ge.translate)("mail","Could not load the message")])[Math.floor(Math.random()*a.length)]+" "+Re()),n.loading=!1,e.abrupt("return");case 17:n.loading=!1,e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),c.a.error("could not load envelope thread",{threadId:r,error:e.t0}),e.t0.isError&&(n.errorMessage=t("mail","Could not load your message thread"),n.error=e.t0,n.loading=!1);case 24:case"end":return e.stop()}var a}),e,null,[[4,20]])})))()}}},pa=r(1372),ha={insert:"head",singleton:!1},fa=(g()(pa.a,ha),pa.a.locals,Object(b.a)(da,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("AppContentDetails",{attrs:{id:"mail-message"}},[t.loading?e("Loading"):[e("div",{attrs:{id:"mail-thread-header"}},[e("div",{attrs:{id:"mail-thread-header-fields"}},[e("h2",{attrs:{title:t.threadSubject}},[t._v("\n\t\t\t\t\t"+t._s(t.threadSubject)+"\n\t\t\t\t")]),t._v(" "),e("div",{ref:"avatarHeader",staticClass:"avatar-header"},[t._l(t.threadParticipants.slice(0,t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{email:t.email,label:t.label}})})),t._v(" "),t.threadParticipants.length>t.participantsToDisplay?e("Popover",{staticClass:"avatar-more"},[e("span",{staticClass:"avatar-more",attrs:{slot:"trigger"},slot:"trigger"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.moreParticipantsString)+"\n\t\t\t\t\t\t")]),t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{email:t.email,label:t.label}})}))],2):t._e(),t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,staticClass:"avatar-hidden",attrs:{email:t.email,label:t.label}})}))],2)])]),t._v(" "),t._l(t.thread,(function(n){return e("ThreadEnvelope",{key:n.databaseId,attrs:{envelope:n,"mailbox-id":t.$route.params.mailboxId,"thread-subject":t.threadSubject,expanded:t.expandedThreads.includes(n.databaseId),"full-height":1===t.thread.length},on:{delete:function(e){return t.$emit("delete",n.databaseId)},move:function(e){return t.onMove(n.databaseId)},toggleExpand:function(e){return t.toggleExpand(n.databaseId)}}})}))]],2)}),[],!1,null,null,null).exports),ma=r(23),va=r(355),ga={name:"MailboxThread",directives:{infiniteScroll:T},components:{AppContent:u.a,AppContentList:p.a,Mailbox:Te,NoMessageSelected:Pe,Popover:f.a,SectionTitle:C,Thread:fa},mixins:[s.a],props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:function(){return{importantInfo:t("mail","Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time."),bus:new w.default,searchQuery:void 0,shortkeys:{del:["del"],flag:["s"],next:["arrowright"],prev:["arrowleft"],refresh:["r"],unseen:["u"]},priorityImportantQuery:va.b,priorityStarredQuery:va.d,priorityOtherQuery:va.c}},computed:{unifiedAccount:function(){return this.$store.getters.getAccount(ma.d)},unifiedInbox:function(){return this.$store.getters.getMailbox(ma.e)},hasEnvelopes:function(){return this.$store.getters.getEnvelopes(this.mailbox.databaseId,this.searchQuery).length>0},showThread:function(){return(!0===this.mailbox.isPriorityInbox||this.hasEnvelopes)&&"message"===this.$route.name},query:function(){return"starred"===this.$route.params.filter?this.searchQuery?this.searchQuery+" is:starred":"is:starred":this.searchQuery},isThreadShown:function(){return!!this.$route.params.threadId}},watch:{$route:function(){this.handleMailto()}},created:function(){this.handleMailto()},methods:{deleteMessage:function(t){this.bus.$emit("delete",t)},onScroll:function(t){c.a.debug("scroll",{event:t}),this.bus.$emit("loadMore")},onShortcut:function(t){this.bus.$emit("shortcut",t)},appendToSearch:function(t){return void 0===this.searchQuery?t:this.searchQuery+" "+t},hideMessage:function(){var t;this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(t=this.$route.params)||void 0===t?void 0:t.filter}})},handleMailto:function(){var t;"message"===this.$route.name&&"mailto"===this.$route.params.threadId&&(0!==this.$route.params.accountId&&"0"!==this.$route.params.accountId&&(t=parseInt(this.$route.params.accountId,10)),this.$store.dispatch("showMessageComposer",{data:{accountId:t,to:this.stringToRecipients(this.$route.query.to),cc:this.stringToRecipients(this.$route.query.cc),subject:this.$route.query.subject||"",body:this.$route.query.body?Object(sr.a)(this.$route.query.body):Object(sr.b)("")}}))},stringToRecipients:function(t){return void 0===t?[]:[{label:t,email:t}]}}},Aa=r(1373),ya={insert:"head",singleton:!1},ba=(g()(Aa.a,ya),Aa.a.locals,Object(b.a)(ga,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("AppContent",{attrs:{"pane-config-key":"mail","show-details":t.isThreadShown},on:{"update:showDetails":t.hideMessage}},[e("template",{slot:"list"},[e("AppContentList",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onScroll,expression:"onScroll"},{name:"shortkey",rawName:"v-shortkey.once",value:t.shortkeys,expression:"shortkeys",modifiers:{once:!0}}],staticClass:"envelope-list",attrs:{"infinite-scroll-immediate-check":"false","show-details":t.showThread,"infinite-scroll-disabled":!1,"infinite-scroll-distance":10,role:"heading","aria-level":2},nativeOn:{shortkey:function(n){return t.onShortcut.apply(null,arguments)}}},[t.mailbox.isPriorityInbox?[e("div",{staticClass:"app-content-list-item"},[e("SectionTitle",{staticClass:"important",attrs:{name:t.t("mail","Important and unread")}}),t._v(" "),e("Popover",{attrs:{trigger:"hover focus"}},[e("button",{staticClass:"button icon-info",attrs:{slot:"trigger","aria-label":t.t("mail","Important info")},slot:"trigger"}),t._v(" "),e("p",{staticClass:"important-info"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.importantInfo)+"\n\t\t\t\t\t\t")])])],1),t._v(" "),e("Mailbox",{staticClass:"nameimportant",attrs:{account:t.unifiedAccount,mailbox:t.unifiedInbox,"search-query":t.appendToSearch(t.priorityImportantQuery),paginate:"manual","is-priority-inbox":!0,"initial-page-size":5,collapsible:!0,bus:t.bus}}),t._v(" "),e("SectionTitle",{staticClass:"app-content-list-item starred",attrs:{name:t.t("mail","Favorites")}}),t._v(" "),e("Mailbox",{staticClass:"namestarred",attrs:{account:t.unifiedAccount,mailbox:t.unifiedInbox,"search-query":t.appendToSearch(t.priorityStarredQuery),paginate:"manual","is-priority-inbox":!0,"initial-page-size":5,bus:t.bus}}),t._v(" "),e("SectionTitle",{staticClass:"app-content-list-item other",attrs:{name:t.t("mail","Other")}}),t._v(" "),e("Mailbox",{staticClass:"nameother",attrs:{account:t.unifiedAccount,mailbox:t.unifiedInbox,"open-first":!1,"search-query":t.appendToSearch(t.priorityOtherQuery),"is-priority-inbox":!0,bus:t.bus}})]:e("Mailbox",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.query,bus:t.bus}})],2)],1),t._v(" "),t.showThread?e("Thread",{on:{delete:t.deleteMessage}}):t.hasEnvelopes&&!t.isMobile?e("NoMessageSelected"):t._e()],2)}),[],!1,null,"443131b3",null).exports),Ca=r(1374),wa=r.n(Ca),xa=r(1128),_a=r.n(xa),ka=r(1383),Ea=r.n(ka),La=r(1041),Sa=r.n(La),Ia=r(1386),Ta=r.n(Ia),Oa=r(1387),Da=r.n(Oa),ja=r(1388),Ma=r.n(ja),Ba=r(568),Pa=r.n(Ba),Na=r(1389),Fa=r.n(Na),Ga=r(1391),$a=r.n(Ga);function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */za=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Ra(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function qa(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Ua(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){qa(a,r,o,i,s,"next",t)}function s(t){qa(a,r,o,i,s,"throw",t)}i(void 0)}))}}
/*
 * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */function Ya(t){return Wa.apply(this,arguments)}function Wa(){return(Wa=Ua(za().mark((function t(n){var e,r,o;return za().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rn("files").stat(n,{data:'<?xml version="1.0"?>\n\t\t\t<d:propfind  xmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>',details:!0});case 2:return o=t.sent,t.abrupt("return",null==o||null===(e=o.data)||void 0===e||null===(r=e.props)||void 0===r?void 0:r.size);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ha(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ha=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Va(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Qa(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 * @copyright Copyright (c) 2020 Gary Kim <gary@garykim.dev>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 * @author Gary Kim <gary@garykim.dev>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
var Ka=function(){var n,e=(n=Ha().mark((function n(e,r){var o;return Ha().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Xt.a.post(Object(nn.generateOcsUrl)("apps/files_sharing/api/v1/",2)+"shares",{shareType:3,path:e,shareWith:r});case 3:return o=n.sent,n.abrupt("return",o.data.ocs.data.url);case 7:if(n.prev=7,n.t0=n.catch(0),!(n.t0.response&&n.t0.response.data&&n.t0.response.data.ocs&&n.t0.response.data.ocs.meta&&n.t0.response.data.ocs.meta.message)){n.next=15;break}throw console.error("Error while sharing file: ".concat(n.t0.response.data.ocs.meta.message||"Unknown error")),Object(N.c)(n.t0.response.data.ocs.meta.message),n.t0;case 15:throw console.error("Error while sharing file: Unknown error"),Object(N.c)(t("mail","Error while sharing file")),n.t0;case 18:case"end":return n.stop()}}),n,null,[[0,7]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(t){Qa(a,r,o,i,s,"next",t)}function s(t){Qa(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();function Ja(t){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xa=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Ja(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Za(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ti(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Za(a,r,o,i,s,"next",t)}function s(t){Za(a,r,o,i,s,"throw",t)}i(void 0)}))}}var ni={name:"ComposerAttachments",props:{value:{type:Array,required:!0},bus:{type:Object,required:!0},uploadSizeLimit:{type:Number,default:0}},data:function(){return{uploading:!1,uploads:{}}},computed:{uploadProgress:function(){var t=0,n=0;for(var e in this.uploads)t+=this.uploads[e].uploaded,n+=this.uploads[e].total;return(t/n*100).toFixed(1)}},created:function(){this.bus.$on("onAddLocalAttachment",this.onAddLocalAttachment),this.bus.$on("onAddCloudAttachment",this.onAddCloudAttachment),this.bus.$on("onAddCloudAttachmentLink",this.onAddCloudAttachmentLink)},methods:{onAddLocalAttachment:function(){this.$refs.localAttachments.click()},emitNewAttachments:function(t){this.$emit("input",this.value.concat(t))},totalSizeOfUpload:function(){return Object.values(this.value).reduce((function(t,n){return"local"===!n.type?t:t+n.size}),0)},onLocalAttachmentSelected:function(t){var n=this;this.uploading=!0,w.default.set(this,"uploads",{});var e=$a()(Pa()("size"),Object.values(t.target.files)),r=e+this.totalSizeOfUpload();if(c.a.debug("checking upload size limit",{existingUploads:this.totalSizeOfUpload(),toUpload:e,limit:this.uploadSizeLimit,newTotal:r}),this.uploadSizeLimit&&r>this.uploadSizeLimit)return this.showAttachmentFileSizeWarning(t.target.files.length),void(this.uploading=!1);var o=Ma()((function(t){return w.default.set(n.uploads,t.name,{total:t.size,uploaded:0}),function(t,n){var e=Object(nn.generateUrl)("/apps/mail/api/attachments"),r=new FormData,o={onUploadProgress:function(t){return n(t,t.loaded,t.total)}};return r.append("attachment",t),Xt.a.post(e,r,o).then((function(t){return t.data})).then((function(n){var e=n.id;return{file:t,id:e}}))}(t,(e=t.name,function(t,r){n.uploads[e].uploaded=r})).then((function(t){var e=t.file,r=t.id;c.a.info("uploaded"),n.emitNewAttachments([{fileName:e.name,displayName:_a()("/",e.name),id:r,size:e.size,type:"local"}])}));var e}),t.target.files),a=Promise.all(o).catch((function(t){return c.a.error("could not upload all attachments",{error:t})})).then((function(){return n.uploading=!1}));return this.$emit("upload",a),a},onAddCloudAttachment:function(){var t=this;return ti(Xa().mark((function n(){var e,r,o,a;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Object(N.b)(Object(Ge.translate)("mail","Choose a file to add as attachment")).setMultiSelect(!0).build(),n.prev=1,n.next=4,e.pick(Object(Ge.translate)("mail","Choose a file to add as attachment"));case 4:return r=n.sent,n.next=7,Promise.all(r.map(Ya));case 7:if(o=n.sent,a=Fa()(o)+t.totalSizeOfUpload(),!(t.uploadSizeLimit&&a>t.uploadSizeLimit)){n.next=12;break}return t.showAttachmentFileSizeWarning(r.length),n.abrupt("return");case 12:t.emitNewAttachments(r.map((function(t){return{fileName:t,displayName:_a()("/",t),type:"cloud"}}))),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(1),c.a.error("could not choose a file as attachment",{error:n.t0});case 18:case"end":return n.stop()}}),n,null,[[1,15]])})))()},onAddCloudAttachmentLink:function(){var t=this;return ti(Xa().mark((function n(){var e,r,o;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Object(N.b)(Object(Ge.translate)("mail","Choose a file to share as a link")).build(),n.prev=1,n.next=4,e.pick(Object(Ge.translate)("mail","Choose a file to share as a link"));case 4:return r=n.sent,n.next=7,Ka(r,Object(en.getRequestToken)());case 7:o=n.sent,t.appendToBodyAtCursor('<a href="'.concat(o,'">').concat(o,"</a>")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),c.a.error("could not choose a file as attachment link",{error:n.t0});case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},showAttachmentFileSizeWarning:function(t){Object(N.g)(Object(Ge.translatePlural)("mail","The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.","The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.",t,{size:Object(jr.formatFileSize)(this.uploadSizeLimit)}))},onDelete:function(t){this.$emit("input",this.value.filter((function(n){return n!==t})))},appendToBodyAtCursor:function(t){this.bus.$emit("appendToBodyAtCursor",t)}}},ei=r(1393),ri={insert:"head",singleton:!1},oi=(g()(ei.a,ri),ei.a.locals,Object(b.a)(ni,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"new-message-attachments"},[e("ul",[t._l(t.value,(function(n){return e("li",{key:n.id},[e("div",{staticClass:"new-message-attachment-name"},[t._v("\n\t\t\t\t"+t._s(n.displayName?n.displayName:n.fileName)+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"new-message-attachments-action svg icon-delete",on:{click:function(e){return t.onDelete(n)}}})])})),t._v(" "),t.uploading?e("li",{staticClass:"attachments-upload-progress"},[e("div",{class:{"icon-loading-small":t.uploading}}),t._v(" "),e("div",[t._v(t._s(t.uploading?t.t("mail","Uploading {percent}% …",{percent:t.uploadProgress}):""))])]):t._e()],2),t._v(" "),e("input",{ref:"localAttachments",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.onLocalAttachmentSelected}})])}),[],!1,null,"3f65042e",null).exports),ai=r(569),ii=r.n(ai),si=r(1130),ci=r.n(si),li=r(1021),ui={name:"RecipientListItem",components:{ListItemIcon:ci.a,Actions:M.a,ActionButton:P.a,Close:li.default},props:{option:{type:Object,required:!0}},methods:{removeRecipient:function(t,n){this.$emit("remove-recipient",t,n)}}},di=r(1394),pi={insert:"head",singleton:!1},hi=(g()(di.a,pi),di.a.locals,Object(b.a)(ui,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"multiselect__tag multiselect__tag--recipient"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:t.option.label,"avatar-size":24}}),t._v(" "),e("Actions",[e("ActionButton",{on:{click:function(n){return n.preventDefault(),t.removeRecipient(t.option)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close",{attrs:{size:20}})]},proxy:!0}])})],1)],1)}),[],!1,null,"796d2733",null).exports),fi=r(1498),mi=r(1499),vi=r(1235);function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ai(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ai=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==gi(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function yi(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function bi(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){yi(a,r,o,i,s,"next",t)}function s(t){yi(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Ci={name:"MailvelopeEditor",props:{value:{type:String,required:!0},recipients:{type:Array,required:!0},quotedText:{type:Object,required:!1,default:function(){}},isReplyOrForward:{type:Boolean,default:!1}},data:function(){return{editor:void 0}},mounted:function(){var t=this;return bi(Ai().mark((function n(){var e,r,o;return Ai().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!!t.quotedText&&cr(t.quotedText),o=t.isReplyOrForward?null===(e=t.quotedText)||void 0===e?void 0:e.value:void 0,n.next=4,window.mailvelope.createEditorContainer("#mailvelope-composer",void 0,{quotedMail:r?o:void 0});case 4:t.editor=n.sent;case 5:case"end":return n.stop()}}),n)})))()},methods:{pull:function(){var t=this;return bi(Ai().mark((function n(){var e,r;return Ai().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.recipients.map((function(t){return t.email})),c.a.info("encrypting message",{recipients:e}),n.next=4,t.editor.encrypt(e);case 4:r=n.sent,c.a.info("message encryted",{armored:r}),t.$emit("input",r);case 7:case"end":return n.stop()}}),n)})))()}}},wi=r(1439),xi={insert:"head",singleton:!1},_i=(g()(wi.a,xi),wi.a.locals,Object(b.a)(Ci,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"mailvelope-composer"}})}),[],!1,null,"1320c887",null).exports),ki=r(346),Ei=r(345),Li=r(347),Si=r(1244),Ii=r(1500),Ti=r(521);function Oi(t){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Di(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,o,a=[],i=!0,s=!1;try{for(e=e.call(t);!(i=(r=e.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(s)throw o}}return a}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return ji(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ji(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Mi(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Mi=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Oi(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Bi(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function Pi(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Bi(a,r,o,i,s,"next",t)}function s(t){Bi(a,r,o,i,s,"throw",t)}i(void 0)}))}}function Ni(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Fi(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ni(Object(e),!0).forEach((function(n){Gi(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ni(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Gi(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var $i=He()((function(t){var n=Object(nn.generateUrl)("/apps/mail/api/autoComplete?term={term}",{term:t});return Xt.a.get(n).then((function(t){return t.data}))}),500);w.default.use(Ea.a);var Ri=Object.seal({EDITING:0,UPLOADING:1,SENDING:2,ERROR:3,WARNING:4,FINISHED:5,DISCARDING:6,DISCARDED:7}),zi={name:"Composer",components:{MailvelopeEditor:_i,Actions:M.a,ActionButton:P.a,ActionCheckbox:Sa.a,ActionInput:It.a,ActionRadio:Ta.a,VButton:Da.a,ComposerAttachments:oi,ChevronLeft:Y.default,Delete:W.a,Download:Fo.a,Loading:me,Multiselect:Yt.a,TextEditor:vi.a,EmptyContent:ii.a,ListItemIcon:ci.a,RecipientListItem:hi,Send:Si.a,SendClock:Ii.a,UnfoldMoreHorizontal:fi.a,UnfoldLessHorizontal:mi.a},props:{fromAccount:{type:Number,default:function(){}},to:{type:Array,default:function(){return[]}},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}},subject:{type:String,default:""},body:{type:Object,default:function(){return Object(sr.b)("")}},editorBody:{type:String,default:""},draftId:{type:Number,default:void 0},draft:{type:Function,required:!0},send:{type:Function,required:!0},inReplyToMessageId:{type:String,default:void 0},replyTo:{type:Object,required:!1,default:function(){}},forwardFrom:{type:Object,required:!1,default:function(){}},forwardedMessages:{type:Array,required:!1,default:function(){return[]}},sendAt:{type:Number,default:void 0},attachmentsData:{type:Array,default:function(){return[]}}},data:function(){var t,n,e,r,o=this.editorBody;0===o.length&&(o="<p></p><p></p>");var a=new Date;return a.setHours(a.getHours()+1),{showCC:this.cc.length>0,showBCC:this.bcc.length>0,selectedAlias:-1,autocompleteRecipients:this.to.concat(this.cc).concat(this.bcc),newRecipients:[],subjectVal:this.subject,bodyVal:o,attachments:this.attachmentsData,noReply:this.to.some((function(t){return t.email.startsWith("noreply@")||t.email.startsWith("no-reply@")})),draftsPromise:Promise.resolve(this.draftId),attachmentsPromise:Promise.resolve(),canSaveDraft:!0,savingDraft:void 0,saveDraftDebounced:Fe()(1e4,this.saveDraft),state:Ri.EDITING,errorText:void 0,STATES:Ri,selectTo:this.to,selectCc:this.cc,selectBcc:this.bcc,bus:new w.default,encrypt:!1,mailvelope:{available:!1,keyRing:void 0,keysMissing:[]},editorMode:"html"!==(null===(t=this.body)||void 0===t?void 0:t.format)?"plaintext":"html",addShareLink:Object(Ge.translate)("mail","Add share link from {productName} Files",{productName:null!==(n=null===(e=OC)||void 0===e||null===(r=e.theme)||void 0===r?void 0:r.name)&&void 0!==n?n:"Nextcloud"}),requestMdn:!1,appendSignature:!0,loadingIndicatorTo:!1,loadingIndicatorCc:!1,loadingIndicatorBcc:!1,isMoreActionsOpen:!1,selectedDate:a,sendAtVal:this.sendAt,firstDayDatetimePicker:0===Object(Ge.getFirstDay)()?7:Object(Ge.getFirstDay)(),formatter:{stringify:function(t){return t?Q()(t).format("LLL"):""},parse:function(t){return t?Q()(t,"LLL").toDate():null}},autoLimit:!0,editorInputTextReady:!1}},computed:Fi(Fi({},Object(Ti.b)(["isScheduledSendingDisabled"])),{},{aliases:function(){var t=0,n=this.$store.getters.accounts.filter((function(t){return!t.isUnified})).flatMap((function(n){return[{id:n.id,aliasId:null,selectId:t++,editorMode:n.editorMode,signature:n.signature,name:n.name,emailAddress:n.emailAddress,signatureAboveQuote:n.signatureAboveQuote},n.aliases.map((function(e){return{id:n.id,aliasId:e.id,selectId:t++,editorMode:n.editorMode,signature:e.signature,name:e.name,emailAddress:e.alias,signatureAboveQuote:n.signatureAboveQuote}}))]}));return n.flat()},allRecipients:function(){return this.selectTo.concat(this.selectCc).concat(this.selectBcc)},attachmentSizeLimit:function(){return this.$store.getters.getPreference("attachment-size-limit")},selectableRecipients:function(){return this.newRecipients.concat(this.autocompleteRecipients).map((function(t){return Fi(Fi({},t),{},{label:t.label||t.email})}))},isForward:function(){return void 0!==this.forwardFrom},isReply:function(){return void 0!==this.replyTo},canSend:function(){return(!this.encrypt||!this.mailvelope.keysMissing.length)&&(this.selectTo.length>0||this.selectCc.length>0||this.selectBcc.length>0)},editorPlainText:function(){return"plaintext"===this.editorMode},submitButtonTitle:function(){return this.sendAtVal?Object(Ge.translate)("mail","Send later")+" ".concat(this.convertToLocalDate(this.sendAtVal)):this.mailvelope.available?this.encrypt?Object(Ge.translate)("mail","Encrypt and send"):Object(Ge.translate)("mail","Send unencrypted"):Object(Ge.translate)("mail","Send")},dateTomorrowMorning:function(){var t=new Date;return t.setTime(t.getTime()+864e5),t.setHours(9,0,0,0)},dateTomorrowAfternoon:function(){var t=new Date;return t.setTime(t.getTime()+864e5),t.setHours(14,0,0,0)},dateMondayMorning:function(){var t=new Date;return t.setHours(9,0,0,0),t.setDate(t.getDate()+(7-t.getDay())%7+1)},customSendTime:function(){return new Date(this.selectedDate).getTime()},showAmPm:function(){return-1!==Q()().locale(Object(Ge.getLocale)()).localeData().longDateFormat("LT").toLowerCase().indexOf("a")},isSendAtTomorrowMorning:function(){return!(!this.sendAtVal||Math.floor(this.dateTomorrowMorning/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtTomorrowAfternoon:function(){return!(!this.sendAtVal||Math.floor(this.dateTomorrowAfternoon/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtMondayMorning:function(){return!(!this.sendAtVal||Math.floor(this.dateMondayMorning/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtCustom:function(){return!(!this.sendAtVal||this.isSendAtTomorrowMorning||this.isSendAtTomorrowAfternoon||this.isSendAtMondayMorning)}}),watch:{"$route.params.threadId":function(){this.reset()},allRecipients:function(){this.checkRecipientsKeys()},aliases:function(t){var n=this;if(console.debug("aliases changed"),-1!==this.selectedAlias){var e=t.find((function(t){return t.id===n.selectedAlias.id&&t.aliasId===n.selectedAlias.aliasId}));void 0===e?this.onAliasChange(t[0]):this.onAliasChange(e)}},editorMode:function(){this.appendSignature=!0},bodyVal:function(){""===this.body.value&&(this.appendSignature=!0),this.handleAppendSignature()}},beforeMount:function(){var t=this;return Pi(Mi().mark((function n(){return Mi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setAlias(),t.initBody(),n.t0=t,n.next=5,Kr();case 5:return n.t1=n.sent,n.next=8,n.t0.onMailvelopeLoaded.call(n.t0,n.t1);case 8:case"end":return n.stop()}}),n)})))()},mounted:function(){var t,n=this;this.isReply||this.$refs.toLabel.$el.focus(),void 0!==(null===(t=this.forwardFrom)||void 0===t?void 0:t.attachments)&&this.forwardFrom.attachments.forEach((function(t){n.attachments.push({fileName:t.fileName,displayName:_a()("/",t.fileName),id:t.id,messageId:n.forwardFrom.databaseId,type:"message-attachment"})}));var e=[];this.forwardedMessages&&!wa()(this.forwardedMessages)?e=[this.forwardedMessages]:this.forwardedMessages&&wa()(this.forwardedMessages)&&(e=this.forwardedMessages),e.forEach((function(t){var e=n.$store.getters.getEnvelope(t);e?n.attachments.push({displayName:e.subject+".eml",id:t,type:"message"}):Object(N.c)(Object(Ge.translate)("mail","Message {id} could not be found",{id:t}))})),this.sendAt&&this.isSendAtCustom&&(this.selectedDate=new Date(this.sendAt))},beforeDestroy:function(){window.removeEventListener("mailvelope",this.onMailvelopeLoaded)},methods:{setAlias:function(){var t=this,n=this.selectedAlias;this.fromAccount?this.selectedAlias=this.aliases.find((function(n){return n.id===t.fromAccount})):this.selectedAlias=this.aliases[0],-1!==n||this.body&&""!==this.body.value||(this.editorMode=this.selectedAlias.editorMode)},checkRecipientsKeys:function(){var t=this;return Pi(Mi().mark((function n(){var e,r;return Mi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.encrypt&&t.mailvelope.available){n.next=2;break}return n.abrupt("return");case 2:return e=t.allRecipients.map((function(t){return t.email})),n.next=5,t.mailvelope.keyRing.validKeyForAddress(e);case 5:r=n.sent,c.a.debug("recipients keys validated",{recipients:e,keysValid:r}),t.mailvelope.keysMissing=e.filter((function(t){return!1===r[t]}));case 8:case"end":return n.stop()}}),n)})))()},initBody:function(){var t;t=this.replyTo?Object(at.c)(this.editorPlainText?Object(sr.e)(this.body):Object(sr.d)(this.body),this.replyTo.from[0],this.replyTo.dateInt,"top"===this.$store.getters.getPreference("reply-mode","top")).value:this.forwardFrom?Object(at.c)(this.editorPlainText?Object(sr.e)(this.body):Object(sr.d)(this.body),this.forwardFrom.from[0],this.forwardFrom.dateInt,"top"===this.$store.getters.getPreference("reply-mode","top")).value:this.bodyVal,this.bodyVal=Object(sr.b)(t).value},getMessageData:function(t){var n;return{account:this.selectedAlias.id,accountId:this.selectedAlias.id,aliasId:this.selectedAlias.aliasId,to:this.selectTo,cc:this.selectCc,bcc:this.selectBcc,draftId:t,subject:this.subjectVal,body:this.encrypt?Object(sr.c)(this.bodyVal):Object(sr.b)(this.bodyVal),attachments:this.attachments,inReplyToMessageId:null!==(n=this.inReplyToMessageId)&&void 0!==n?n:this.replyTo?this.replyTo.messageId:void 0,isHtml:!this.editorPlainText,requestMdn:this.requestMdn,sendAt:this.sendAtVal?Math.floor(this.sendAtVal/1e3):void 0}},saveDraft:function(t){var n=this;return this.savingDraft=!0,this.draftsPromise=this.draftsPromise.then((function(e){var r=t(e);return e||r.subject||r.body||r.cc||r.bcc||r.to||r.sendAt?n.draft(r):(c.a.debug("Nothing substantial to save, ignoring draft save"),n.savingDraft=!1,e)})).then((function(t){return n.canSaveDraft=!0,t})).catch(function(){var t=Pi(Mi().mark((function t(e){var r;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(st.a)(e,(Gi(r={},Ei.a.getName(),(function(){return!1})),Gi(r,"default",(function(){return!0})),r));case 2:n.canSaveDraft=!1;case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).then((function(t){return n.savingDraft=!1,t})),this.draftsPromise},callSaveDraft:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t?this.saveDraftDebounced.apply(this,e):this.saveDraft.apply(this,e)},onSave:function(){this.callSaveDraft(!1,this.getMessageData)},handleAppendSignature:function(){if(this.appendSignature){var t=Object(sr.d)(Object(sr.a)(this.selectedAlias.signature)).value;this.bus.$emit("insertSignature",t,this.selectedAlias.signatureAboveQuote),this.appendSignature=!1}},onEditorInputText:function(){this.editorInputTextReady&&this.callSaveDraft(!0,this.getMessageData),this.editorInputTextReady=!0},onChangeSendLater:function(t){this.sendAtVal=t?Number.parseInt(t,10):void 0},convertToLocalDate:function(t){return new Date(t).toLocaleString(Object(Ge.getCanonicalLocale)(),{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},onAliasChange:function(t){c.a.debug("changed alias",{alias:t}),this.selectedAlias=t,this.appendSignature=!0,this.handleAppendSignature()},onAddLocalAttachment:function(){this.bus.$emit("onAddLocalAttachment"),this.callSaveDraft(!0,this.getMessageData)},onAddCloudAttachment:function(){this.bus.$emit("onAddCloudAttachment"),this.callSaveDraft(!0,this.getMessageData)},onAddCloudAttachmentLink:function(){this.bus.$emit("onAddCloudAttachmentLink")},onAutocomplete:function(t,n){var e=this;void 0!==t&&""!==t&&(this.loadingIndicatorTo="to"===n,this.loadingIndicatorCc="cc"===n,this.loadingIndicatorBcc="bcc"===n,$i(t).then((function(t){"to"===n?e.loadingIndicatorTo=!1:"cc"===n?e.loadingIndicatorCc=!1:"bcc"===n&&(e.loadingIndicatorBcc=!1),e.autocompleteRecipients=We()("email")(e.autocompleteRecipients.concat(t))})))},onAttachmentsUploading:function(t){var n=this;this.attachmentsPromise=this.attachmentsPromise.then((function(){return t})).then((function(){return n.callSaveDraft(!0,n.getMessageData)})).catch((function(t){return c.a.error("could not upload attachments",{error:t})})).then((function(){return c.a.debug("attachments uploaded")}))},onMailvelopeLoaded:function(t){var n=this;return Pi(Mi().mark((function e(){return Mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.encrypt=cr(n.body),n.mailvelope.available=!0,c.a.info("Mailvelope loaded",{encrypt:n.encrypt,isPgpgMessage:cr(n.body),keyRing:n.mailvelope.keyRing}),e.next=5,t.getKeyring();case 5:return n.mailvelope.keyRing=e.sent,e.next=8,n.checkRecipientsKeys();case 8:case"end":return e.stop()}}),e)})))()},onNewToAddr:function(t){this.onNewAddr(t,this.selectTo)},onNewCcAddr:function(t){this.onNewAddr(t,this.selectCc)},onNewBccAddr:function(t){this.onNewAddr(t,this.selectBcc)},onNewAddr:function(t,n){var e={label:t,email:t};this.newRecipients.push(e),n.push(e),this.callSaveDraft(!0,this.getMessageData)},onSend:function(t){var n=arguments,e=this;return Pi(Mi().mark((function t(){var r,o;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],!e.encrypt){t.next=5;break}return c.a.debug("get encrypted message from mailvelope"),t.next=5,e.$refs.mailvelopeEditor.pull();case 5:return e.state=Ri.UPLOADING,t.next=8,e.attachmentsPromise.then((function(){return e.state=Ri.SENDING})).then((function(){return e.draftsPromise})).then(e.getMessageData).then((function(t){return e.send(Fi(Fi({},t),{},{force:r}))})).then((function(){return c.a.info("message sent")})).then((function(){return e.state=Ri.FINISHED})).catch(function(){var t=Pi(Mi().mark((function t(n){var r,o,a;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.a.error("could not send message",{error:n}),t.next=3,Object(st.a)(n,(Gi(r={},ki.a.getName(),(function(){return[Object(Ge.translate)("mail","No sent mailbox configured. Please pick one in the account settings."),Ri.ERROR]})),Gi(r,Li.a.getName(),(function(){return[Object(Ge.translate)("mail","You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses."),Ri.WARNING]})),Gi(r,"default",(function(t){if(t&&t.toString)return[t.toString(),Ri.ERROR]})),r));case 3:o=t.sent,a=Di(o,2),e.errorText=a[0],e.state=a[1];case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());case 8:o=e.$store.getters.getAccount(e.selectedAlias.id),parseInt(e.$route.params.mailboxId,10)===o.sentMailboxId&&setTimeout((function(){e.$store.dispatch("syncEnvelopes",{mailboxId:o.sentMailboxId,query:"",init:!1})}),500);case 10:case"end":return t.stop()}}),t)})))()},onForceSend:function(){var t=this;return Pi(Mi().mark((function n(){return Mi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.onSend(null,!0);case 2:case"end":return n.stop()}}),n)})))()},reset:function(){var t=this;this.draftsPromise=Promise.resolve(),this.selectTo=[],this.selectCc=[],this.selectBcc=[],this.subjectVal="",this.bodyVal="<p></p><p></p>",this.attachments=[],this.errorText=void 0,this.state=Ri.EDITING,this.autocompleteRecipients=[],this.newRecipients=[],this.requestMdn=!1,this.appendSignature=!0,this.savingDraft=void 0,this.sendAtVal=void 0,this.setAlias(),this.initBody(),w.default.nextTick((function(){t.$refs.toLabel.$el.focus()}))},formatAliases:function(t){return t.name?"".concat(t.name," <").concat(t.emailAddress,">"):t.emailAddress},discardDraft:function(){var t=this;return Pi(Mi().mark((function n(){var e;return Mi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.draftsPromise;case 2:e=n.sent,t.$emit("discard-draft",e);case 4:case"end":return n.stop()}}),n)})))()},disabledDatetimepickerDate:function(t){var n=new Date;return n.setHours(0,0,0),n.setSeconds(n.getSeconds()-1),t.getTime()<=n},disabledDatetimepickerTime:function(t){var n=new Date,e=new Date(n.getTime());return t.getTime()<=e},onRemoveRecipient:function(t,n){switch(n){case"to":this.removeRecipientTo(t);break;case"cc":this.removeRecipientCc(t);break;case"bcc":this.removeRecipientBcc(t)}},removeRecipient:function(t,n){return n.filter((function(n){return n.email!==t.email}))},removeRecipientTo:function(t){this.selectTo=this.removeRecipient(t,this.selectTo)},removeRecipientCc:function(t){this.selectCc=this.removeRecipient(t,this.selectCc)},removeRecipientBcc:function(t){this.selectBcc=this.removeRecipient(t,this.selectBcc)},toggleViewMode:function(){this.autoLimit=!this.autoLimit,this.showCC=!(this.showCC&&0===this.selectCc.length&&this.autoLimit),this.showBCC=!(this.showBCC&&0===this.selectBcc.length&&this.autoLimit)}}},qi=r(1440),Ui={insert:"head",singleton:!1},Yi=(g()(qi.a,Ui),qi.a.locals,Object(b.a)(zi,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.state===t.STATES.EDITING?e("div",{staticClass:"message-composer"},[e("div",{staticClass:"composer-fields mail-account"},[e("label",{staticClass:"from-label",attrs:{for:"from"}},[t._v("\n\t\t\t"+t._s(t.t("mail","From"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{attrs:{id:"from",value:t.selectedAlias,options:t.aliases,label:"name","track-by":"selectId",searchable:!1,"custom-label":t.formatAliases,placeholder:t.t("mail","Select account"),"clear-on-select":!1},on:{select:t.onAliasChange}})],1)]),t._v(" "),e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"to-label",attrs:{for:"to"}},[t._v("\n\t\t\t"+t._s(t.t("mail","To"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{ref:"toLabel",class:{opened:!t.autoLimit},attrs:{id:"to",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address …"),"clear-on-select":!0,"close-on-select":!1,"show-no-options":!1,"preserve-search":!0,"hide-selected":!0,loading:t.loadingIndicatorTo,"auto-limit":t.autoLimit},on:{input:function(n){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewToAddr,"search-change":function(n){return t.onAutocomplete(n,"to")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(n){return t.onRemoveRecipient(r,"to")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,2096561271),model:{value:t.selectTo,callback:function(n){t.selectTo=n},expression:"selectTo"}}),t._v(" "),e("button",{class:{active:!t.autoLimit},attrs:{title:t.t("mail","Toggle recipients list mode")},on:{click:function(n){return n.preventDefault(),t.toggleViewMode.apply(null,arguments)}}},[t.autoLimit?e("UnfoldMoreHorizontal",{attrs:{size:24}}):e("UnfoldLessHorizontal",{attrs:{size:24}})],1)],1)]),t._v(" "),t.showCC?e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"cc-label",attrs:{for:"cc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Cc"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{class:{opened:!t.autoLimit},attrs:{id:"cc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address …"),"clear-on-select":!0,"show-no-options":!1,"preserve-search":!0,loading:t.loadingIndicatorCc,"auto-limit":t.autoLimit,"hide-selected":!0},on:{input:function(n){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewCcAddr,"search-change":function(n){return t.onAutocomplete(n,"cc")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(n){return t.onRemoveRecipient(r,"cc")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,4162477772),model:{value:t.selectCc,callback:function(n){t.selectCc=n},expression:"selectCc"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","")))])])],1)]):t._e(),t._v(" "),t.showBCC?e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"bcc-label",attrs:{for:"bcc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Bcc"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{class:{opened:!t.autoLimit},attrs:{id:"bcc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address …"),"show-no-options":!1,"clear-on-select":!0,"preserve-search":!0,loading:t.loadingIndicatorBcc,"hide-selected":!0},on:{input:function(n){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewBccAddr,"search-change":function(n){return t.onAutocomplete(n,"bcc")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(n){return t.onRemoveRecipient(r,"bcc")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,2659337166),model:{value:t.selectBcc,callback:function(n){t.selectBcc=n},expression:"selectBcc"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","No contacts found.")))])])],1)]):t._e(),t._v(" "),e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"subject-label hidden-visually",attrs:{for:"subject"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subject"))+"\n\t\t")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subjectVal,expression:"subjectVal"}],staticClass:"subject",attrs:{id:"subject",type:"text",name:"subject",autocomplete:"off",placeholder:t.t("mail","Subject …")},domProps:{value:t.subjectVal},on:{input:[function(n){n.target.composing||(t.subjectVal=n.target.value)},function(n){return t.callSaveDraft(!0,t.getMessageData)}]}})]),t._v(" "),t.noReply?e("div",{staticClass:"warning noreply-warning"},[t._v("\n\t\t"+t._s(t.t("mail","This message came from a noreply address so your reply will probably not be read."))+"\n\t")]):t._e(),t._v(" "),t.mailvelope.keysMissing.length?e("div",{staticClass:"warning noreply-warning"},[t._v("\n\t\t"+t._s(t.t("mail","The following recipients do not have a PGP key: {recipients}.",{recipients:t.mailvelope.keysMissing.join(", ")}))+"\n\t")]):t._e(),t._v(" "),e("div",{staticClass:"composer-fields message-editor"},[!t.encrypt&&t.editorPlainText?e("TextEditor",{key:"editor-plain",staticClass:"message-body",attrs:{name:"body",placeholder:t.t("mail","Write message …"),focus:t.isReply,bus:t.bus},on:{input:t.onEditorInputText},model:{value:t.bodyVal,callback:function(n){t.bodyVal=n},expression:"bodyVal"}}):t.encrypt||t.editorPlainText?e("MailvelopeEditor",{ref:"mailvelopeEditor",attrs:{recipients:t.allRecipients,"quoted-text":t.body,"is-reply-or-forward":t.isReply||t.isForward},model:{value:t.bodyVal,callback:function(n){t.bodyVal=n},expression:"bodyVal"}}):e("TextEditor",{key:"editor-rich",staticClass:"message-body",attrs:{html:!0,name:"body",placeholder:t.t("mail","Write message …"),focus:t.isReply,bus:t.bus},on:{input:t.onEditorInputText},model:{value:t.bodyVal,callback:function(n){t.bodyVal=n},expression:"bodyVal"}})],1),t._v(" "),e("ComposerAttachments",{attrs:{bus:t.bus,"upload-size-limit":t.attachmentSizeLimit},on:{upload:t.onAttachmentsUploading},model:{value:t.attachments,callback:function(n){t.attachments=n},expression:"attachments"}}),t._v(" "),e("div",{staticClass:"composer-actions-right composer-actions"},[e("div",{staticClass:"composer-actions--primary-actions"},[e("p",{staticClass:"composer-actions-draft-status"},[!0===t.savingDraft?e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Saving draft …")))]):t.canSaveDraft?!1===t.savingDraft?e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Draft saved")))]):t._e():e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Error saving draft")))])]),t._v(" "),t.savingDraft||t.canSaveDraft?t._e():e("VButton",{staticClass:"button",attrs:{type:"tertiary"},on:{click:t.onSave},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Download",{attrs:{size:20,title:t.t("mail","Save draft")}})]},proxy:!0}],null,!1,2227301918)}),t._v(" "),!1===t.savingDraft?e("VButton",{staticClass:"button",attrs:{type:"tertiary"},on:{click:t.discardDraft},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete",{attrs:{size:20,title:t.t("mail","Discard & close draft")}})]},proxy:!0}],null,!1,3896853704)}):t._e()],1),t._v(" "),e("div",{staticClass:"composer-actions--secondary-actions"},[e("Actions",[t.isMoreActionsOpen?t._e():[e("ActionButton",{attrs:{icon:"icon-upload"},on:{click:t.onAddLocalAttachment}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Upload attachment"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{icon:"icon-folder"},on:{click:t.onAddCloudAttachment}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Add attachment from Files"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{disabled:t.encrypt,icon:"icon-public"},on:{click:t.onAddCloudAttachmentLink}},[t._v("\n\t\t\t\t\t\t"+t._s(t.addShareLink)+"\n\t\t\t\t\t")]),t._v(" "),t.isScheduledSendingDisabled?t._e():e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.isMoreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SendClock",{attrs:{size:20,title:t.t("mail","Send later")}})]},proxy:!0}],null,!1,1769650344)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Send later"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:!t.encrypt&&!t.editorPlainText,disabled:t.encrypt},on:{check:function(n){t.editorMode="html"},uncheck:function(n){t.editorMode="plaintext"}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Enable formatting"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.requestMdn},on:{check:function(n){t.requestMdn=!0},uncheck:function(n){t.requestMdn=!1}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Request a read receipt"))+"\n\t\t\t\t\t")]),t._v(" "),t.mailvelope.available?e("ActionCheckbox",{attrs:{checked:t.encrypt},on:{check:function(n){t.encrypt=!0},uncheck:function(n){t.encrypt=!1}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Encrypt message with Mailvelope"))+"\n\t\t\t\t\t")]):t._e()],t._v(" "),t.isMoreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(n){t.isMoreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","Send later"),size:20}}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Send later"))+"\n\t\t\t\t\t\t")]},proxy:!0}],null,!1,2922837455)}),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio",attrs:{value:void 0,name:"sendLater",checked:!t.sendAtVal},on:{change:function(n){return t.onChangeSendLater(void 0)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Send now"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateTomorrowMorning,name:"sendLater",checked:t.isSendAtTomorrowMorning},on:{change:function(n){return t.onChangeSendLater(t.dateTomorrowMorning)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Tomorrow morning"))+" - "+t._s(t.convertToLocalDate(t.dateTomorrowMorning))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateTomorrowAfternoon,name:"sendLater",checked:t.isSendAtTomorrowAfternoon},on:{change:function(n){return t.onChangeSendLater(t.dateTomorrowAfternoon)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Tomorrow afternoon"))+" - "+t._s(t.convertToLocalDate(t.dateTomorrowAfternoon))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateMondayMorning,name:"sendLater",checked:t.isSendAtMondayMorning},on:{change:function(n){return t.onChangeSendLater(t.dateMondayMorning)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Monday morning"))+" - "+t._s(t.convertToLocalDate(t.dateMondayMorning))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio",attrs:{name:"sendLater",checked:t.isSendAtCustom,value:t.customSendTime},on:{change:function(n){return t.onChangeSendLater(t.customSendTime)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Custom date and time"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionInput",{attrs:{type:"datetime-local","first-day-of-week":t.firstDayDatetimePicker,use12h:t.showAmPm,formatter:t.formatter,format:"YYYY-MM-DD HH:mm",icon:"","minute-step":5,"show-second":!1,"disabled-date":t.disabledDatetimepickerDate,"disabled-time":t.disabledDatetimepickerTime},on:{change:function(n){return t.onChangeSendLater(t.customSendTime)}},model:{value:t.selectedDate,callback:function(n){t.selectedDate=n},expression:"selectedDate"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Enter a date"))+"\n\t\t\t\t\t")])]:t._e()],2),t._v(" "),e("button",{staticClass:"button primary send-button",attrs:{disabled:!t.canSend,type:"submit"},on:{click:t.onSend}},[e("Send",{attrs:{title:t.submitButtonTitle,size:20}}),t._v("\n\t\t\t\t"+t._s(t.submitButtonTitle)+"\n\t\t\t")],1)],1)])],1):t.state===t.STATES.UPLOADING?e("Loading",{attrs:{hint:t.t("mail","Uploading attachments …"),role:"alert"}}):t.state===t.STATES.SENDING?e("Loading",{staticClass:"sending-hint",attrs:{hint:t.t("mail","Sending …"),role:"alert"}}):t.state===t.STATES.ERROR?e("EmptyContent",{staticClass:"centered-content",attrs:{role:"alert"}},[e("h2",[t._v(t._s(t.t("mail","Error sending your message")))]),t._v(" "),t.errorText?e("p",[t._v("\n\t\t"+t._s(t.errorText)+"\n\t")]):t._e(),t._v(" "),e("button",{staticClass:"button",on:{click:function(n){t.state=t.STATES.EDITING}}},[t._v("\n\t\t"+t._s(t.t("mail","Go back"))+"\n\t")]),t._v(" "),e("button",{staticClass:"button primary",on:{click:t.onSend}},[t._v("\n\t\t"+t._s(t.t("mail","Retry"))+"\n\t")])]):t.state===t.STATES.WARNING?e("div",{staticClass:"emptycontent",attrs:{role:"alert"}},[e("h2",[t._v(t._s(t.t("mail","Warning sending your message")))]),t._v(" "),t.errorText?e("p",[t._v("\n\t\t"+t._s(t.errorText)+"\n\t")]):t._e(),t._v(" "),e("button",{staticClass:"button primary",on:{click:function(n){t.state=t.STATES.EDITING}}},[t._v("\n\t\t"+t._s(t.t("mail","Go back"))+"\n\t")]),t._v(" "),e("button",{staticClass:"button",on:{click:t.onForceSend}},[t._v("\n\t\t"+t._s(t.t("mail","Send anyway"))+"\n\t")])]):e("EmptyContent",{attrs:{icon:"icon-checkmark"}},[e("h2",[t._v(t._s(t.sendAtVal?t.t("mail","Message will be sent at")+" "+t.convertToLocalDate(t.sendAtVal):t.t("mail","Message sent!")))])])}),[],!1,null,"673cf596",null).exports);function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Hi(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Vi(Object(e),!0).forEach((function(n){Qi(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Vi(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Qi(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Ki(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return Ji(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ji(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(s)throw a}}}}function Ji(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Xi(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xi=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Wi(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Zi(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ts(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){Zi(a,r,o,i,s,"next",t)}function s(t){Zi(a,r,o,i,s,"throw",t)}i(void 0)}))}}var ns={name:"NewMessageModal",components:{Modal:kt.a,Composer:Yi},data:function(){return{original:void 0}},computed:{modalTitle:function(){return"outbox"===this.composerMessage.type?Object(Ge.translate)("mail","Edit message"):void 0!==this.composerData.draftId?Object(Ge.translate)("mail","Draft"):this.composerData.replyTo?Object(Ge.translate)("mail","Reply"):this.composerData.forwardFrom?Object(Ge.translate)("mail","Forward"):Object(Ge.translate)("mail","New message")},composerMessage:function(){return this.$store.getters.composerMessage},composerData:function(){var t;return null===(t=this.$store.getters.composerMessage)||void 0===t?void 0:t.data},forwardedMessages:function(){var t,n,e;return null!==(t=null===(n=this.composerMessage)||void 0===n||null===(e=n.options)||void 0===e?void 0:e.forwardedMessages)&&void 0!==t?t:[]}},methods:{toHtml:sr.d,plain:sr.c,saveDraft:function(t){var n=this;return ts(Xi().mark((function e(){var r,o,a,i;return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.composerMessage){e.next=3;break}return c.a.info("Ignoring draft because there is no message anymore",{data:t}),e.abrupt("return");case 3:if("outbox"!==n.composerMessage.type){e.next=9;break}return r=n.getDataForServer(t),e.next=7,n.$store.dispatch("outbox/updateMessage",{message:r,id:n.composerData.id});case 7:e.next=19;break;case 9:return o=n.getDataForServer(t,!0),e.next=12,Object(Jr.k)(t.account,o);case 12:return a=e.sent,i=a.id,n.$store.commit("removeEnvelope",{id:t.draftId}),n.$store.commit("removeMessage",{id:t.draftId}),e.next=18,n.$store.dispatch("fetchEnvelope",i);case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})))()},getDataForServer:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{accountId:t.account,subject:t.subject,body:t.isHtml?t.body.value:Object(sr.e)(t.body).value,editorBody:t.body.value,isHtml:t.isHtml,to:n?t.to.map(this.recipientToRfc822).join(", "):t.to,cc:n?t.cc.map(this.recipientToRfc822).join(", "):t.cc,bcc:n?t.bcc.map(this.recipientToRfc822).join(", "):t.bcc,attachments:t.attachments,aliasId:t.aliasId,inReplyToMessageId:t.inReplyToMessageId,sendAt:t.sendAt}},sendMessage:function(t){var n=this;return ts(Xi().mark((function e(){var r,o,a,i,s;return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.debug("sending message",{data:t}),r=(new Date).getTime(),o=Ki(t.attachments);try{for(o.s();!(a=o.n()).done;)(i=a.value).type||(i.type="local")}catch(t){o.e(t)}finally{o.f()}if((s=n.getDataForServer(Hi(Hi({},t),{},{sendAt:t.sendAt?t.sendAt:Math.floor((r+ma.c)/1e3)}))).sendAt<Math.floor((r+ma.c)/1e3)&&(s.sendAt=Math.floor((r+ma.c)/1e3)),n.composerData.id){e.next=11;break}return e.next=9,n.$store.dispatch("outbox/enqueueMessage",{message:s});case 9:e.next=13;break;case 11:return e.next=13,n.$store.dispatch("outbox/updateMessage",{message:s,id:n.composerData.id});case 13:(!t.sendAt||t.sendAt<Math.floor((r+ma.c)/1e3))&&n.$store.dispatch("outbox/sendMessageWithUndo",{id:n.composerData.id}),t.draftId&&(n.$store.commit("removeEnvelope",{id:t.draftId}),n.$store.commit("removeMessage",{id:t.draftId})),n.$emit("close");case 16:case"end":return e.stop()}}),e)})))()},recipientToRfc822:function(t){return t.email===t.label||""===t.label||0===t.email.search(/^[a-zA-Z]+:/)?t.email:'"'.concat(t.label,'" <').concat(t.email,">")},discardDraft:function(t){var n=this;return ts(Xi().mark((function e(){var r;return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r="outbox"===n.composerMessage.type)&&(t=n.composerMessage.data.id),n.$emit("close"),e.prev=3,!r){e.next=9;break}return e.next=7,n.$store.dispatch("outbox/deleteMessage",{id:t});case 7:e.next=11;break;case 9:return e.next=11,n.$store.dispatch("deleteMessage",{id:t});case 11:Object(N.e)(Object(Ge.translate)("mail","Message discarded")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0),Object(N.c)(Object(Ge.translate)("mail","Could not discard message"));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()},convertEditorBody:function(t){return t.editorBody?t.editorBody:t.body?Object(sr.d)(t.body).value:""}}},es=r(1441),rs={insert:"head",singleton:!1},os=(g()(es.a,rs),es.a.locals,Object(b.a)(ns,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Modal",{attrs:{size:"normal",title:t.modalTitle},on:{close:function(n){return t.$emit("close",{restoreOriginalSendAt:!0})}}},[e("Composer",{attrs:{"from-account":t.composerData.accountId,to:t.composerData.to,cc:t.composerData.cc,bcc:t.composerData.bcc,subject:t.composerData.subject,"attachments-data":t.composerData.attachments,body:t.composerData.body,"editor-body":t.convertEditorBody(t.composerData),"in-reply-to-message-id":t.composerData.inReplyToMessageId,"reply-to":t.composerData.replyTo,"forward-from":t.composerData.forwardFrom,"draft-id":t.composerData.draftId,"send-at":1e3*t.composerData.sendAt,draft:t.saveDraft,send:t.sendMessage,"forwarded-messages":t.forwardedMessages},on:{"discard-draft":t.discardDraft}})],1)}),[],!1,null,"4ae59572",null).exports),as=r(1232),is={name:"OutboxMessageContent",components:{}},ss=Object(b.a)(is,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"emptycontent"}},[n("div",{staticClass:"icon-mail"}),this._v(" "),n("h2",[this._v(this._s(this.t("mail","Pending or not sent messages will show up here")))]),this._v(" "),n("div")])}),[],!1,null,"de3e1c82",null).exports;function cs(t){return function(t){if(Array.isArray(t))return ls(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return ls(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ls(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ls(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}
/**
 * @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>
 *
 * @author Richard Steinmetz <richard@steinmetz.cloud>
 *
 * @license AGPL-3.0-or-later
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var us={computed:{recipients:function(){var t,n,e=null!==(t=this.message.to)&&void 0!==t?t:[],r=null!==(n=this.message.cc)&&void 0!==n?n:[];return[].concat(cs(e),cs(r))},avatarDisplayName:function(){var t,n,e,r;return null!==(t=null!==(n=null===(e=this.recipients[0])||void 0===e?void 0:e.label)&&void 0!==n?n:null===(r=this.recipients[0])||void 0===r?void 0:r.email)&&void 0!==t?t:"?"},avatarEmail:function(){var t,n;return null!==(t=null===(n=this.recipients[0])||void 0===n?void 0:n.email)&&void 0!==t?t:""}}};function ds(t){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ps(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function hs(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?ps(Object(e),!0).forEach((function(n){fs(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ps(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function fs(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function ms(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ms=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ds(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function vs(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function gs(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){vs(a,r,o,i,s,"next",t)}function s(t){vs(a,r,o,i,s,"throw",t)}i(void 0)}))}}var As={name:"OutboxMessageListItem",components:{ListItem:G.a,Avatar:R.a,ActionButton:P.a,Send:Si.a},mixins:[us],props:{message:{type:Object,required:!0}},computed:{selected:function(){return this.$route.params.messageId===this.message.id},accountColor:function(){var t,n=this.$store.getters.getAccount(this.message.accountId);return Object(z.a)(null!==(t=null==n?void 0:n.emailAddress)&&void 0!==t?t:"")},title:function(){var t=function(t){return t.label},n=this.message.to.map(t).concat(this.message.cc.map(t)).concat(this.message.bcc.map(t));return new Intl.ListFormat(Object(Ge.getLanguage)(),{type:"conjunction"}).format(n)},details:function(){return this.message.failed?this.t("mail","Message could not be sent"):this.message.sendAt?Q.a.unix(this.message.sendAt).fromNow():""},subjectForSubtitle:function(){return this.message.subject||this.t("mail","No subject")}},methods:{deleteMessage:function(){var t=this;return gs(ms().mark((function n(){return ms().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("outbox/deleteMessage",{id:t.message.id});case 3:Object(N.e)(Object(Ge.translate)("mail","Message deleted")),n.next=13;break;case 6:return n.prev=6,n.t0=n.catch(0),n.t1=N.c,n.next=11,Object(st.a)(n.t0,{default:function(t){return c.a.error("could not delete message",t),Object(Ge.translate)("mail","Could not delete message")}});case 11:n.t2=n.sent,(0,n.t1)(n.t2);case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))()},sendMessageNow:function(){var t=this;return gs(ms().mark((function n(){var e;return ms().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=hs(hs({},t.message),{},{failed:!1,sendAt:((new Date).getTime()+ma.c)/1e3}),n.next=3,t.$store.dispatch("outbox/updateMessage",{message:e,id:e.id});case 3:return n.next=5,t.$store.dispatch("outbox/sendMessageWithUndo",{id:e.id});case 5:case"end":return n.stop()}}),n)})))()},openModal:function(){var t=this;return gs(ms().mark((function n(){return ms().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("showMessageComposer",{type:"outbox",data:hs(hs({},t.message),{},{body:t.message.isHtml?Object(sr.b)(t.message.body):Object(sr.c)(t.message.body)})});case 2:case"end":return n.stop()}}),n)})))()}}},ys=r(1488),bs={insert:"head",singleton:!1},Cs=(g()(ys.a,bs),ys.a.locals,Object(b.a)(As,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ListItem",{staticClass:"outbox-message",class:{selected:t.selected},attrs:{title:t.title,details:t.details},on:{click:t.openModal},scopedSlots:t._u([{key:"icon",fn:function(){return[e("div",{staticClass:"account-color",style:{"background-color":t.accountColor}}),t._v(" "),e("Avatar",{attrs:{"display-name":t.avatarDisplayName,email:t.avatarEmail}})]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n\t\t"+t._s(t.subjectForSubtitle)+"\n\t")]},proxy:!0}])},[t._v(" "),t._v(" "),e("template",{slot:"actions"},[e("ActionButton",{attrs:{icon:"icon-checkmark","close-after-click":!0},on:{click:t.sendMessageNow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Send",{attrs:{title:t.t("mail","Send now"),size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Send now"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{icon:"icon-delete","close-after-click":!0},on:{click:t.deleteMessage}},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete"))+"\n\t\t")])],1)],2)}),[],!1,null,"e4a083f2",null).exports);function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xs(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */xs=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ws(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function _s(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}function ks(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){_s(a,r,o,i,s,"next",t)}function s(t){_s(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Es={name:"Outbox",components:{AppContent:u.a,AppContentList:p.a,Error:de,Loading:me,EmptyMailbox:D,OutboxMessageListItem:Cs,OutboxMessageContent:ss},data:function(){return{error:!1,loading:!1,refreshInterval:void 0}},computed:{isMessageShown:function(){return!!this.$route.params.messageId},currentMessage:function(){return this.isMessageShown?this.$store.getters["outbox/getMessage"](this.$route.params.messageId):null},messages:function(){return this.$store.getters["outbox/getAllMessages"]}},created:function(){var t=this;this.refreshInterval=setInterval(ks(xs().mark((function n(){return xs().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.fetchMessages();case 2:case"end":return n.stop()}}),n)}))),6e4)},mounted:function(){var t=this;return ks(xs().mark((function n(){return xs().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.fetchMessages();case 2:case"end":return n.stop()}}),n)})))()},destroyed:function(){clearInterval(this.refreshInterval)},methods:{hideMessage:function(){this.$router.push({name:"outbox"})},fetchMessages:function(){var t=this;return ks(xs().mark((function n(){return xs().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,t.error=!1,n.prev=2,n.next=5,t.$store.dispatch("outbox/fetchMessages");case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),t.error=!0,c.a.error("Failed to fetch outbox messages",{error:n.t0});case 11:t.loading=!1;case 12:case"end":return n.stop()}}),n,null,[[2,7]])})))()}}},Ls=Object(b.a)(Es,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("AppContent",{attrs:{"pane-config-key":"mail","show-details":t.isMessageShown},on:{"update:showDetails":t.hideMessage},scopedSlots:t._u([{key:"list",fn:function(){return[e("AppContentList",[t.error?e("Error",{attrs:{error:t.t("mail","Could not open outbox"),message:"",role:"alert"}}):t.loading?e("Loading",{attrs:{hint:t.t("mail","Loading messages …")}}):0===t.messages.length?e("EmptyMailbox"):t._l(t.messages,(function(t){return e("OutboxMessageListItem",{key:t.id,attrs:{message:t}})}))],2)]},proxy:!0}])},[e("OutboxMessageContent")],1)}),[],!1,null,"2be0933e",null).exports;function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Is=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,e){return t[n]=e}}function c(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=b(i,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function l(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function h(){}var f={};s(f,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==n&&e.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function A(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function y(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Ss(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):n.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function w(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function _(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,s(g,"constructor",h),s(h,"constructor",p),p.displayName=s(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},A(y.prototype),s(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new y(c(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),u},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),w(e),u}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;w(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},t}function Ts(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var Os={name:"Home",components:{Content:a.a,MailboxThread:ba,Navigation:as.a,NewMessageModal:os,Outbox:Ls},mixins:[s.a],computed:{activeAccount:function(){var t;return this.$store.getters.getAccount(null===(t=this.activeMailbox)||void 0===t?void 0:t.accountId)},activeMailbox:function(){return this.$store.getters.getMailbox(this.$route.params.mailboxId)},menu:function(){return this.buildMenu()}},created:function(){var t=this.$store.getters.accounts;if("home"===this.$route.name&&t.length>1){var n=t[0],e=this.$store.getters.getMailboxes(n.id)[0];console.debug("loading first mailbox of first account",n.id,e.databaseId),this.$router.replace({name:"mailbox",params:{mailboxId:e.databaseId}})}else if("home"===this.$route.name&&1===t.length)c.a.debug("the only account we have is the unified one -> show the setup page"),this.$router.replace({name:"setup"});else if("mailto"===this.$route.name){if(0===t.length)return void console.error("cannot handle mailto:, no accounts configured");var r=t[0],o=this.$store.getters.getMailboxes(r.id)[0];console.debug("loading composer with first account and mailbox",r.id,o.id),this.$router.replace({name:"message",params:{mailboxId:o.databaseId,threadId:"mailto"},query:{to:this.$route.query.to,cc:this.$route.query.cc,bcc:this.$route.query.bcc,subject:this.$route.query.subject,body:this.$route.query.body}})}},methods:{hideMessage:function(){var t;this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(t=this.$route.params)||void 0===t?void 0:t.filter}})},onCloseModal:function(t){var n,e=this;return(n=Is().mark((function n(){return Is().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("closeMessageComposer",null!=t?t:{});case 2:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(t){Ts(a,r,o,i,s,"next",t)}function s(t){Ts(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},Ds=r(1489),js={insert:"head",singleton:!1},Ms=(g()(Ds.a,js),Ds.a.locals,Object(b.a)(Os,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Content",{attrs:{"app-name":"mail"}},[e("Navigation"),t._v(" "),"outbox"===t.$route.name?e("Outbox"):t.activeAccount?e("MailboxThread",{attrs:{account:t.activeAccount,mailbox:t.activeMailbox}}):t._e(),t._v(" "),t.$store.getters.showMessageComposer?e("NewMessageModal",{on:{close:t.onCloseModal}}):t._e()],1)}),[],!1,null,"491f4e65",null));e.default=Ms.exports},566:function(t,n,e){"use strict";var r=e(572),o=e.n(r),a=e(570),i=e(9);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var t={},n=Object.prototype,e=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function u(t,n,e,r){var o=n&&n.prototype instanceof h?n:h,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=function(t,n,e){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return L()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var s=w(i,e);if(s){if(s===p)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=d(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(t,e,i),a}function d(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function h(){}function f(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,A=g&&g(g(E([])));A&&A!==n&&e.call(A,o)&&(v=A);var y=m.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function C(t,n){var r;this._invoke=function(o,a){function i(){return new n((function(r,i){!function r(o,a,i,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==s(p)&&e.call(p,"__await")?n.resolve(p.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):n.resolve(p).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function w(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,w(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=d(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,p;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=m,l(y,"constructor",m),l(m,"constructor",f),f.displayName=l(m,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===f||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(C.prototype),l(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var i=new C(u(n,e,r,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),l(y,i,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=e.call(a,"catchLoc"),c=e.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:E(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function l(t,n,e,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(r,o)}var u={name:"Avatar",components:{BaseAvatar:o.a},props:{displayName:{type:String,required:!0},email:{type:String,required:!0},disableTooltip:{type:Boolean,default:!1},size:{type:Number,default:40}},data:function(){return{loading:!0,avatarUrl:void 0}},computed:{hasAvatar:function(){return void 0!==this.avatarUrl}},mounted:function(){var t,n=this;return(t=c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n.email){t.next=10;break}return t.prev=1,t.next=4,Object(a.a)(n.email);case 4:n.avatarUrl=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i.a.debug("Could not fetch avatar",{email:n.email});case 10:n.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){l(a,r,o,i,s,"next",t)}function s(t){l(a,r,o,i,s,"throw",t)}i(void 0)}))})()}},d=e(29),p=Object(d.a)(u,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.loading||!t.hasAvatar?e("BaseAvatar",{attrs:{"display-name":t.displayName,size:t.size,"disable-tooltip":t.disableTooltip}}):e("BaseAvatar",{attrs:{"display-name":t.displayName,url:t.avatarUrl,size:t.size,"disable-tooltip":t.disableTooltip}})}),[],!1,null,null,null);n.a=p.exports},570:function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var r=e(571),o=e.n(r),a=e(3),i=e.n(a),s=e(2),c=o()((function(t){if(null===t)return Promise.resolve(void 0);var n=Object(s.generateUrl)("/apps/mail/api/avatars/url/{email}",{email:t});return i.a.get(n).then((function(t){return t.data})).then((function(n){return n.isExternal?Object(s.generateUrl)("/apps/mail/api/avatars/image/{email}",{email:t}):n.url})).catch((function(t){if(404!==t.response.status)return Promise.reject(t)}))}))}},0,[8]]);
//# sourceMappingURL=mail.9.2c4159f81f621d9f2b4e.js.map