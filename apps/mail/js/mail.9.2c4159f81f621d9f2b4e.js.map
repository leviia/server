{"version":3,"sources":["webpack:///./img/important.svg","webpack:///./src/components/SectionTitle.vue?ddb0","webpack:///./src/components/TagModal.vue?eedb","webpack:///./src/components/CalendarPickerOption.vue?6e33","webpack:///./src/components/EventModal.vue?8e92","webpack:///./src/components/EnvelopePrimaryActions.vue?ec63","webpack:///./src/components/Envelope.vue?485d","webpack:///./src/components/EnvelopeList.vue?ed1c","webpack:///./src/components/Loading.vue?1ac5","webpack:///./src/components/EmptyMailboxSection.vue?7d59","webpack:///./src/components/Mailbox.vue?aa13","webpack:///./src/components/NoMessageSelected.vue?34d0","webpack:///./src/components/RecipientBubble.vue?9c44","webpack:///./src/components/itinerary/EventReservation.vue?1ca1","webpack:///./src/components/itinerary/FlightReservation.vue?98ee","webpack:///./src/components/itinerary/TrainReservation.vue?7985","webpack:///./src/components/MessageAttachment.vue?b038","webpack:///./src/components/AttachmentImageViewer.vue?492a","webpack:///./src/components/MessageAttachments.vue?dd20","webpack:///./src/components/MdnRequest.vue?cb30","webpack:///./src/components/MessageEncryptedBody.vue?6f6d","webpack:///./src/components/MessageHTMLBody.vue?86f2","webpack:///./src/components/MessagePlainTextBody.vue?13b4","webpack:///./src/components/MessagePlainTextBody.vue?061a","webpack:///./src/components/Message.vue?97d9","webpack:///./src/components/MenuEnvelope.vue?a6c0","webpack:///./src/components/ThreadEnvelope.vue?1d04","webpack:///./src/components/Thread.vue?8bde","webpack:///./src/components/MailboxThread.vue?f6ac","webpack:///./src/components/ComposerAttachments.vue?57d3","webpack:///./src/components/RecipientListItem.vue?1929","webpack:///./src/components/MailvelopeEditor.vue?2c0c","webpack:///./src/components/Composer.vue?9232","webpack:///./src/components/NewMessageModal.vue?b994","webpack:///./src/components/OutboxMessageListItem.vue?3c9c","webpack:///./src/views/Home.vue?76a1","webpack:///./src/views/Home.vue?651f","webpack:///./src/components/SectionTitle.vue?9080","webpack:///src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b005","webpack:///./src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b57d","webpack:///./src/directives/infinite-scroll.js","webpack:///./src/components/EmptyMailbox.vue?abca","webpack:///src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue?4ad4","webpack:///./src/directives/drag-and-drop/draggable-envelope/draggable-envelope.js","webpack:///./src/directives/drag-and-drop/draggable-envelope/index.js","webpack:///src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue?4efc","webpack:///./src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue?f478","webpack:///./src/components/icons/ImportantIcon.vue?1b2f","webpack:///src/components/icons/ImportantIcon.vue","webpack:///./src/components/icons/ImportantIcon.vue","webpack:///./src/components/icons/ImportantIcon.vue?1a4f","webpack:///src/components/TagModal.vue","webpack:///./src/components/TagModal.vue?247f","webpack:///./src/components/TagModal.vue?ed4b","webpack:///./src/components/TagModal.vue","webpack:///./src/components/TagModal.vue?d85b","webpack:///./src/dav/client.js","webpack:///./src/util/calendarColor.js","webpack:///./src/service/DAVService.js","webpack:///./src/components/CalendarPickerOption.vue?ad8f","webpack:///src/components/CalendarPickerOption.vue","webpack:///./src/components/CalendarPickerOption.vue?3e23","webpack:///src/components/EventModal.vue","webpack:///./src/components/EventModal.vue?61ee","webpack:///./src/components/CalendarPickerOption.vue","webpack:///./src/components/CalendarPickerOption.vue?3eb0","webpack:///./src/components/EventModal.vue?29f3","webpack:///./src/components/EventModal.vue","webpack:///./src/components/EventModal.vue?2703","webpack:///./src/components/EnvelopePrimaryActions.vue?2a0f","webpack:///src/components/EnvelopePrimaryActions.vue","webpack:///./src/components/EnvelopePrimaryActions.vue?80b8","webpack:///./src/components/EnvelopePrimaryActions.vue","webpack:///./src/components/EnvelopePrimaryActions.vue?78fb","webpack:///src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?f968","webpack:///./src/components/Envelope.vue?9295","webpack:///./src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?a25b","webpack:///src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?f5c3","webpack:///./src/components/EnvelopeList.vue?4607","webpack:///./src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?345f","webpack:///./src/util/CrashReport.js","webpack:///./src/components/Error.vue?1fd4","webpack:///src/components/Error.vue","webpack:///./src/components/Error.vue","webpack:///./src/components/Error.vue?eea6","webpack:///./src/components/Loading.vue?8bea","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue?60d9","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?e2d7","webpack:///./src/components/EmptyMailboxSection.vue?805c","webpack:///src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?a41b","webpack:///src/components/Mailbox.vue","webpack:///./src/components/Mailbox.vue?99b2","webpack:///./src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?1a0c","webpack:///./src/components/Mailbox.vue?749f","webpack:///./src/components/Mailbox.vue","webpack:///./src/components/Mailbox.vue?b755","webpack:///./src/components/NoMessageSelected.vue?7c7e","webpack:///src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?9d47","webpack:///./src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?4813","webpack:///./src/util/ErrorMessageFactory.js","webpack:///src/components/RecipientBubble.vue","webpack:///./src/service/ContactIntegrationService.js","webpack:///./src/components/RecipientBubble.vue?07c8","webpack:///./src/components/RecipientBubble.vue?6491","webpack:///./src/components/RecipientBubble.vue","webpack:///./src/components/RecipientBubble.vue?c3d6","webpack:///./src/crypto/pgp.js","webpack:///./src/components/itinerary/CalendarImport.vue?ef70","webpack:///src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue?2f53","webpack:///./src/components/itinerary/EventReservation.vue?f93a","webpack:///src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?2170","webpack:///./src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?c609","webpack:///./src/components/itinerary/FlightReservation.vue?a2ae","webpack:///src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?e92b","webpack:///./src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?3a79","webpack:///./src/components/itinerary/TrainReservation.vue?a40c","webpack:///src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?36ad","webpack:///./src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?1dea","webpack:///src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?6d2b","webpack:///./src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?c67f","webpack:///./src/service/AttachmentService.js","webpack:///./src/crypto/mailvelope.js","webpack:///./src/components/MessageAttachment.vue?426a","webpack:///src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?ed8a","webpack:///./src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?b6eb","webpack:///./src/components/AttachmentImageViewer.vue?71d3","webpack:///src/components/AttachmentImageViewer.vue","webpack:///./src/components/AttachmentImageViewer.vue?930b","webpack:///./src/components/MessageAttachments.vue?43cf","webpack:///src/components/MessageAttachments.vue","webpack:///./src/components/AttachmentImageViewer.vue","webpack:///./src/components/AttachmentImageViewer.vue?6876","webpack:///./src/components/MessageAttachments.vue?eab8","webpack:///./src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachments.vue?e3f9","webpack:///src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?df6a","webpack:///./src/components/MdnRequest.vue?badb","webpack:///./src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?511c","webpack:///src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?d56e","webpack:///./src/components/MessageEncryptedBody.vue?8cff","webpack:///./src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?0d96","webpack:///src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?aa4c","webpack:///./src/components/MessageHTMLBody.vue?bf9e","webpack:///./src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?d5f7","webpack:///src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?6434","webpack:///./src/components/MessagePlainTextBody.vue?dedf","webpack:///./src/components/MessagePlainTextBody.vue?a2e2","webpack:///./src/components/Message.vue?7d74","webpack:///src/components/Message.vue","webpack:///./src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?cfa8","webpack:///./src/components/Message.vue?abc4","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?59b2","webpack:///src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?77d6","webpack:///./src/components/MenuEnvelope.vue?758f","webpack:///./src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?3a6d","webpack:///./src/components/Moment.vue?eaed","webpack:///src/components/Moment.vue","webpack:///src/components/ThreadEnvelope.vue","webpack:///./src/components/ThreadEnvelope.vue?d8a2","webpack:///./src/components/Moment.vue","webpack:///./src/components/Moment.vue?c1e1","webpack:///./src/components/ThreadEnvelope.vue?81c2","webpack:///./src/components/ThreadEnvelope.vue","webpack:///./src/components/ThreadEnvelope.vue?5906","webpack:///src/components/Thread.vue","webpack:///./src/components/Thread.vue?588c","webpack:///./src/components/Thread.vue?77d9","webpack:///./src/components/Thread.vue","webpack:///./src/components/Thread.vue?b8c6","webpack:///./src/components/MailboxThread.vue?b046","webpack:///src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?50e9","webpack:///./src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?58a3","webpack:///./src/service/FileService.js","webpack:///./src/service/FileSharingService.js","webpack:///src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?8b74","webpack:///./src/components/ComposerAttachments.vue?7e23","webpack:///./src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?45fd","webpack:///./src/components/RecipientListItem.vue?cc8f","webpack:///src/components/RecipientListItem.vue","webpack:///./src/components/RecipientListItem.vue?074c","webpack:///./src/components/RecipientListItem.vue","webpack:///./src/components/RecipientListItem.vue?61f0","webpack:///src/components/MailvelopeEditor.vue","webpack:///./src/components/MailvelopeEditor.vue?5039","webpack:///./src/components/MailvelopeEditor.vue?30fc","webpack:///./src/components/MailvelopeEditor.vue","webpack:///./src/components/MailvelopeEditor.vue?f2b7","webpack:///src/components/Composer.vue","webpack:///./src/service/AutocompleteService.js","webpack:///./src/components/Composer.vue?b085","webpack:///./src/components/Composer.vue?59d9","webpack:///./src/components/Composer.vue","webpack:///./src/components/Composer.vue?7087","webpack:///src/components/NewMessageModal.vue","webpack:///./src/components/NewMessageModal.vue?babc","webpack:///./src/components/NewMessageModal.vue?3047","webpack:///./src/components/NewMessageModal.vue","webpack:///./src/components/NewMessageModal.vue?5db4","webpack:///./src/components/OutboxMessageContent.vue?e104","webpack:///src/components/OutboxMessageContent.vue","webpack:///./src/components/OutboxMessageContent.vue","webpack:///./src/components/OutboxMessageContent.vue?4d14","webpack:///./src/mixins/OutboxAvatarMixin.js","webpack:///src/components/OutboxMessageListItem.vue","webpack:///./src/components/OutboxMessageListItem.vue?aa54","webpack:///./src/components/OutboxMessageListItem.vue?f0a3","webpack:///./src/components/OutboxMessageListItem.vue","webpack:///./src/components/OutboxMessageListItem.vue?bd72","webpack:///src/components/Outbox.vue","webpack:///./src/components/Outbox.vue?39c1","webpack:///./src/components/Outbox.vue","webpack:///./src/components/Outbox.vue?0075","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?8c94","webpack:///./src/views/Home.vue?fc32","webpack:///./src/views/Home.vue","webpack:///./src/components/Avatar.vue?9012","webpack:///src/components/Avatar.vue","webpack:///./src/components/Avatar.vue?0735","webpack:///./src/components/Avatar.vue","webpack:///./src/service/AvatarService.js"],"names":["module","exports","___CSS_LOADER_EXPORT___","push","i","name","props","type","required","locals","_h","this","$createElement","_c","_self","attrs","staticClass","_v","_s","ctx","getScrollTop","element","window","Math","max","pageYOffset","document","documentElement","scrollTop","getComputedStyle","defaultView","getElementTop","getBoundingClientRect","top","isAttached","currentNode","parentNode","tagName","nodeType","doBind","binded","fn","delay","now","lastExec","timer","context","args","execute","directive","el","throttleDelayExpr","getAttribute","throttleDelay","Number","vm","isNaN","scrollEventTarget","overflowY","getScrollEventTarget","scrollListener","doCheck","bind","apply","arguments","Date","clearTimeout","diff","setTimeout","addEventListener","$on","removeEventListener","disabledExpr","disabled","$watch","value","immediateCheck","call","Boolean","distanceExpr","distance","immediateCheckExpr","eventName","force","viewportScrollTop","viewportBottom","clientHeight","getVisibleHeight","shouldTrigger","scrollHeight","offsetHeight","expression","binding","vnode","console","info","$nextTick","bindTryCount","tryBind","unbind","t","DraggableEnvelope","componentInstance","options","registerListeners","setInitialAttributes","setAttribute","classList","add","instance","onDragStart","onDragEnd","event","accountId","mailboxId","selectedEnvelopes","dataTransfer","clearData","effectAllowed","envelopes","length","forEach","envelope","index","envelopeId","databaseId","draggableLabel","subject","from","label","setData","JSON","stringify","attachGhost","dragEventBus","$emit","itemCount","baseClass","dragNode","createElement","counterNode","textCountNode","createTextNode","appendChild","labelWrapperNode","labelNode","textLabelNode","body","setDragImage","defer","removeChild","instances","DraggableEnvelopeDirective","componentUpdated","update","filter","components","MailboxPicker","account","moveThread","default","data","moving","destMailboxId","methods","onClose","onMove","id","logger","error","_vm","on","$event","title","size","fillColor","_g","_b","class","listeners","randomColor","randomHexColor","Modal","Actions","ActionText","ActionInput","ActionButton","isAdded","editing","tagLabel","tagInput","showSaving","renameTagLabel","renameTagInput","color","computed","tags","isSet","imapLabel","addTag","removeTag","addTagInput","createTag","displayName","showError","convertHex","opacity","openEditTag","renameTag","tag","showInfo","_l","key","style","_e","getClient","memoize","service","axios","defaults","headers","webdav","patch","generateRemoteUrl","getCurrentUser","uid","uidToColor","hash","toLowerCase","match","md5","replace","steps","red","Color","yellow","blue","palette1","mixPalette","palette2","palette3","concat","GenColors","maximum","finalInt","result","parseInt","charAt","j","hashToInt","r","g","b","color1","color2","palette","step","ends","Array","stepCalc","canWrite","properties","acls","acl","ace","isArray","undefined","grant","privilege","write","getCalendarData","calendar","displayname","order","vevent","writable","url","filename","convert","rgb","hex","getUserCalendars","getDirectoryContents","details","response","map","getRandomString","str","random","toString","substring","importCalendarEvent","curry","Logger","debug","promises","file","timezones","allObjects","jCal","ical","parse","Component","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","split","objectsId","objects","component","root","updatePropertyWithValue","OC","theme","objectId","addSubcomponent","splitCalendar","componentId","Promise","resolve","Axios","put","all","displayIcon","CalendarPickerOption","backgroundColor","DatetimePicker","Multiselect","calendars","eventTitle","startDate","endDate","isAllDay","startTimezoneId","endTimezoneId","saving","selectedCalendar","dateFormat","datePickerType","created","mounted","onSave","startTimezone","endTimezone","timezoneManager","getTimezoneManager","startDateTime","DateTimeValue","fromJSDate","getInTimezone","endDateTime","createEvent","vObject","showSuccess","directives","rawName","domProps","target","composing","model","callback","$$v","_i","$$a","$$el","$$c","checked","$$i","slice","scopedSlots","_u","ref","option","_t","AlertOctagonIcon","CalendarBlankIcon","CheckIcon","ChevronLeft","DeleteIcon","DotsHorizontalIcon","EnvelopePrimaryActions","EventModal","ListItem","Avatar","MoveModal","OpenInNewIcon","PlusIcon","TagIcon","TagModal","Star","StarOutline","EmailOutline","Email","ImportantIcon","draggableEnvelope","withReply","mailbox","selectMode","selected","hasMultipleAccounts","importantSvg","showMoveModal","showEventModal","showTagModal","moreActionsOpen","hasMultipleRecipients","email","accountColor","draft","link","params","threadId","exact","addresses","avatarEmail","showFavoriteIconVariant","showImportantIconVariant","isImportant","getEnvelopeTags","some","subjectForSubtitle","setSelected","formatted","unselect","toggleSelected","onClick","draftId","templateMessageId","onSelectMultiple","onToggleImportant","onToggleFlagged","onToggleSeen","onToggleJunk","onDelete","matchError","NoTrashMailboxConfiguredError","onOpenEditAsNew","onOpenMoveModal","onOpenEventModal","onCloseMoveModal","onOpenTagModal","onCloseTagModal","seen","flags","isUnified","flagged","preventDefault","$junk","ctrlKey","shiftKey","altKey","metaKey","proxy","hasAttachments","Envelope","searchQuery","refreshing","loadingMore","loadMoreButton","selection","lastToggledIndex","areAllSelectedRead","isAtLeastOneSelectedImportant","env","isAtLeastOneSelectedUnimportant","areAllSelectedFavorite","watch","newVal","oldVal","differenceWith","beforeDestroy","isEnvelopeSelected","idx","markSelectedSeenOrUnseen","markSelectionImportant","markSelectionUnimportant","favoriteOrUnfavoriteAll","favFlag","deleteAllSelected","isAllSelected","selectedEnvelope","lastSelectedEnvelope","lastIndex","nextEnvelopeToNavigate","catch","query","quantity","setEnvelopeSelected","onEnvelopeSelectToggle","onEnvelopeSelectMultiple","unselectAll","forwardSelectedAsAttachment","forwardedMessages","n","number","includes","flattenTrace","trace","reduce","acc","entry","text","function","line","getReportUrl","message","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","stack","flattenError","render","encodeURIComponent","reportUrl","hint","slowHint","slow","slowTimer","EmptyMailboxSection","EmptyMailbox","EnvelopeList","Error","Loading","mixins","bus","paginate","initialPageSize","openFirst","isPriorityInbox","loadingEnvelopes","loadingCacheInitialization","loadMailboxInterval","expanded","endReached","envelopesToShow","hasMessages","showLoadMore","$route","to","then","destroyed","initializeCache","loadEnvelopes","limit","first","MailboxLockedError","wait","MailboxNotCachedError","loadMore","handleShortcut","e","currentId","srcKey","next","sync","init","onScroll","loadMailbox","stopInterval","clearInterval","AppContentDetails","smileys","getRandomSmiley","floor","term","generateUrl","get","resp","new","existing","select","UserBubble","Popover","avatarUrl","loadingContacts","contactsWithEmail","autoCompleteContacts","selectedContact","newContactName","ContactSelectionStateEnum","isContactPopoverOpen","avatarUrlAbsolute","selectableContacts","contactsWithEmailComputed","additional","addButtonDisabled","fetchAvatarUrlMemoized","onClickCopyToClipboard","onClickReply","onClickOpenContactDialog","mail","findMatches","onClickAddToContact","mailAddr","newContact","contactName","addToContact","onAutocomplete","debouncedSearch","slot","isPgpgMessage","format","startsWith","handler","cals","onImport","itineraryDateTime","dt","addIcalTimeProperty","icalEvent","itineraryDt","icalPropertyName","prop","loading","CalendarImport","messageId","time","date","location","canImport","getEndDateTime","handleImport","cal","AirplaneIcon","ArrowIcon","departureTime","departureDate","arrivalTime","arrivalDate","flightNumber","reservation","flightNr","depAirport","arrAirport","reservationFor","departureAirport","iataCode","arrivalAirport","TrainIcon","trainNumber","trainNr","depStation","arrStation","departureStation","arrivalStation","EventReservation","FlightReservation","TrainReservation","entries","getUserCalendarsOnce","saveAttachmentToFiles","attachmentId","directory","post","targetPath","mailvelope","PopoverMenu","fileName","mime","mimeUrl","isImage","isCalendarEvent","savingToCloud","loadingCalendars","showCalendarPopover","calendarMenuEntries","icon","action","boundariesElement","humanReadable","saveToCloud","setMultiSelect","addMimeTypeFilter","setModal","setType","allowDirectories","build","pick","saveAttachment","download","loadCalendars","closeCalendarPopover","importCalendar","res","downloadAttachment","stopPropagation","open","AttachmentImageViewer","MessageAttachment","attachments","showPreview","attachmentImageURL","moreThanOne","zipUrl","saveAll","saveAttachments","downloadZip","showViewer","attachment","downloadUrl","getMailvelope","hasMdnRequest","mdnSent","sendMdn","flag","MdnRequest","senderAddress","fullHeight","hasBlockedContent","isSenderTrusted","sender","domain","beforeMount","scout","iframeResizer","log","heightCalculationMethod","getIframeDoc","onMessageFrameLoad","iframeDoc","onBeforePrint","displayIframe","node","querySelectorAll","onShowBlockedContent","trustSender","onShowBlockedContentForDomain","staticStyle","hidden","scroll","signature","enhancedBody","signatureSummaryAndBody","summary","signatureSummary","nl2br","Itinerary","MessageAttachments","MessageEncryptedBody","MessageHTMLBody","MessagePlainTextBody","htmlUrl","isEncrypted","itineraries","hasHtmlBody","ActionLink","DownloadIcon","InformationIcon","ReplyIcon","ReplyAllIcon","ShareIcon","isSelected","withSelect","withShowSource","rawMessage","showSourceModal","forwardMessages","threadingFile","inReplyTo","references","threadRootId","threadingFileName","onForward","reply","mode","onShowSourceModal","onCloseSourceModal","onReply","nativeOn","timestamp","MenuEnvelope","Moment","Message","String","threadSubject","seenTimer","route","find","hasChangedSubject","cleanSubject","centeredSender","fetchMessage","fetchItineraries","scrollToCurrentEnvelope","dateInt","primary","errorMessage","RecipientBubble","ThreadEnvelope","expandedThreads","participantsToDisplay","resizeDebounced","moreParticipantsString","thread","threadParticipants","updateParticipantsToDisplay","childrenWidth","fits","toggleExpand","resetThread","fetchThread","oldId","newId","texts","participant","infiniteScroll","AppContent","AppContentList","Mailbox","NoMessageSelected","SectionTitle","Thread","importantInfo","shortkeys","del","prev","refresh","unseen","priorityImportantQuery","priorityStarredQuery","priorityOtherQuery","unifiedAccount","unifiedInbox","hasEnvelopes","showThread","isThreadShown","deleteMessage","onShortcut","appendToSearch","hideMessage","handleMailto","cc","stringToRecipients","modifiers","isMobile","getFileSize","path","stat","shareFile","token","generateOcsUrl","shareType","shareWith","ocs","meta","uploadSizeLimit","uploading","uploads","uploadProgress","uploaded","total","onAddLocalAttachment","emitNewAttachments","totalSizeOfUpload","onLocalAttachmentSelected","Vue","existingUploads","toUpload","newTotal","progress","FormData","opts","onUploadProgress","prog","loaded","append","onAddCloudAttachment","picker","getFilePickerBuilder","paths","fileSizes","sum","onAddCloudAttachmentLink","showAttachmentFileSizeWarning","num","showWarning","appendToBodyAtCursor","toAppend","percent","ListItemIcon","Close","removeRecipient","field","recipients","quotedText","isReplyOrForward","editor","quotedMail","pull","armored","EDITING","UPLOADING","SENDING","ERROR","WARNING","FINISHED","DISCARDING","DISCARDED","MailvelopeEditor","ActionCheckbox","ActionRadio","VButton","ComposerAttachments","Delete","Download","TextEditor","EmptyContent","RecipientListItem","Send","SendClock","UnfoldMoreHorizontal","UnfoldLessHorizontal","fromAccount","bcc","editorBody","send","inReplyToMessageId","replyTo","forwardFrom","sendAt","attachmentsData","bodyVal","selectedDate","showCC","showBCC","selectedAlias","autocompleteRecipients","newRecipients","subjectVal","noReply","draftsPromise","attachmentsPromise","canSaveDraft","savingDraft","saveDraftDebounced","state","errorText","STATES","selectTo","selectCc","selectBcc","encrypt","available","keyRing","keysMissing","editorMode","addShareLink","productName","requestMdn","appendSignature","loadingIndicatorTo","loadingIndicatorCc","loadingIndicatorBcc","isMoreActionsOpen","sendAtVal","firstDayDatetimePicker","formatter","autoLimit","editorInputTextReady","mapGetters","aliases","aliasId","selectId","emailAddress","signatureAboveQuote","allRecipients","attachmentSizeLimit","selectableRecipients","isForward","isReply","canSend","editorPlainText","submitButtonTitle","dateTomorrowMorning","today","dateTomorrowAfternoon","dateMondayMorning","customSendTime","showAmPm","isSendAtTomorrowMorning","isSendAtTomorrowAfternoon","isSendAtMondayMorning","isSendAtCustom","newAliases","onMailvelopeLoaded","forwards","setAlias","checkRecipientsKeys","keysValid","initBody","getMessageData","isHtml","saveDraft","NoDraftsMailboxConfiguredError","callSaveDraft","withDebounce","handleAppendSignature","onEditorInputText","onChangeSendLater","convertToLocalDate","month","day","hour","minute","onAliasChange","alias","loadingIndicator","onAttachmentsUploading","onNewToAddr","addr","onNewCcAddr","onNewBccAddr","onNewAddr","list","onSend","_","NoSentMailboxConfiguredError","ManyRecipientsError","onForceSend","reset","formatAliases","discardDraft","disabledDatetimepickerDate","minimumDate","disabledDatetimepickerTime","onRemoveRecipient","removeRecipientTo","removeRecipientCc","removeRecipientBcc","toggleViewMode","join","isScheduledSendingDisabled","Composer","original","modalTitle","composerMessage","composerData","toHtml","plain","dataForServer","getDataForServer","sendMessage","recipientToRfc822","recipient","isOutbox","convertEditorBody","restoreOriginalSendAt","avatarDisplayName","OutboxAvatarMixin","sendMessageNow","failed","openModal","OutboxMessageListItem","OutboxMessageContent","refreshInterval","isMessageShown","currentMessage","messages","fetchMessages","Content","MailboxThread","Navigation","NewMessageModal","Outbox","activeAccount","activeMailbox","menu","onCloseModal","$store","getters","BaseAvatar","disableTooltip","hasAvatar","avatar","isExternal","err","status","reject"],"mappings":"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","file":"mail.9.2c4159f81f621d9f2b4e.js","sourcesContent":["module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\"></path></svg>\"","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#priority[data-v-95f06344] {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item[data-v-95f06344]:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/SectionTitle.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,qBAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Greta Doi <gretadoci@gmail.com>\\n  -\\n  - @author 2020 Greta Doi <gretadoci@gmail.com>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"priority\\\">\\n\\t\\t<div class=\\\"app-content-list-item\\\">\\n\\t\\t\\t<h2>{{ name }}</h2>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n<script>\\nexport default {\\n\\tname: 'SectionTitle',\\n\\tprops: {\\n\\t\\tname: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#priority {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-0b6e590a] .modal-content{padding:0 20px 20px 20px;max-height:calc(100vh - 210px);overflow-y:auto}[data-v-0b6e590a] .modal-container{width:auto !important}.tag-title[data-v-0b6e590a]{margin-top:20px;margin-left:10px}.tag-group[data-v-0b6e590a]{display:block;position:relative;margin:0 1px;overflow:hidden;left:4px}.tag-actions[data-v-0b6e590a]{background-color:rgba(0,0,0,0);border:none;float:right}.tag-actions[data-v-0b6e590a]:hover,.tag-actions[data-v-0b6e590a]:focus{background-color:var(--color-border-dark)}.tag-group__label[data-v-0b6e590a]{z-index:2;font-weight:bold;border:none;background-color:rgba(0,0,0,0);padding-left:10px;padding-right:10px;overflow:hidden;text-overflow:ellipsis;max-width:94px}.app-navigation-entry-bullet-wrapper[data-v-0b6e590a]{width:44px;height:44px;display:inline-block;position:absolute;list-style:none}.app-navigation-entry-bullet-wrapper .color0[data-v-0b6e590a]{width:30px !important;height:30px;border-radius:50%;background-size:14px;margin-top:-65px;margin-left:180px;z-index:2;display:flex;position:relative}.icon-colorpicker[data-v-0b6e590a]{background-image:var(--icon-add-fff)}.tagButton[data-v-0b6e590a]{display:inline-block;margin-left:10px}[data-v-0b6e590a] .action-input{margin-left:-31px}[data-v-0b6e590a] .icon-tag{background-image:none}.action-item[data-v-0b6e590a]{right:8px;float:right}.create-tag[data-v-0b6e590a]{list-style:none}@media only screen and (max-width: 512px){[data-v-0b6e590a] .modal-container{top:100px !important;max-height:calc(100vh - 170px) !important}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/TagModal.vue\"],\"names\":[],\"mappings\":\"AAgPA,iCACC,wBAAA,CACA,8BAAA,CACA,eAAA,CAED,mCACC,qBAAA,CAED,4BACC,eAAA,CACA,gBAAA,CAED,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,WAAA,CACA,wEAEC,yCAAA,CAGF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,cAAA,CAED,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,eAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAGF,mCACC,oCAAA,CAED,4BACC,oBAAA,CACA,gBAAA,CAED,gCACC,iBAAA,CAED,4BACC,qBAAA,CAED,8BACC,SAAA,CACA,WAAA,CAED,6BACC,eAAA,CAED,0CACC,mCACA,oBAAA,CACA,yCAAA,CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .modal-content {\\n\\tpadding: 0 20px 20px 20px;\\n\\tmax-height: calc(100vh - 210px);\\n\\toverflow-y: auto;\\n}\\n::v-deep .modal-container {\\n\\twidth: auto !important;\\n}\\n.tag-title {\\n\\tmargin-top: 20px;\\n\\tmargin-left: 10px;\\n}\\n.tag-group {\\n\\tdisplay: block;\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.tag-actions {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n\\tfloat: right;\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-border-dark);\\n\\t}\\n}\\n.tag-group__label {\\n\\tz-index: 2;\\n\\tfont-weight: bold;\\n\\tborder: none;\\n\\tbackground-color: transparent;\\n\\tpadding-left: 10px;\\n\\tpadding-right: 10px;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tmax-width: 94px;\\n}\\n.app-navigation-entry-bullet-wrapper {\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tlist-style: none;\\n\\n\\t.color0 {\\n\\t\\twidth: 30px !important;\\n\\t\\theight: 30px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tbackground-size: 14px;\\n\\t\\tmargin-top: -65px;\\n\\t\\tmargin-left: 180px;\\n\\t\\tz-index: 2;\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t}\\n}\\n.icon-colorpicker {\\n\\tbackground-image: var(--icon-add-fff);\\n}\\n.tagButton {\\n\\tdisplay: inline-block;\\n\\tmargin-left: 10px;\\n}\\n::v-deep .action-input {\\n\\tmargin-left: -31px;\\n}\\n::v-deep .icon-tag {\\n\\tbackground-image: none;\\n}\\n.action-item {\\n\\tright: 8px;\\n\\tfloat: right;\\n}\\n.create-tag {\\n\\tlist-style: none;\\n}\\n@media only screen and (max-width: 512px) {\\n\\t::v-deep .modal-container {\\n\\ttop: 100px !important;\\n\\tmax-height: calc(100vh - 170px) !important\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".calendar-picker-option[data-v-9bd234a6]{width:100%;display:flex;align-items:center}.calendar-picker-option__color-indicator[data-v-9bd234a6]{width:12px;height:12px;border-radius:50%;border:none;margin-right:8px;flex-basis:12px;flex-shrink:0}.calendar-picker-option__label[data-v-9bd234a6]{overflow:hidden;text-overflow:ellipsis;flex-grow:1;max-width:80px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/CalendarPickerOption.vue\"],\"names\":[],\"mappings\":\"AAmCA,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CAEA,0DACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CAGD,gDACC,eAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.calendar-picker-option {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\n\\t&__color-indicator {\\n\\t\\twidth: 12px;\\n\\t\\theight: 12px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tborder: none;\\n\\t\\tmargin-right: 8px;\\n\\t\\tflex-basis: 12px;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n\\n\\t&__label {\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: 80px;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-ebd3f16a] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}.modal-content[data-v-ebd3f16a]{padding:30px 30px 20px !important}input[data-v-ebd3f16a]{width:100%}[data-v-ebd3f16a] input[type=text].multiselect__input{padding:0 !important}[data-v-ebd3f16a] .multiselect__single{margin-left:-18px;width:100px}[data-v-ebd3f16a] .multiselect__tags{border:none !important}.all-day[data-v-ebd3f16a]{margin-left:-1px;margin-top:5px;margin-bottom:5px}.eventTitle[data-v-ebd3f16a]{margin-bottom:5px}.primary[data-v-ebd3f16a]{height:44px !important;float:right}[data-v-ebd3f16a] .mx-datepicker{width:213px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EventModal.vue\"],\"names\":[],\"mappings\":\"AAwLA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAED,gCACC,iCAAA,CAED,uBACC,UAAA,CAED,sDACC,oBAAA,CAED,uCACC,iBAAA,CACA,WAAA,CAED,qCACC,sBAAA,CAED,0BACC,gBAAA,CACA,cAAA,CACA,iBAAA,CAED,6BACC,iBAAA,CAED,0BACC,sBAAA,CACA,WAAA,CAED,iCACC,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .modal-wrapper .modal-container {\\n\\twidth: calc(100vw - 120px) !important;\\n\\theight: calc(100vh - 120px) !important;\\n\\tmax-width: 490px !important;\\n\\tmax-height: 500px !important;\\n}\\n.modal-content {\\n\\tpadding: 30px 30px 20px !important;\\n}\\ninput {\\n\\twidth: 100%;\\n}\\n::v-deep input[type='text'].multiselect__input {\\n\\tpadding: 0 !important;\\n}\\n::v-deep .multiselect__single {\\n\\tmargin-left: -18px;\\n\\twidth: 100px;\\n}\\n::v-deep .multiselect__tags {\\n\\tborder: none !important;\\n}\\n.all-day {\\n\\tmargin-left: -1px;\\n\\tmargin-top: 5px;\\n\\tmargin-bottom: 5px;\\n}\\n.eventTitle {\\n\\tmargin-bottom: 5px;\\n}\\n.primary {\\n\\theight: 44px !important;\\n\\tfloat: right;\\n}\\n::v-deep .mx-datepicker {\\n\\twidth: 213px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.list-item-content__actions--primary {\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n}\\n.list-item-content__actions--primary .action--primary:first-child {\\n\\tpadding-left: 5px;\\n}\\n.list-item-content__actions--primary .action--primary:last-child {\\n\\tpadding-right: 5px;\\n}\\n.list-item-content__actions--primary .action--primary .action-button {\\n\\talign-items: center;\\n\\tflex-direction: column;\\n\\tpadding: 10px 10px 0 10px;\\n}\\n.list-item-content__actions--primary .action--primary .action-button__text {\\n\\tfont-size: 14px;\\n\\tmargin-top: -8px;\\n}\\n.list-item-content__actions--primary .action--primary .action-button__text,\\n.list-item-content__actions--primary .action--primary .action-button__icon {\\n\\theight: auto;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopePrimaryActions.vue\"],\"names\":[],\"mappings\":\";AAaA;CACA,aAAA;CACA,8BAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,mBAAA;CACA,sBAAA;CACA,yBAAA;AACA;AAEA;CACA,eAAA;CACA,gBAAA;AACA;AAEA;;CAEA,YAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<ul class=\\\"list-item-content__actions--primary\\\">\\n\\t\\t<slot />\\n\\t</ul>\\n</template>\\n\\n<script>\\nexport default {\\n\\tname: 'EnvelopePrimaryActions',\\n}\\n</script>\\n\\n<style>\\n.list-item-content__actions--primary {\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n}\\n\\n.list-item-content__actions--primary .action--primary:first-child {\\n\\tpadding-left: 5px;\\n}\\n\\n.list-item-content__actions--primary .action--primary:last-child {\\n\\tpadding-right: 5px;\\n}\\n\\n.list-item-content__actions--primary .action--primary .action-button {\\n\\talign-items: center;\\n\\tflex-direction: column;\\n\\tpadding: 10px 10px 0 10px;\\n}\\n\\n.list-item-content__actions--primary .action--primary .action-button__text {\\n\\tfont-size: 14px;\\n\\tmargin-top: -8px;\\n}\\n\\n.list-item-content__actions--primary .action--primary .action-button__text,\\n.list-item-content__actions--primary .action--primary .action-button__icon {\\n\\theight: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-account-color[data-v-17434778]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.icon-important[data-v-17434778]  path{fill:#fc0;stroke:var(--color-main-background)}.list-item:hover .icon-important[data-v-17434778]  path,.list-item:focus .icon-important[data-v-17434778]  path,.list-item.active .icon-important[data-v-17434778]  path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-17434778]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-17434778]:hover,.icon-important.app-content-list-item-star[data-v-17434778]:focus{opacity:.5}.app-content-list-item-select-checkbox[data-v-17434778]{display:inline-block;vertical-align:middle;position:absolute;left:33px;top:35px;z-index:50}.list-item-style[data-v-17434778]:not(.seen){font-weight:bold}.list-item-style.selected[data-v-17434778]{background-color:var(--color-background-dark)}.icon-junk[data-v-17434778]{opacity:.2;display:flex;top:6px;left:34px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}list-item-style.draft .app-content-list-item-line-two[data-v-17434778]{font-style:italic}.list-item-style.active[data-v-17434778]{background-color:var(--color-primary-light);border-radius:16px}.icon-reply[data-v-17434778],.icon-attachment[data-v-17434778]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-17434778]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.icon-attachment[data-v-17434778]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.app-content-list .list-item[data-v-17434778]{padding-right:0}.app-content-list .list-item .app-content-list-item-line-two[data-v-17434778]{padding-right:0;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]{margin-right:-2px;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]  .action-item__menu{right:7px !important}.app-content-list .list-item .app-content-list-item-menu[data-v-17434778]  .action-item__menu .action-item__menu_arrow{right:6px !important}.app-content-list .list-item .app-content-list-item-details[data-v-17434778]{padding-right:7px}[data-v-17434778] .list-item__extra{margin-left:41px !important}.tag-group__label[data-v-17434778]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-17434778]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-17434778]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}[data-v-17434778].list-item__wrapper{list-style:none}.app-content-list-item-star.icon-starred[data-v-17434778]{display:block}[data-v-17434778].icon-important.app-content-list-item-star{position:absolute;top:7px;z-index:1}.app-content-list-item-star.icon-starred[data-v-17434778]{display:inline-block;position:absolute;margin-bottom:32px;margin-left:28px;cursor:pointer;z-index:1}[data-v-17434778] .svg svg{height:16px;width:16px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Envelope.vue\"],\"names\":[],\"mappings\":\"AAsgBA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uCACA,SAAA,CACA,mCAAA,CAKA,yKACA,mCAAA,CAKA,4DACA,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEA,UAAA,CAKD,wDACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,6CACC,gBAAA,CAED,2CACC,6CAAA,CAED,4BACC,UAAA,CACA,YAAA,CACA,OAAA,CACA,SAAA,CACA,oBAAA,CACA,WAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CAED,uEACC,iBAAA,CAED,yCACC,2CAAA,CACA,kBAAA,CAGD,+DAEC,oBAAA,CACA,uBAAA,CAGD,6BACC,gEAAA,CACA,WAAA,CAGD,kCACC,gEAAA,CACA,WAAA,CAKD,8CACC,eAAA,CAEA,8EACA,eAAA,CACA,eAAA,CAGA,0EACA,iBAAA,CACA,eAAA,CAEA,8FACA,oBAAA,CAEA,uHACA,oBAAA,CAKA,6EACC,iBAAA,CAGF,oCACC,2BAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,qCACC,eAAA,CAED,0DACC,aAAA,CAED,4DACC,iBAAA,CACA,OAAA,CACA,SAAA,CAED,0DACC,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,SAAA,CAED,2BACC,WAAA,CACA,UAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-account-color {\\n\\tposition: absolute;\\n\\tleft: 0px;\\n\\twidth: 2px;\\n\\theight: 69px;\\n\\tz-index: 1;\\n}\\n\\n.icon-important {\\n\\t::v-deep path {\\n\\tfill: #ffcc00;\\n\\tstroke: var(--color-main-background);\\n\\t}\\n\\t.list-item:hover &,\\n\\t.list-item:focus &,\\n\\t.list-item.active & {\\n\\t::v-deep path {\\n\\tstroke: var(--color-background-dark);\\n\\t}\\n\\t}\\n\\n\\t// In message list, but not the one in the action menu\\n\\t&.app-content-list-item-star {\\n\\tbackground-image: none;\\n\\tleft: 7px;\\n\\ttop: 13px;\\n\\topacity: 1;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\topacity: 0.5;\\n\\t}\\n\\t}\\n}\\n\\n.app-content-list-item-select-checkbox {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tposition: absolute;\\n\\tleft: 33px;\\n\\ttop: 35px;\\n\\tz-index: 50; // same as icon-starred\\n}\\n\\n.list-item-style:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.list-item-style.selected {\\n\\tbackground-color: var(--color-background-dark);\\n}\\n.icon-junk {\\n\\topacity: .2;\\n\\tdisplay: flex;\\n\\ttop: 6px;\\n\\tleft: 34px;\\n\\tbackground-size: 16px;\\n\\theight: 20px;\\n\\twidth: 20px;\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tposition: absolute;\\n\\tz-index: 2;\\n}\\nlist-item-style.draft .app-content-list-item-line-two {\\n\\tfont-style: italic;\\n}\\n.list-item-style.active {\\n\\tbackground-color: var(--color-primary-light);\\n\\tborder-radius: 16px;\\n}\\n\\n.icon-reply,\\n.icon-attachment {\\n\\tdisplay: inline-block;\\n\\tvertical-align: text-top;\\n}\\n\\n.icon-reply {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n.icon-attachment {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n\\t// Fix layout of messages in list until we move to component\\n\\n.app-content-list .list-item {\\n\\tpadding-right: 0;\\n\\n\\t.app-content-list-item-line-two {\\n\\tpadding-right: 0;\\n\\tmargin-top: -8px;\\n\\t}\\n\\n\\t.app-content-list-item-menu {\\n\\tmargin-right: -2px;\\n\\tmargin-top: -8px;\\n\\n\\t::v-deep .action-item__menu {\\n\\tright: 7px !important;\\n\\n\\t.action-item__menu_arrow {\\n\\tright: 6px !important;\\n\\t}\\n\\t}\\n\\t}\\n\\n\\t.app-content-list-item-details {\\n\\t\\tpadding-right: 7px;\\n\\t\\t}\\n}\\n::v-deep .list-item__extra {\\n\\tmargin-left: 41px !important;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n::v-deep.list-item__wrapper {\\n\\tlist-style: none;\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: block;\\n}\\n::v-deep.icon-important.app-content-list-item-star {\\n\\tposition: absolute;\\n\\ttop: 7px;\\n\\tz-index: 1;\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-bottom: 32px;\\n\\tmargin-left: 28px;\\n\\tcursor: pointer;\\n\\tz-index: 1;\\n}\\n::v-deep .svg svg{\\n\\theight: 16px;\\n\\twidth: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div[data-v-0c4ad86c]{position:relative}.load-more[data-v-0c4ad86c]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast)}.multiselect-header[data-v-0c4ad86c]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-0c4ad86c]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages.icon-loading-small[data-v-0c4ad86c]{padding-left:32px;background-position:9px center}#list-refreshing[data-v-0c4ad86c]{position:absolute;left:calc(50% - 8px);overflow:hidden;padding:12px;background-color:var(--color-main-background);z-index:1;border-radius:var(--border-radius-pill);border:1px solid var(--color-border);top:-24px;opacity:0;transition-property:top,opacity;transition-duration:.5s;transition-timing-function:ease-in-out}#list-refreshing.refreshing[data-v-0c4ad86c]{top:4px;opacity:1}.multiselect-header-enter-active[data-v-0c4ad86c],.multiselect-header-leave-active[data-v-0c4ad86c],.list-enter-active[data-v-0c4ad86c],.list-leave-active[data-v-0c4ad86c]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-0c4ad86c],.multiselect-header-leave-to[data-v-0c4ad86c],.list-enter[data-v-0c4ad86c],.list-leave-to[data-v-0c4ad86c]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-0c4ad86c]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-0c4ad86c]{display:block}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopeList.vue\"],\"names\":[],\"mappings\":\"AAqcA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,6DACC,iBAAA,CACA,8BAAA,CAGD,kCACC,iBAAA,CACA,oBAAA,CACA,eAAA,CACA,YAAA,CACA,6CAAA,CACA,SAAA,CACA,uCAAA,CACA,oCAAA,CACA,SAAA,CACA,SAAA,CACA,+BAAA,CACA,uBAAA,CACA,sCAAA,CAEA,6CACC,OAAA,CACA,SAAA,CAIF,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\ndiv {\\n\\t// So we can align the loading spinner in the Priority inbox\\n\\tposition: relative;\\n}\\n\\n.load-more {\\n\\ttext-align: center;\\n\\tmargin-top: 10px;\\n\\tcursor: pointer;\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n.multiselect-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tbackground-color: var(--color-main-background-translucent);\\n\\tposition: sticky;\\n\\ttop: 0px;\\n\\theight: 48px;\\n\\tz-index: 100;\\n}\\n\\n#load-more-mail-messages {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 50px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages.icon-loading-small {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n\\n#list-refreshing {\\n\\tposition: absolute;\\n\\tleft: calc(50% - 8px);\\n\\toverflow: hidden;\\n\\tpadding: 12px;\\n\\tbackground-color: var(--color-main-background);\\n\\tz-index: 1;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tborder: 1px solid var(--color-border);\\n\\ttop: -24px;\\n\\topacity: 0;\\n\\ttransition-property: top, opacity;\\n\\ttransition-duration: 0.5s;\\n\\ttransition-timing-function: ease-in-out;\\n\\n\\t&.refreshing {\\n\\t\\ttop: 4px;\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\\n.multiselect-header-enter-active,\\n.multiselect-header-leave-active,\\n.list-enter-active,\\n.list-leave-active {\\n\\ttransition: all var(--animation-slow);\\n}\\n\\n.multiselect-header-enter,\\n.multiselect-header-leave-to,\\n.list-enter,\\n.list-leave-to {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\\n#action-label {\\n\\tvertical-align: middle;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t#action-label {\\n\\t\\tdisplay: block;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".fade-enter-active[data-v-d31c7de6],.fade-leave-active[data-v-d31c7de6]{transition:opacity .5s}.fade-enter[data-v-d31c7de6],.fade-leave-to[data-v-d31c7de6]{opacity:0}.wrapper[data-v-d31c7de6]{display:flex;justify-content:space-around;flex-direction:column;flex:1 auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Loading.vue\"],\"names\":[],\"mappings\":\"AAgDA,wEAEC,sBAAA,CAED,6DAEC,SAAA,CAGD,0BACC,YAAA,CACA,4BAAA,CACA,qBAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.fade-enter-active,\\n.fade-leave-active {\\n\\ttransition: opacity 0.5s;\\n}\\n.fade-enter,\\n.fade-leave-to {\\n\\topacity: 0;\\n}\\n\\n.wrapper {\\n\\tdisplay: flex;\\n\\tjustify-content: space-around;\\n\\tflex-direction: column;\\n\\tflex: 1 auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#emptycontent[data-v-4512145e]{margin-top:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EmptyMailboxSection.vue\"],\"names\":[],\"mappings\":\"AAYA,+BACC,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#emptycontent {\\n\\tmargin-top: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nameimportant[data-v-f7652ee8]  #load-more-mail-messages,.namestarred[data-v-f7652ee8]  #load-more-mail-messages{margin-top:0;margin-bottom:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Mailbox.vue\"],\"names\":[],\"mappings\":\"AA4eC,kHACC,YAAA,CACA,iBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// Fix vertical space between sections in priority inbox\\n.nameimportant,\\n.namestarred {\\n\\t::v-deep #load-more-mail-messages {\\n\\t\\tmargin-top: 0;\\n\\t\\tmargin-bottom: 8px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.icon[data-v-3def5510] {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\nh2[data-v-3def5510],\\np[data-v-3def5510] {\\n\\ttext-align: center;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NoMessageSelected.vue\"],\"names\":[],\"mappings\":\";AA2CA;CACA,YAAA;CACA,WAAA;CACA,mBAAA;CACA,qBAAA;CACA,YAAA;AACA;AAEA;;CAEA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<AppContentDetails>\\n\\t\\t<div id=\\\"emptycontent\\\">\\n\\t\\t\\t<div class=\\\"icon icon-mail\\\" />\\n\\t\\t\\t<h2>{{ t('mail', 'No message selected') }}</h2>\\n\\t\\t\\t<p />\\n\\t\\t</div>\\n\\t</AppContentDetails>\\n</template>\\n\\n<script>\\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\\n\\nexport default {\\n\\tname: 'NoMessageSelected',\\n\\tcomponents: {\\n\\t\\tAppContentDetails,\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.icon {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\n\\nh2,\\np {\\n\\ttext-align: center;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-bubble__title[data-v-09fd225b]{max-width:30vw}.user-bubble-email[data-v-09fd225b]{margin:10px}.contact-menu[data-v-09fd225b]{display:flex;flex-wrap:wrap}.contact-popover[data-v-09fd225b]{display:inline-block}.contact-wrapper[data-v-09fd225b]{padding:10px;min-width:300px}.contact-wrapper a[data-v-09fd225b]{opacity:.7}.contact-wrapper a[data-v-09fd225b]:hover{opacity:1}.contact-input-wrapper[data-v-09fd225b]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-09fd225b],.contact-input-wrapper .multiselect[data-v-09fd225b]{width:100%}.icon-clippy[data-v-09fd225b],.icon-user[data-v-09fd225b],.icon-reply[data-v-09fd225b],.icon-checkmark[data-v-09fd225b],.icon-close[data-v-09fd225b],.icon-add[data-v-09fd225b]{display:flex;align-items:center;height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (min-width: 600px){.icon-clippy[data-v-09fd225b],.icon-user[data-v-09fd225b],.icon-reply[data-v-09fd225b],.icon-checkmark[data-v-09fd225b],.icon-close[data-v-09fd225b],.icon-add[data-v-09fd225b]{background-position:12px center}}.contact-existing[data-v-09fd225b]{margin-bottom:10px;font-size:small}.contact-existing .icon-details[data-v-09fd225b]{padding-left:34px;background-position:10px center;text-align:left}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientBubble.vue\"],\"names\":[],\"mappings\":\"AA4NA,qCACC,cAAA,CAED,oCACC,WAAA,CAGD,+BACC,YAAA,CACA,cAAA,CAED,kCACC,oBAAA,CAED,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAGF,wCACC,eAAA,CACG,kBAAA,CACH,mGAEC,UAAA,CAGF,gLAMC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,cAAA,CACA,QAAA,CACA,0BAAA,CAED,0CACC,gLAMC,+BAAA,CAAA,CAIF,mCACC,kBAAA,CACA,eAAA,CACA,iDACC,iBAAA,CACA,+BAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.user-bubble__title {\\n\\tmax-width: 30vw;\\n}\\n.user-bubble-email {\\n\\tmargin: 10px;\\n}\\n\\n.contact-menu {\\n\\tdisplay: flex;\\n\\tflex-wrap: wrap;\\n}\\n.contact-popover {\\n\\tdisplay: inline-block;\\n}\\n.contact-wrapper {\\n\\tpadding:10px;\\n\\tmin-width: 300px;\\n\\n\\ta {\\n\\t\\topacity: 0.7;\\n\\t}\\n\\ta:hover {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n.contact-input-wrapper {\\n\\tmargin-top: 10px;\\n    margin-bottom: 10px;\\n\\tinput,\\n\\t.multiselect {\\n\\t\\twidth: 100%;\\n\\t}\\n}\\n.icon-clippy,\\n.icon-user,\\n.icon-reply,\\n.icon-checkmark,\\n.icon-close,\\n.icon-add {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\theight: 44px;\\n\\tmin-width: 44px;\\n\\tmargin: 0;\\n\\tpadding: 9px 18px 10px 32px;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-clippy,\\n\\t.icon-user,\\n\\t.icon-reply,\\n\\t.icon-checkmark,\\n\\t.icon-close,\\n\\t.icon-add {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n\\n.contact-existing {\\n\\tmargin-bottom: 10px;\\n\\tfont-size: small;\\n\\t.icon-details {\\n\\t\\tpadding-left: 34px;\\n\\t\\tbackground-position: 10px center;\\n\\t\\ttext-align: left;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-4ec97965] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.event[data-v-4ec97965] {\\n\\tflex-grow: 1;\\n}\\n.event-name[data-v-4ec97965] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/EventReservation.vue\"],\"names\":[],\"mappings\":\";AAoJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"event\\\">\\n\\t\\t\\t<div class=\\\"event-name\\\">\\n\\t\\t\\t\\t{{ eventName }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"location\\\" class=\\\"venue\\\">\\n\\t\\t\\t\\t{{ location }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"date\\\">\\n\\t\\t\\t\\t{{ date }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"time\\\">\\n\\t\\t\\t\\t{{ time }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'EventReservation',\\n\\tcomponents: { CalendarImport },\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\teventName() {\\n\\t\\t\\treturn this.data.reservationFor.name\\n\\t\\t},\\n\\t\\ttime() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\\n\\t\\t},\\n\\t\\tdate() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\\n\\t\\t},\\n\\t\\tlocation() {\\n\\t\\t\\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationFor.location.name\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'startDate' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tgetEndDateTime(event) {\\n\\t\\t\\tif ('endDate' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\\n\\t\\t\\t} else if ('startDate' in this.data.reservationFor) {\\n\\t\\t\\t\\t// Assume it's 2h and user will adjust if necessary\\n\\t\\t\\t\\t// TODO: handle 'duration' https://schema.org/Event\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\\n\\n\\t\\t\\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\\n\\t\\t\\tconst end = this.getEndDateTime(this.data.reservationFor)\\n\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\\n\\n\\t\\t\\tif ('location' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\\n\\t\\t\\t\\tif ('geo' in this.data.reservationFor.location) {\\n\\t\\t\\t\\t\\t// https://www.kanzaki.com/docs/ical/geo.html\\n\\t\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t\\t'GEO',\\n\\t\\t\\t\\t\\t\\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\\n\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.event {\\n\\tflex-grow: 1;\\n}\\n\\n.event-name {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-2a317718] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-2a317718],\\n.arrival[data-v-2a317718] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-2a317718],\\n.arrival[data-v-2a317718],\\n.connection[data-v-2a317718] {\\n\\tjustify-content: center;\\n}\\n.iata[data-v-2a317718] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.airport[data-v-2a317718] {\\n\\tfont-size: large;\\n}\\n.departure[data-v-2a317718] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-2a317718] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/FlightReservation.vue\"],\"names\":[],\"mappings\":\";AA2JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><AirplaneIcon :title=\\\"t('mail', 'Airplane')\\\" /></div>\\n\\t\\t\\t<div>{{ flightNumber }}</div>\\n\\t\\t\\t<div v-if=\\\"reservation\\\">\\n\\t\\t\\t\\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<ArrowIcon decorative />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'FlightReservation',\\n\\tcomponents: {\\n\\t\\tAirplaneIcon,\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\\n\\t\\t},\\n\\t\\tflightNumber() {\\n\\t\\t\\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\\n\\t\\t},\\n\\t\\treservation() {\\n\\t\\t\\tif (!('reservationNumber' in this.data)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\\n\\t\\t\\t\\t\\tflightNr: this.flightNumber,\\n\\t\\t\\t\\t\\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\\n\\t\\t\\t\\t\\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\\n\\t\\t\\t\\t})\\n\\t\\t\\t)\\n\\n\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\\n\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.iata {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.airport {\\n\\tfont-size: large;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-08dee74f] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-08dee74f],\\n.arrival[data-v-08dee74f] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-08dee74f],\\n.arrival[data-v-08dee74f],\\n.connection[data-v-08dee74f] {\\n\\tjustify-content: center;\\n}\\n.station[data-v-08dee74f] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.departure[data-v-08dee74f] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-08dee74f] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/TrainReservation.vue\"],\"names\":[],\"mappings\":\";AA+JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><TrainIcon :title=\\\"t('mail', 'Train')\\\" /></div>\\n\\t\\t\\t<div>{{ trainNumber }}</div>\\n\\t\\t\\t<div><ArrowIcon decorative /></div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\nimport TrainIcon from 'vue-material-design-icons/Train'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'TrainReservation',\\n\\tcomponents: {\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t\\tTrainIcon,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\\n\\t\\t\\t}\\n\\t\\t\\tif ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureDay).format('L')\\n\\t\\t\\t}\\n\\t\\t\\treturn undefined\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\\n\\t\\t},\\n\\t\\ttrainNumber() {\\n\\t\\t\\treturn this.data.reservationFor.trainNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\\n\\t\\t\\t\\t|| 'departureDay' in this.data.reservationFor\\n\\t\\t\\t)\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tif ('trainNumber' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\ttrainNr: this.data.reservationFor.trainNumber,\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', 'Train from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t}\\n\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\\n\\t\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\\n\\t\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\\n\\t\\t\\t} else if ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst date = moment(this.data.reservationFor.departureDay).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.station {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachment[data-v-016cf9f4]{position:relative;display:inline-block;width:calc(100% - 32px);padding:16px}.attachment[data-v-016cf9f4]:hover,.attachment span[data-v-016cf9f4]:hover{background-color:var(--color-background-hover);cursor:pointer}.mail-attached-image[data-v-016cf9f4]{display:block;max-width:100%;border-radius:var(--border-radius);cursor:pointer}.attachment-import-popover[data-v-016cf9f4]{right:32px;top:42px}.mail-attached-image[data-v-016cf9f4]:hover{opacity:.8}.attachment-name[data-v-016cf9f4]{display:inline-block;width:calc(100% - 72px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;margin-bottom:20px}.attachment-size[data-v-016cf9f4]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5}.attachment-icon[data-v-016cf9f4]{vertical-align:middle;text-align:left;margin-bottom:20px}.action-item[data-v-016cf9f4]{display:inline-block !important;position:relative !important}.mail-message-attachments[data-v-016cf9f4]{overflow-x:auto;overflow-y:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachment.vue\"],\"names\":[],\"mappings\":\"AAiNA,6BACC,iBAAA,CACA,oBAAA,CACA,uBAAA,CACA,YAAA,CAGD,2EAEC,8CAAA,CACA,cAAA,CAGD,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CACA,cAAA,CAED,4CACC,UAAA,CACA,QAAA,CAED,4CACC,UAAA,CAED,kCACC,oBAAA,CACA,uBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CACA,kBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CAGD,kCACC,qBAAA,CACA,eAAA,CACA,kBAAA,CAED,8BACC,+BAAA,CACA,4BAAA,CAED,2CACC,eAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachment {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 32px);\\n\\tpadding: 16px;\\n}\\n\\n.attachment:hover,\\n.attachment span:hover {\\n\\tbackground-color: var(--color-background-hover);\\n\\tcursor: pointer;\\n}\\n\\n.mail-attached-image {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tborder-radius: var(--border-radius);\\n\\tcursor: pointer;\\n}\\n.attachment-import-popover {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n.mail-attached-image:hover {\\n\\topacity: 0.8;\\n}\\n.attachment-name {\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 72px);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n\\tmargin-bottom: 20px;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n\\n.attachment-icon {\\n\\tvertical-align: middle;\\n\\ttext-align: left;\\n\\tmargin-bottom: 20px;\\n}\\n.action-item {\\n\\tdisplay: inline-block !important;\\n\\tposition: relative !important;\\n}\\n.mail-message-attachments {\\n\\toverflow-x: auto;\\n\\toverflow-y: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-4507de1c] .modal-wrapper .modal-container{background-color:unset !important;box-shadow:none !important;height:auto !important;top:unset !important}[data-v-4507de1c] .modal-wrapper .modal__attachment{display:flex;margin:0 auto;max-width:min(850px,85vw);max-height:85vh;background-color:var(--color-main-background)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/AttachmentImageViewer.vue\"],\"names\":[],\"mappings\":\"AA4BC,kDACC,iCAAA,CACA,0BAAA,CACA,sBAAA,CACA,oBAAA,CAGD,oDACC,YAAA,CACA,aAAA,CACA,yBAAA,CACA,eAAA,CACA,6CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .modal-wrapper {\\n\\t.modal-container {\\n\\t\\tbackground-color: unset !important;\\n\\t\\tbox-shadow: none !important;\\n\\t\\theight: auto !important;\\n\\t\\ttop: unset !important;\\n\\t}\\n\\n\\t.modal__attachment {\\n\\t\\tdisplay: flex;\\n\\t\\tmargin: 0 auto;\\n\\t\\tmax-width: min(850px, 85vw);\\n\\t\\tmax-height: 85vh;\\n\\t\\tbackground-color: var(--color-main-background);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachments{width:230px;position:relative;display:flex}.attachments-button-wrapper{text-align:center}.attachments-save-to-cloud{display:inline-block;margin:16px;background-position:16px center;padding:12px 12px 12px 37px !important}.oc-dialog{z-index:10000000}.mail-message-attachments{overflow-x:auto;overflow-y:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachments.vue\"],\"names\":[],\"mappings\":\"AA2IA,aACC,WAAA,CACC,iBAAA,CACA,YAAA,CAKF,4BACC,iBAAA,CAED,2BACC,oBAAA,CACA,WAAA,CACA,+BAAA,CACC,sCAAA,CAEF,WACC,gBAAA,CAED,0BACC,eAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachments {\\n\\twidth: 230px;\\n  position: relative;\\n  display: flex;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-button-wrapper {\\n\\ttext-align: center;\\n}\\n.attachments-save-to-cloud {\\n\\tdisplay: inline-block;\\n\\tmargin: 16px;\\n\\tbackground-position: 16px center;\\n  padding: 12px 12px 12px 37px !important;\\n}\\n.oc-dialog {\\n\\tz-index: 10000000;\\n}\\n.mail-message-attachments {\\n\\toverflow-x: auto;\\n\\toverflow-y: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MdnRequest.vue\"],\"names\":[],\"mappings\":\"AA4DA,+CACC,kBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-has-mdn-request {\\n\\twhite-space: normal;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mail-content[data-v-812ccd96] {\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageEncryptedBody.vue\"],\"names\":[],\"mappings\":\";AA8CA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div>\\n\\t\\t<div v-if=\\\"mailvelope\\\" id=\\\"mail-content\\\">\\n\\t\\t\\t<MdnRequest :message=\\\"message\\\" />\\n\\t\\t</div>\\n\\t\\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport { getMailvelope } from '../crypto/mailvelope'\\nimport MdnRequest from './MdnRequest'\\n\\nexport default {\\n\\tname: 'MessageEncryptedBody',\\n\\tcomponents: { MdnRequest },\\n\\tprops: {\\n\\t\\tbody: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfrom: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: undefined,\\n\\t\\t},\\n\\t\\tmessage: {\\n\\t\\t\\trequired: true,\\n\\t\\t\\ttype: Object,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tmailvelope: false,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tthis.mailvelope = await getMailvelope()\\n\\t\\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\\n\\t\\t\\tsenderAddress: this.from,\\n\\t\\t})\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mail-content {\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-f2e16bd6]{margin-left:48px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-f2e16bd6]{margin-left:8px}#message-container[data-v-f2e16bd6]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-f2e16bd6]{max-height:50vh;overflow-y:auto}[data-v-f2e16bd6] .icon-toggle{background-image:var(--icon-toggle-000) !important}[data-v-f2e16bd6] .action-item__menutoggle--with-title{background-color:var(--color-background-hover) !important}.message-frame[data-v-f2e16bd6]{width:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageHTMLBody.vue\"],\"names\":[],\"mappings\":\"AAgJA,+BACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,eAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,+BACC,kDAAA,CAED,uDACC,yDAAA,CAED,gCACC,UAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// account for 8px margin on iframe body\\n#mail-content {\\n\\tmargin-left: 48px;\\n\\tmargin-top: 2px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tbackground-color: #FFFFFF;\\n}\\n#mail-message-has-blocked-content {\\n\\tmargin-left: 8px;\\n}\\n\\n#message-container {\\n\\tflex: 1;\\n\\tdisplay: flex;\\n\\tbackground-color: #FFFFFF;\\n\\n\\t// TODO: collapse quoted text and remove inner scrollbar\\n\\t&.scroll {\\n\\t\\tmax-height: 50vh;\\n\\t\\toverflow-y: auto;\\n\\t}\\n}\\n::v-deep .icon-toggle {\\n\\tbackground-image: var(--icon-toggle-000) !important;\\n}\\n::v-deep .action-item__menutoggle--with-title {\\n\\tbackground-color: var(--color-background-hover) !important;\\n}\\n.message-frame {\\n\\twidth: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".quoted-text{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AAqEA,aACC,2CAAA,CAGC,oBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.quoted-text {\\n\\tcolor: var(--color-text-maxcontrast)\\n\\n\\tsummary {\\n\\t\\tcursor: pointer\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-9fd9f8e0],.mail-signature[data-v-9fd9f8e0]{white-space:pre-wrap}.mail-signature[data-v-9fd9f8e0],.quoted[data-v-9fd9f8e0]{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AA8EA,gEACC,oBAAA,CAED,0DACC,2CAAA,CAGC,oBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-content, .mail-signature {\\n\\twhite-space: pre-wrap;\\n}\\n.mail-signature, .quoted {\\n\\tcolor: var(--color-text-maxcontrast)\\n\\n\\tsummary {\\n\\t\\tcursor: pointer\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger>.action-item[data-v-0c1b32ff]{border-radius:22px;background-color:var(--color-background-darker)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Message.vue\"],\"names\":[],\"mappings\":\"AAqGA,kDACC,kBAAA,CACA,+CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > .action-item {\\n\\tborder-radius: 22px;\\n\\tbackground-color: var(--color-background-darker);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".source-modal[data-v-44419322]  .modal-container{height:800px}.source-modal .source-modal-content[data-v-44419322]{width:100%;height:100%;overflow-y:scroll !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuEnvelope.vue\"],\"names\":[],\"mappings\":\"AA0eC,iDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.source-modal {\\n\\t::v-deep .modal-container {\\n\\t\\theight: 800px;\\n\\t}\\n\\n\\t.source-modal-content {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\toverflow-y: scroll !important;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sender[data-v-494361d8]{margin-left:8px}.centered-sender[data-v-494361d8]{margin-top:8px}.right[data-v-494361d8]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;height:44px}.right .app-content-list-item-menu[data-v-494361d8]{margin-left:4px}.right .timestamp[data-v-494361d8]{margin-right:10px;font-size:small;white-space:nowrap;margin-bottom:0}.button[data-v-494361d8]{color:var(--color-main-background)}.button[data-v-494361d8]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-494361d8]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.avatardiv[data-v-494361d8]{display:inline-block;margin-bottom:-23px}.subject[data-v-494361d8]{margin-left:8px;cursor:default}.envelope[data-v-494361d8]{display:flex;flex-direction:column;box-shadow:0 0 10px var(--color-box-shadow);border-radius:16px;margin-left:10px;margin-right:10px;background-color:var(--color-main-background);padding-bottom:20px}.envelope+.envelope[data-v-494361d8]{margin-top:-20px}.envelope[data-v-494361d8]:last-of-type{margin-bottom:10px;padding-bottom:0}.envelope--header[data-v-494361d8]{position:relative;display:flex;padding:10px;border-radius:var(--border-radius)}.envelope--header[data-v-494361d8]:hover{background-color:var(--color-background-hover);border-radius:16px}.left[data-v-494361d8]{flex-grow:1}.icon-important[data-v-494361d8]  path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-494361d8]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex}.icon-important.app-content-list-item-star[data-v-494361d8]:hover,.icon-important.app-content-list-item-star[data-v-494361d8]:focus{opacity:.5}.app-content-list-item-star.icon-starred[data-v-494361d8]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer}.app-content-list-item-star.icon-junk[data-v-494361d8]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer;opacity:.2}.left[data-v-494361d8]:not(.seen){font-weight:bold}.tag-group__label[data-v-494361d8]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-494361d8]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-494361d8]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.envelope--header.list-item-style[data-v-494361d8]{border-radius:16px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ThreadEnvelope.vue\"],\"names\":[],\"mappings\":\"AA6SA,yBACC,eAAA,CAED,kCACC,cAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAKH,4BACC,oBAAA,CACA,mBAAA,CAED,0BACC,eAAA,CACA,cAAA,CAGD,2BACC,YAAA,CACA,qBAAA,CACA,2CAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CACA,6CAAA,CACA,mBAAA,CAEA,qCACC,gBAAA,CAGD,wCACC,kBAAA,CACA,gBAAA,CAIF,mCACC,iBAAA,CACA,YAAA,CACA,YAAA,CACA,kCAAA,CAEA,yCACC,8CAAA,CACA,kBAAA,CAGF,uBACC,WAAA,CAGA,uCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CAEA,oIAEC,UAAA,CAIH,0DACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CAED,uDACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CACA,UAAA,CAED,kCACC,gBAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,mDACC,kBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.sender {\\n\\tmargin-left: 8px;\\n}\\n.centered-sender {\\n\\tmargin-top: 8px;\\n}\\n\\n.right {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: flex-end;\\n\\tmargin-left: 10px;\\n\\theight: 44px;\\n\\n\\t.app-content-list-item-menu {\\n\\t\\tmargin-left: 4px;\\n\\t}\\n\\n\\t.timestamp {\\n\\t\\tmargin-right: 10px;\\n\\t\\tfont-size: small;\\n\\t\\twhite-space: nowrap;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n}\\n.button {\\n\\tcolor: var(--color-main-background);\\n\\t&:not(.active):not(.primary) {\\n\\t\\tdisplay: none;\\n\\n\\t\\t&.primary {\\n\\t\\t\\tbackground-color: var(--color-primary);\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tmargin-bottom: 0;\\n\\n\\t\\t}\\n\\t}\\n}\\n.avatardiv {\\n\\tdisplay: inline-block;\\n\\tmargin-bottom: -23px;\\n}\\n.subject {\\n\\tmargin-left: 8px;\\n\\tcursor: default;\\n}\\n\\n.envelope {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tbox-shadow: 0 0 10px var(--color-box-shadow);\\n\\tborder-radius: 16px;\\n\\tmargin-left: 10px;\\n\\tmargin-right: 10px;\\n\\tbackground-color: var(--color-main-background);\\n\\tpadding-bottom: 20px;\\n\\n\\t& + .envelope {\\n\\t\\tmargin-top: -20px;\\n\\t}\\n\\n\\t&:last-of-type {\\n\\t\\tmargin-bottom: 10px;\\n\\t\\tpadding-bottom: 0;\\n\\t}\\n}\\n\\n.envelope--header {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\tpadding: 10px;\\n\\tborder-radius: var(--border-radius);\\n\\n\\t&:hover {\\n\\t\\tbackground-color: var(--color-background-hover);\\n\\t\\tborder-radius: 16px;\\n\\t}\\n}\\n.left {\\n\\tflex-grow: 1;\\n}\\n.icon-important {\\n\\t::v-deep path {\\n\\t\\tfill: #ffcc00;\\n\\t\\tstroke: var(--color-main-background);\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t&.app-content-list-item-star {\\n\\t\\tbackground-image: none;\\n\\t\\tposition: absolute;\\n\\t\\topacity: 1;\\n\\t\\twidth: 16px;\\n\\t\\theight: 16px;\\n\\t\\tmargin-left: -1px;\\n\\t\\tdisplay: flex;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tmargin-left: 27px;\\n\\tcursor: pointer;\\n}\\n.app-content-list-item-star.icon-junk {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tmargin-left: 27px;\\n\\tcursor: pointer;\\n\\topacity: .2;\\n}\\n.left:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.envelope--header.list-item-style {\\n\\tborder-radius: 16px;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-message{flex-grow:1}#mail-message .icon-loading:only-child:after{margin-top:20px}.mail-message-body{flex:1;margin-bottom:60px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:60px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content{margin:10px 38px 0 60px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0 !important;padding:9px 18px 10px 32px !important}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}.app-content-details,.splitpanes__pane-details{max-width:unset !important;width:100% !important}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.splitpanes__pane-list,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Thread.vue\"],\"names\":[],\"mappings\":\"AAgQA,cACC,WAAA,CAGC,6CACC,eAAA,CAKH,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,cACC,uBAAA,CAGD,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAGD,wCAEC,WAAA,CACA,cAAA,CACA,mBAAA,CACA,qCAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAED,+CAEC,0BAAA,CACA,qBAAA,CAED,+KASC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-message {\\n\\tflex-grow: 1;\\n\\n\\t.icon-loading {\\n\\t\\t&:only-child:after {\\n\\t\\t\\tmargin-top: 20px;\\n\\t\\t}\\n\\t}\\n}\\n\\n.mail-message-body {\\n\\tflex: 1;\\n\\tmargin-bottom: 60px;\\n\\tposition: relative;\\n}\\n\\n#mail-thread-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\\tpadding: 30px 0;\\n\\t// somehow ios doesn't care about this !important rule\\n\\t// so we have to manually set left/right padding to chidren\\n\\t// for 100% to be used\\n\\tbox-sizing: content-box !important;\\n\\theight: 44px;\\n\\twidth: 100%;\\n\\n\\tz-index: 100;\\n\\tposition: fixed; // ie fallback\\n\\tposition: -webkit-sticky; // ios/safari fallback\\n\\tposition: sticky;\\n\\ttop: 0;\\n\\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\\n\\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n}\\n\\n#mail-thread-header-fields {\\n\\t// initial width\\n\\twidth: 0;\\n\\tpadding-left: 60px;\\n\\t// grow and try to fill 100%\\n\\tflex: 1 1 auto;\\n\\th2,\\n\\tp {\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tpadding-bottom: 7px;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n\\n\\t.transparency {\\n\\t\\topacity: 0.6;\\n\\t\\ta {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\t}\\n}\\n\\n.attachment-popover {\\n\\tposition: sticky;\\n\\tbottom: 12px;\\n\\ttext-align: center;\\n}\\n\\n.tooltip-inner {\\n\\ttext-align: left;\\n}\\n\\n#mail-content {\\n\\tmargin: 10px 38px 0 60px;\\n}\\n\\n#mail-content iframe {\\n\\twidth: 100%;\\n}\\n\\n#show-images-text {\\n\\tdisplay: none;\\n}\\n\\n#mail-content a,\\n.mail-signature a {\\n\\tcolor: #07d;\\n\\tborder-bottom: 1px dotted #07d;\\n\\ttext-decoration: none;\\n\\tword-wrap: break-word;\\n}\\n\\n.icon-reply-white,\\n.icon-reply-all-white {\\n\\theight: 44px;\\n\\tmin-width: 44px;\\n\\tmargin: 0 !important;\\n\\tpadding: 9px 18px 10px 32px !important;\\n}\\n\\n/* Show action button label and move icon to the left\\n   on screens larger than 600px */\\n@media only screen and (max-width: 600px) {\\n\\t.action-label {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-reply-white,\\n\\t.icon-reply-all-white {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n\\n@media print {\\n\\t#mail-thread-header-fields {\\n\\t\\tposition: relative;\\n\\t}\\n\\t.app-content-details,\\n\\t.splitpanes__pane-details {\\n\\t\\tmax-width: unset !important;\\n\\t\\twidth: 100% !important;\\n\\t}\\n\\t#header,\\n\\t.app-navigation,\\n\\t#reply-composer,\\n\\t#forward-button,\\n\\t#mail-message-has-blocked-content,\\n\\t.app-content-list,\\n\\t.message-composer,\\n\\t.splitpanes__pane-list,\\n\\t.mail-message-attachments {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\t.app-content {\\n\\t\\tmargin-left: 0 !important;\\n\\t}\\n\\t.mail-message-body {\\n\\t\\tmargin-bottom: 0 !important;\\n\\t}\\n}\\n\\n.message-source {\\n\\tfont-family: monospace;\\n\\twhite-space: pre-wrap;\\n\\tuser-select: text;\\n}\\n\\n.avatar-header {\\n\\tmax-height: 24px;\\n\\toverflow: hidden;\\n}\\n.avatar-more {\\n\\tdisplay: inline;\\n\\tbackground-color: var(--color-background-dark);\\n\\tpadding: 0px 0px 1px 1px;\\n\\tborder-radius: 10px;\\n\\tcursor: pointer;\\n}\\n.avatar-hidden {\\n\\tvisibility: hidden;\\n}\\n.popover__wrapper {\\n\\tmax-width: 500px;\\n}\\n\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: none;\\n}\\n.user-bubble__wrapper {\\n\\tmargin-right: 4px;\\n}\\n.user-bubble__title {\\n\\tcursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger[data-v-443131b3]>{z-index:1}.icon-info[data-v-443131b3]{background-image:var(--icon-info-000)}.important-info[data-v-443131b3]{max-width:230px;padding:16px}.app-content-list[data-v-443131b3]{display:flex}.app-content-list-item[data-v-443131b3]:hover{background:rgba(0,0,0,0)}.button[data-v-443131b3]{background-color:var(--color-main-background);width:44px;height:44px;border:0;margin-bottom:17px}.button[data-v-443131b3]:hover,.button[data-v-443131b3]:focus{background-color:var(--color-background-dark)}#app-content-wrapper[data-v-443131b3]{display:flex}.envelope-list[data-v-443131b3]{max-height:calc(100vh - var(--header-height));overflow-y:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailboxThread.vue\"],\"names\":[],\"mappings\":\"AAoOA,sCACC,SAAA,CAGD,4BACC,qCAAA,CAGD,iCACC,eAAA,CACA,YAAA,CAGD,mCAEC,YAAA,CAGD,8CACC,wBAAA,CAGD,yBACC,6CAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,kBAAA,CAEA,8DAEC,6CAAA,CAIF,sCACC,YAAA,CAGD,gCACC,6CAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > {\\n\\tz-index: 1;\\n}\\n\\n.icon-info {\\n\\tbackground-image: var(--icon-info-000);\\n}\\n\\n.important-info {\\n\\tmax-width: 230px;\\n\\tpadding: 16px;\\n}\\n\\n.app-content-list {\\n\\t// Required for centering the loading indicator\\n\\tdisplay: flex;\\n}\\n\\n.app-content-list-item:hover {\\n\\tbackground: transparent;\\n}\\n\\n.button {\\n\\tbackground-color: var(--color-main-background);\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tborder: 0;\\n\\tmargin-bottom: 17px;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t}\\n}\\n\\n#app-content-wrapper {\\n\\tdisplay: flex;\\n}\\n\\n.envelope-list {\\n\\tmax-height: calc(100vh - var(--header-height));\\n\\toverflow-y: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".new-message-attachments ul[data-v-3f65042e]{display:flex;flex-wrap:wrap;max-height:140px;overflow:auto}.new-message-attachments li[data-v-3f65042e]{padding:10px}.new-message-attachments-action[data-v-3f65042e]{display:inline-block;vertical-align:middle;padding:10px;opacity:.5}.new-message-attachment-name[data-v-3f65042e]{display:inline-block}.new-message-attachment-name.upload-ongoing[data-v-3f65042e]{color:#0082c9}.new-message-attachment-name.upload-warning[data-v-3f65042e]{color:#d2322d}.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-3f65042e]{border:1px solid #e9322d;background:#e9322d}.attachments-upload-progress[data-v-3f65042e]{display:flex}.attachments-upload-progress>div[data-v-3f65042e]{padding-left:3px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachments.vue\"],\"names\":[],\"mappings\":\"AAyOC,6CACC,YAAA,CACA,cAAA,CAEA,gBAAA,CACA,aAAA,CAED,6CACC,YAAA,CAIF,iDACC,oBAAA,CACA,qBAAA,CACA,YAAA,CACA,UAAA,CAID,8CACC,oBAAA,CAID,6DACC,aAAA,CAID,6DACC,aAAA,CAID,mFACC,wBAAA,CACA,kBAAA,CAGD,8CACC,YAAA,CAGD,kDACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.new-message-attachments {\\n\\tul {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\t// 2 and a half attachment height\\n\\t\\tmax-height: 140px;\\n\\t\\toverflow: auto;\\n\\t}\\n\\tli {\\n\\t\\tpadding: 10px;\\n\\t}\\n}\\n\\n.new-message-attachments-action {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 10px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\\n.attachments-upload-progress {\\n\\tdisplay: flex;\\n}\\n\\n.attachments-upload-progress > div {\\n\\tpadding-left: 3px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.multiselect\\n\\t.multiselect__tags\\n\\t.multiselect__tags-wrap\\n\\t.multiselect__tag--recipient[data-v-796d2733] {\\n\\tpadding: 0 25px 0 0;\\n\\tborder-radius: 25px;\\n\\tborder-color: transparent;\\n\\tbackground-color: var(--color-background-dark);\\n}\\n.multiselect__tag--recipient .action-item--single[data-v-796d2733] {\\n\\twidth: auto;\\n\\tmin-width: 24px;\\n\\theight: 24px;\\n\\tmin-height: 24px;\\n\\tposition: absolute;\\n\\tright: 0;\\n}\\n.multiselect__tag--recipient .action-item--single .material-design-icon[data-v-796d2733] {\\n\\theight: 24px;\\n\\twidth: 24px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientListItem.vue\"],\"names\":[],\"mappings\":\";AA4CA;;;;CAIA,mBAAA;CACA,mBAAA;CACA,yBAAA;CACA,8CAAA;AACA;AACA;CACA,WAAA;CACA,eAAA;CACA,YAAA;CACA,gBAAA;CACA,kBAAA;CACA,QAAA;AACA;AACA;CACA,YAAA;CACA,WAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"multiselect__tag multiselect__tag--recipient\\\">\\n\\t\\t<ListItemIcon\\n\\t\\t\\t:no-margin=\\\"true\\\"\\n\\t\\t\\t:title=\\\"option.label\\\"\\n\\t\\t\\t:avatar-size=\\\"24\\\" />\\n\\t\\t<Actions>\\n\\t\\t\\t<ActionButton @click.prevent=\\\"removeRecipient(option)\\\">\\n\\t\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t\\t<Close :size=\\\"20\\\" />\\n\\t\\t\\t\\t</template>\\n\\t\\t\\t</ActionButton>\\n\\t\\t</Actions>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ListItemIcon from '@nextcloud/vue/dist/Components/ListItemIcon'\\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\\nimport Close from 'vue-material-design-icons/Close'\\nexport default {\\n\\tname: 'RecipientListItem',\\n\\tcomponents: {\\n\\t\\tListItemIcon,\\n\\t\\tActions,\\n\\t\\tActionButton,\\n\\t\\tClose,\\n\\t},\\n\\tprops: {\\n\\t\\toption: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tremoveRecipient(option, field) {\\n\\t\\t\\tthis.$emit('remove-recipient', option, field)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.multiselect\\n\\t.multiselect__tags\\n\\t.multiselect__tags-wrap\\n\\t.multiselect__tag--recipient {\\n\\tpadding: 0 25px 0 0;\\n\\tborder-radius: 25px;\\n\\tborder-color: transparent;\\n\\tbackground-color: var(--color-background-dark);\\n}\\n.multiselect__tag--recipient .action-item--single {\\n\\twidth: auto;\\n\\tmin-width: 24px;\\n\\theight: 24px;\\n\\tmin-height: 24px;\\n\\tposition: absolute;\\n\\tright: 0;\\n}\\n.multiselect__tag--recipient .action-item--single .material-design-icon {\\n\\theight: 24px;\\n\\twidth: 24px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mailvelope-composer[data-v-1320c887] {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailvelopeEditor.vue\"],\"names\":[],\"mappings\":\";AA6EA;CACA,WAAA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"mailvelope-composer\\\" />\\n</template>\\n\\n<script>\\nimport logger from '../logger'\\nimport { isPgpgMessage } from '../crypto/pgp'\\n\\nexport default {\\n\\tname: 'MailvelopeEditor',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\trecipients: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tquotedText: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t\\tisReplyOrForward: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\tdefault: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\teditor: undefined,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\\n\\t\\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\\n\\n\\t\\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\\n\\t\\t\\tquotedMail: isEncrypted ? quotedMail : undefined,\\n\\t\\t})\\n\\t},\\n\\tmethods: {\\n\\t\\tasync pull() {\\n\\t\\t\\tconst recipients = this.recipients.map((r) => r.email)\\n\\t\\t\\tlogger.info('encrypting message', { recipients })\\n\\t\\t\\tconst armored = await this.editor.encrypt(recipients)\\n\\t\\t\\tlogger.info('message encryted', { armored })\\n\\n\\t\\t\\tthis.$emit('input', armored)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mailvelope-composer {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message-composer[data-v-673cf596]{margin:0;z-index:100;display:flex;flex-direction:column;height:100%;max-height:100%}.composer-actions[data-v-673cf596]{position:sticky;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-fields[data-v-673cf596]{display:flex;border-top:1px solid var(--color-border);align-items:flex-start}.composer-fields .multiselect.multiselect--multiple[data-v-673cf596]::after{position:absolute;right:0;top:auto;bottom:8px}.composer-fields .multiselect__tag[data-v-673cf596]{position:relative}.composer-fields.mail-account[data-v-673cf596]{border-top:none;padding-top:10px}.composer-fields.mail-account>.multiselect[data-v-673cf596]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-673cf596],.composer-fields input[data-v-673cf596],.composer-fields TextEditor[data-v-673cf596]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .composer-fields--custom[data-v-673cf596]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-top:5px;width:calc(100% - 120px)}.composer-fields .composer-fields--custom button[data-v-673cf596]{margin-top:0;background-color:rgba(0,0,0,0);border:none;opacity:.5}.composer-fields .composer-fields--custom button.active[data-v-673cf596],.composer-fields .composer-fields--custom button[data-v-673cf596]:active{opacity:1}.composer-fields .composer-fields--custom .multiselect[data-v-673cf596]{width:calc(100% - 150px)}.composer-fields .multiselect[data-v-673cf596]{margin-right:12px}.subject[data-v-673cf596]{font-size:20px;font-weight:bold;margin:0;padding:24px 20px}.warning-box[data-v-673cf596]{padding:5px 12px;border-radius:0}.message-editor[data-v-673cf596]{flex:1 1 100%;min-height:0}.message-body[data-v-673cf596]{height:100%;width:100%;margin:0;border:none !important;outline:none !important;box-shadow:none !important;padding-top:12px;padding-bottom:12px;padding-left:20px;-webkit-user-select:text;user-select:text}.draft-status[data-v-673cf596]{padding:2px;opacity:.5;font-size:small;display:block}.from-label[data-v-673cf596],.to-label[data-v-673cf596],.copy-toggle[data-v-673cf596],.cc-label[data-v-673cf596],.bcc-label[data-v-673cf596]{padding-top:12px;padding-bottom:12px;padding-right:20px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.bcc-label[data-v-673cf596]{top:initial;bottom:0}.copy-toggle[data-v-673cf596]{cursor:pointer;width:initial}.copy-toggle[data-v-673cf596]:hover,.copy-toggle[data-v-673cf596]:focus{color:var(--color-main-text)}.reply[data-v-673cf596]{min-height:100px}[data-v-673cf596] .multiselect .multiselect__tags{border:none !important}[data-v-673cf596] [data-select=create] .avatardiv--unknown{background:var(--color-text-maxcontrast) !important}[data-v-673cf596] .multiselect.opened .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap}.submit-message.send.primary.icon-confirm-white[data-v-673cf596]{color:var(--color-main-background)}.sending-hint[data-v-673cf596]{height:50px;margin-top:50px}.button[data-v-673cf596]{background-color:rgba(0,0,0,0);border:none}.send-action-radio[data-v-673cf596]{padding:5px 0 5px 0}.send-button[data-v-673cf596]{display:flex;align-items:center;padding:10px 15px;margin-left:5px}.send-button .send-icon[data-v-673cf596]{padding-right:5px}.centered-content[data-v-673cf596]{margin-top:0 !important}.composer-actions-right[data-v-673cf596]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;bottom:5px}.composer-actions--primary-actions[data-v-673cf596]{display:flex;flex-direction:row;padding-left:10px;align-items:center}.composer-actions--secondary-actions[data-v-673cf596]{display:flex;flex-direction:row;padding:5px}.composer-actions--primary-actions .button[data-v-673cf596]{padding:2px}.composer-actions--secondary-actions .button[data-v-673cf596]{flex-shrink:0}.composer-actions-draft-status[data-v-673cf596]{padding-left:10px}@media only screen and (max-width: 580px){.composer-actions-right[data-v-673cf596]{align-items:end;flex-direction:column-reverse}.composer-actions-draft-status[data-v-673cf596]{text-align:end;padding-right:15px}.composer-actions--primary-actions[data-v-673cf596]{padding-right:5px}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Composer.vue\"],\"names\":[],\"mappings\":\"AA+qCA,mCACC,QAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,mCACC,eAAA,CACA,gGAAA,CAGD,kCACC,YAAA,CACA,wCAAA,CACA,sBAAA,CAEA,4EACC,iBAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CAGD,oDACC,iBAAA,CAGD,+CACC,eAAA,CACA,gBAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,cAAA,CACA,eAAA,CACA,wBAAA,CAEA,kEACC,YAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CAGD,kJACC,SAAA,CAGD,wEACC,wBAAA,CAIF,+CACC,iBAAA,CAIF,0BACC,cAAA,CACA,gBAAA,CACA,QAAA,CACA,iBAAA,CAGD,8BACC,gBAAA,CACA,eAAA,CAID,iCACC,aAAA,CACA,YAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,QAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CACA,gBAAA,CACA,mBAAA,CACA,iBAAA,CAIA,wBAAA,CACA,gBAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAID,6IAKC,gBAAA,CACA,mBAAA,CACA,kBAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,kDACC,sBAAA,CAED,2DACC,mDAAA,CAED,iFACC,cAAA,CAGD,iEACC,kCAAA,CAED,+BACC,WAAA,CACA,eAAA,CAED,yBACC,8BAAA,CACA,WAAA,CAED,oCACC,mBAAA,CAED,8BACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,eAAA,CAED,yCACC,iBAAA,CAED,mCACC,uBAAA,CAED,yCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CAED,oDACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,kBAAA,CAED,sDACC,YAAA,CACA,kBAAA,CACA,WAAA,CAED,4DACC,WAAA,CAED,8DACC,aAAA,CAGD,gDACC,iBAAA,CAGD,0CACC,yCACC,eAAA,CACA,6BAAA,CAED,gDACC,cAAA,CACA,kBAAA,CAED,oDACC,iBAAA,CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.message-composer {\\n\\tmargin: 0;\\n\\tz-index: 100;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tmax-height: 100%;\\n}\\n\\n.composer-actions {\\n\\tposition: sticky;\\n\\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\\n}\\n\\n.composer-fields {\\n\\tdisplay: flex;\\n\\tborder-top: 1px solid var(--color-border);\\n\\talign-items: flex-start;\\n\\n\\t.multiselect.multiselect--multiple::after {\\n\\t\\tposition:absolute;\\n\\t\\tright: 0;\\n\\t\\ttop: auto;\\n\\t\\tbottom:8px\\n\\t}\\n\\n\\t.multiselect__tag {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t&.mail-account {\\n\\t\\tborder-top: none;\\n\\t\\tpadding-top: 10px;\\n\\n\\t\\t& > .multiselect {\\n\\t\\t\\tmax-width: none;\\n\\t\\t\\tmin-height: auto;\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect,\\n\\tinput,\\n\\tTextEditor {\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: none;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 0;\\n\\t}\\n\\n\\t.composer-fields--custom {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-start;\\n\\t\\tflex-wrap: wrap;\\n\\t\\tpadding-top:5px;\\n\\t\\twidth: calc(100% - 120px);\\n\\n\\t\\tbutton {\\n\\t\\t\\tmargin-top: 0;\\n\\t\\t\\tbackground-color: transparent;\\n\\t\\t\\tborder:none;\\n\\t\\t\\topacity: 0.5\\n\\t\\t}\\n\\n\\t\\tbutton.active,button:active {\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\n\\t\\t.multiselect {\\n\\t\\t\\twidth: calc(100% - 150px);\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect {\\n\\t\\tmargin-right: 12px;\\n\\t}\\n}\\n\\n.subject {\\n\\tfont-size: 20px;\\n\\tfont-weight: bold;\\n\\tmargin: 0;\\n\\tpadding: 24px 20px;\\n}\\n\\n.warning-box {\\n\\tpadding: 5px 12px;\\n\\tborder-radius: 0;\\n}\\n\\n// Make composer editor expand\\n.message-editor {\\n\\tflex: 1 1 100%;\\n\\tmin-height: 0;\\n}\\n\\n.message-body {\\n\\theight: 100%;\\n\\twidth: 100%;\\n\\tmargin: 0;\\n\\tborder: none !important;\\n\\toutline: none !important;\\n\\tbox-shadow: none !important;\\n\\tpadding-top: 12px;\\n\\tpadding-bottom: 12px;\\n\\tpadding-left: 20px;\\n\\n\\t// Fix contenteditable not becoming focused upon clichint within it's\\n\\t// boundaries in safari\\n\\t-webkit-user-select: text;\\n\\tuser-select: text;\\n}\\n\\n.draft-status {\\n\\tpadding: 2px;\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n\\tdisplay: block;\\n\\n}\\n\\n.from-label,\\n.to-label,\\n.copy-toggle,\\n.cc-label,\\n.bcc-label {\\n\\tpadding-top: 12px;\\n\\tpadding-bottom: 12px;\\n\\tpadding-right: 20px;\\n\\tcursor: text;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\twidth: 100px;\\n\\ttext-align: right;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tfont-weight: bold;\\n}\\n\\n.bcc-label {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\n\\n.copy-toggle {\\n\\tcursor: pointer;\\n\\twidth: initial;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n.reply {\\n\\tmin-height: 100px;\\n}\\n\\n::v-deep .multiselect .multiselect__tags {\\n\\tborder: none !important;\\n}\\n::v-deep [data-select=\\\"create\\\"] .avatardiv--unknown {\\n\\tbackground: var(--color-text-maxcontrast) !important;\\n}\\n::v-deep .multiselect.opened .multiselect__tags .multiselect__tags-wrap {\\n\\tflex-wrap: wrap;\\n}\\n\\n.submit-message.send.primary.icon-confirm-white {\\n\\tcolor: var(--color-main-background);\\n}\\n.sending-hint {\\n\\theight: 50px;\\n\\tmargin-top: 50px;\\n}\\n.button {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n}\\n.send-action-radio {\\n\\tpadding: 5px 0 5px 0;\\n}\\n.send-button {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tpadding: 10px 15px;\\n\\tmargin-left: 5px;\\n}\\n.send-button .send-icon {\\n\\tpadding-right: 5px;\\n}\\n.centered-content {\\n\\tmargin-top: 0 !important;\\n}\\n.composer-actions-right {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\tbottom: 5px;\\n}\\n.composer-actions--primary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding-left: 10px;\\n\\talign-items: center;\\n}\\n.composer-actions--secondary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding: 5px;\\n}\\n.composer-actions--primary-actions .button {\\n\\tpadding: 2px;\\n}\\n.composer-actions--secondary-actions .button{\\n\\tflex-shrink: 0;\\n}\\n\\n.composer-actions-draft-status {\\n\\tpadding-left: 10px;\\n}\\n\\n@media only screen and (max-width: 580px) {\\n\\t.composer-actions-right {\\n\\t\\talign-items: end;\\n\\t\\tflex-direction: column-reverse;\\n\\t}\\n\\t.composer-actions-draft-status {\\n\\t\\ttext-align: end;\\n\\t\\tpadding-right: 15px;\\n\\t}\\n\\t.composer-actions--primary-actions {\\n\\t\\tpadding-right: 5px;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@media only screen and (max-width: 600px){[data-v-4ae59572] .modal-container{max-width:80%}}[data-v-4ae59572] .modal-wrapper .modal-container{overflow-y:auto !important;overflow-x:auto !important;height:90%;max-height:700px !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NewMessageModal.vue\"],\"names\":[],\"mappings\":\"AA4MA,0CACC,mCACC,aAAA,CAAA,CAGF,kDACC,0BAAA,CACA,0BAAA,CAEA,UAAA,CAEA,2BAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n@media only screen and (max-width: 600px) {\\n\\t::v-deep .modal-container {\\n\\t\\tmax-width: 80%;\\n\\t}\\n}\\n::v-deep .modal-wrapper .modal-container {\\n\\toverflow-y: auto !important;\\n\\toverflow-x: auto !important;\\n\\t// from original Modal max-height\\n\\theight: 90%;\\n\\t// Max editor + modal height\\n\\tmax-height: 700px !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".outbox-message[data-v-e4a083f2]{list-style:none}.outbox-message.active[data-v-e4a083f2]{background-color:var(--color-background-dark);border-radius:16px}.outbox-message .account-color[data-v-e4a083f2]{position:absolute;left:0;width:2px;height:69px;z-index:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/OutboxMessageListItem.vue\"],\"names\":[],\"mappings\":\"AAsKA,iCACC,eAAA,CACA,wCACC,6CAAA,CACA,kBAAA,CAGD,gDACC,iBAAA,CACA,MAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.outbox-message {\\n\\tlist-style: none;\\n\\t&.active {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t\\tborder-radius: 16px;\\n\\t}\\n\\n\\t.account-color {\\n\\t\\tposition: absolute;\\n\\t\\tleft: 0;\\n\\t\\twidth: 2px;\\n\\t\\theight: 69px;\\n\\t\\tz-index: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-491f4e65] .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/Home.vue\"],\"names\":[],\"mappings\":\"AAkHA,uCACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .app-content-details {\\n\\tmargin: 0 auto;\\n\\tmax-width: 900px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex: 1 1 100%;\\n\\tmin-width: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{attrs:{\"app-name\":\"mail\"}},[_c('Navigation'),_vm._v(\" \"),(_vm.$route.name === 'outbox')?_c('Outbox'):(_vm.activeAccount)?_c('MailboxThread',{attrs:{\"account\":_vm.activeAccount,\"mailbox\":_vm.activeMailbox}}):_vm._e(),_vm._v(\" \"),(_vm.$store.getters.showMessageComposer)?_c('NewMessageModal',{on:{\"close\":_vm.onCloseModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Greta Doi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doi <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"priority\">\n\t\t<div class=\"app-content-list-item\">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SectionTitle',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=95f06344&scoped=true&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95f06344\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"priority\"}},[_c('div',{staticClass:\"app-content-list-item\"},[_c('h2',[_vm._v(_vm._s(_vm.name))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n\n/**\n * Vendored and fixed version of the abandoned https://github.com/ElemeFE/vue-infinite-scroll lib\n */\n\nconst ctx = '@@InfiniteScroll';\n\nvar throttle = function (fn, delay) {\n  var now, lastExec, timer, context, args; //eslint-disable-line\n\n  var execute = function () {\n    fn.apply(context, args);\n    lastExec = now;\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n\n    now = Date.now();\n\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    if (lastExec) {\n      var diff = delay - (now - lastExec);\n      if (diff < 0) {\n        execute();\n      } else {\n        timer = setTimeout(() => {\n          execute();\n        }, diff);\n      }\n    } else {\n      execute();\n    }\n  };\n};\n\nvar getScrollTop = function (element) {\n  if (element === window) {\n    return Math.max(window.pageYOffset || 0, document.documentElement.scrollTop);\n  }\n\n  return element.scrollTop;\n};\n\nvar getComputedStyle = document.defaultView.getComputedStyle;\n\nvar getScrollEventTarget = function (element) {\n  var currentNode = element;\n  // bugfix, see http://w3help.org/zh-cn/causes/SD9013 and http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\n  while (currentNode && currentNode.tagName !== 'HTML' && currentNode.tagName !== 'BODY' && currentNode.nodeType === 1) {\n    var overflowY = getComputedStyle(currentNode).overflowY;\n    if (overflowY === 'scroll' || overflowY === 'auto') {\n      return currentNode;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return window;\n};\n\nvar getVisibleHeight = function (element) {\n  if (element === window) {\n    return document.documentElement.clientHeight;\n  }\n\n  return element.clientHeight;\n};\n\nvar getElementTop = function (element) {\n  if (element === window) {\n    return getScrollTop(window);\n  }\n  return element.getBoundingClientRect().top + getScrollTop(window);\n};\n\nvar isAttached = function (element) {\n  var currentNode = element.parentNode;\n  while (currentNode) {\n    if (currentNode.tagName === 'HTML') {\n      return true;\n    }\n    if (currentNode.nodeType === 11) {\n      return false;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return false;\n};\n\nvar doBind = function () {\n  if (this.binded) return; // eslint-disable-line\n  this.binded = true;\n\n  var directive = this;\n  var element = directive.el;\n\n  var throttleDelayExpr = element.getAttribute('infinite-scroll-throttle-delay');\n  var throttleDelay = 200;\n  if (throttleDelayExpr) {\n    throttleDelay = Number(directive.vm[throttleDelayExpr] || throttleDelayExpr);\n    if (isNaN(throttleDelay) || throttleDelay < 0) {\n      throttleDelay = 200;\n    }\n  }\n  directive.throttleDelay = throttleDelay;\n\n  directive.scrollEventTarget = getScrollEventTarget(element);\n  directive.scrollListener = throttle(doCheck.bind(directive), directive.throttleDelay);\n  directive.scrollEventTarget.addEventListener('scroll', directive.scrollListener);\n\n  this.vm.$on('hook:beforeDestroy', function () {\n    directive.scrollEventTarget.removeEventListener('scroll', directive.scrollListener);\n  });\n\n  var disabledExpr = element.getAttribute('infinite-scroll-disabled');\n  var disabled = false;\n\n  if (disabledExpr) {\n    this.vm.$watch(disabledExpr, function(value) {\n      directive.disabled = value;\n      if (!value && directive.immediateCheck) {\n        doCheck.call(directive);\n      }\n    });\n    disabled = Boolean(directive.vm[disabledExpr]);\n  }\n  directive.disabled = disabled;\n\n  var distanceExpr = element.getAttribute('infinite-scroll-distance');\n  var distance = 0;\n  if (distanceExpr) {\n    distance = Number(directive.vm[distanceExpr] || distanceExpr);\n    if (isNaN(distance)) {\n      distance = 0;\n    }\n  }\n  directive.distance = distance;\n\n  var immediateCheckExpr = element.getAttribute('infinite-scroll-immediate-check');\n  var immediateCheck = true;\n  if (immediateCheckExpr) {\n    immediateCheck = Boolean(directive.vm[immediateCheckExpr]);\n  }\n  directive.immediateCheck = immediateCheck;\n\n  if (immediateCheck) {\n    doCheck.call(directive);\n  }\n\n  var eventName = element.getAttribute('infinite-scroll-listen-for-event');\n  if (eventName) {\n    directive.vm.$on(eventName, function() {\n      doCheck.call(directive);\n    });\n  }\n};\n\nvar doCheck = function (force) {\n  var scrollEventTarget = this.scrollEventTarget;\n  var element = this.el;\n  var distance = this.distance;\n\n  if (force !== true && this.disabled) return; //eslint-disable-line\n  var viewportScrollTop = getScrollTop(scrollEventTarget);\n  var viewportBottom = viewportScrollTop + getVisibleHeight(scrollEventTarget);\n\n  var shouldTrigger = false;\n\n  if (scrollEventTarget === element) {\n    shouldTrigger = scrollEventTarget.scrollHeight - viewportBottom <= distance;\n  } else {\n    var elementBottom = getElementTop(element) - getElementTop(scrollEventTarget) + element.offsetHeight + viewportScrollTop;\n\n    shouldTrigger = viewportBottom + distance >= elementBottom;\n  }\n\n  if (shouldTrigger && this.expression) {\n    this.expression();\n  }\n};\n\nexport default {\n  bind(el, binding, vnode) {\n    el[ctx] = {\n      el,\n      vm: vnode.context,\n      expression: binding.value\n    };\n    const args = arguments;\n    console.info('binding', el, binding, vnode)\n    el[ctx].vm.$nextTick(function () {\n      if (isAttached(el)) {\n        doBind.call(el[ctx], args);\n      }\n\n      el[ctx].bindTryCount = 0;\n\n      var tryBind = function () {\n        if (el[ctx].bindTryCount > 10) return; //eslint-disable-line\n        el[ctx].bindTryCount++;\n        if (isAttached(el)) {\n          doBind.call(el[ctx], args);\n        } else {\n          setTimeout(tryBind, 50);\n        }\n      };\n\n      tryBind();\n    });\n  },\n\n  unbind(el) {\n    if (el && el[ctx] && el[ctx].scrollEventTarget)\n      el[ctx].scrollEventTarget.removeEventListener('scroll', el[ctx].scrollListener);\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\" />\n\t\t<h2>{{ t('mail', 'No messages in this mailbox') }}</h2>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailbox',\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyMailbox.vue?vue&type=template&id=c9ba26fa&\"\nimport script from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this mailbox')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import dragEventBus from '../util/dragEventBus'\nimport defer from 'lodash/defer'\n\nexport class DraggableEnvelope {\n\n\tconstructor(el, componentInstance, options) {\n\t\tthis.el = el\n\t\tthis.options = options\n\t\tthis.registerListeners.bind(this)(el)\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsetInitialAttributes() {\n\t\tthis.el.setAttribute('draggable', 'true')\n\t\tthis.el.classList.add('draggable-envelope')\n\t}\n\n\tupdate(el, instance) {\n\t\tthis.options = instance.options\n\t}\n\n\tregisterListeners(el) {\n\t\tel.addEventListener('dragstart', this.onDragStart.bind(this))\n\t\tel.addEventListener('dragend', this.onDragEnd.bind(this))\n\t}\n\n\tremoveListeners(el) {\n\t\tel.removeEventListener('dragstart', this.onDragStart)\n\t\tel.removeEventListener('dragend', this.onDragEnd)\n\t}\n\n\tonDragStart(event) {\n\t\tconst { accountId, mailboxId, selectedEnvelopes } = this.options\n\n\t\tevent.dataTransfer.clearData()\n\t\tevent.dataTransfer.effectAllowed = 'move'\n\n\t\tconst envelopes = []\n\t\tif (selectedEnvelopes.length) {\n\t\t\t// handle dragged selection mode items\n\t\t\tselectedEnvelopes.forEach((envelope, index) => {\n\t\t\t\tenvelopes.push({\n\t\t\t\t\taccountId,\n\t\t\t\t\tmailboxId,\n\t\t\t\t\tenvelopeId: envelope.databaseId,\n\t\t\t\t\tdraggableLabel: `${envelope.subject} (${envelope.from[0].label})`,\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\t// handle single dragged item\n\t\t\tconst { envelopeId, draggableLabel } = this.options\n\t\t\tenvelopes.push({ accountId, mailboxId, envelopeId, draggableLabel })\n\t\t}\n\n\t\tevent.dataTransfer.setData('text/plain', JSON.stringify(envelopes))\n\t\tthis.attachGhost({ event, envelopes })\n\n\t\tdragEventBus.$emit('dragStart', {\n\t\t\taccountId,\n\t\t\tmailboxId,\n\t\t\titemCount: envelopes.length,\n\t\t})\n\t}\n\n\tonDragEnd(event) {\n\t\tdragEventBus.$emit('dragEnd', { accountId: this.options.accountId })\n\t}\n\n\tattachGhost({ event, envelopes }) {\n\t\tconst baseClass = 'draggable-envelope-ghost'\n\t\tconst dragNode = document.createElement('div')\n\t\tdragNode.classList.add(baseClass)\n\n\t\tconst counterNode = document.createElement('span')\n\t\tcounterNode.classList.add(`${baseClass}--counter`)\n\t\tconst textCountNode = document.createTextNode(envelopes.length)\n\t\tcounterNode.appendChild(textCountNode)\n\t\tdragNode.appendChild(counterNode)\n\n\t\tconst labelWrapperNode = document.createElement('div')\n\t\tlabelWrapperNode.classList.add(`${baseClass}--label-wrapper`)\n\n\t\tenvelopes.forEach(envelope => {\n\t\t\tconst labelNode = document.createElement('div')\n\t\t\tlabelNode.classList.add(`${baseClass}--label-wrapper--label`)\n\t\t\tconst textLabelNode = document.createTextNode(envelope.draggableLabel)\n\t\t\tlabelNode.appendChild(textLabelNode)\n\t\t\tlabelWrapperNode.appendChild(labelNode)\n\t\t})\n\n\t\tdragNode.appendChild(labelWrapperNode)\n\t\tdocument.body.appendChild(dragNode)\n\n\t\tevent.dataTransfer.setDragImage(dragNode, 0, 15)\n\n\t\t// the item can be removed immediately, because the\n\t\t// browser will take a \"screenshot\" of the dragImage\n\t\t// upon initialization to be used while dragging\n\t\tdefer(() => {\n\t\t\tdocument.body.removeChild(dragNode)\n\t\t})\n\t}\n\n}\n","import { DraggableEnvelope } from './draggable-envelope'\n\nlet instances = []\n\nexport const DraggableEnvelopeDirective = {\n\tbind(el, binding, vnode) {\n\t\tconst instance = new DraggableEnvelope(el, vnode.context, binding.value)\n\t\tinstances.push(instance)\n\t},\n\tcomponentUpdated(el, binding) {\n\t\tconst options = binding.value\n\t\tsetTimeout(() => {\n\t\t\tinstances.forEach(instance => {\n\t\t\t\tinstance.options.selectedEnvelopes = options.selectedEnvelopes\n\t\t\t\tinstance.update(el, instance)\n\t\t\t})\n\t\t})\n\t},\n\tunbind(el) {\n\t\tinstances = instances.filter((instance) => instance.el !== el)\n\t},\n}\n\nexport default DraggableEnvelope\n","<template>\n\t<MailboxPicker :account=\"account\"\n\t\t:selected.sync=\"destMailboxId\"\n\t\t:loading=\"moving\"\n\t\t:label-select=\"moveThread ? t('mail', 'Move thread') : t('mail', 'Move message')\"\n\t\t:label-select-loading=\"moveThread ? t('mail', 'Moving thread') : t('mail', 'Moving message')\"\n\t\t@select=\"onMove\"\n\t\t@close=\"onClose\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport MailboxPicker from './MailboxPicker'\n\nexport default {\n\tname: 'MoveModal',\n\tcomponents: {\n\t\tMailboxPicker,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmoveThread: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmoving: false,\n\t\t\tdestMailboxId: undefined,\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onMove() {\n\t\t\tthis.moving = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = this.envelopes\n\t\t\t\t\t.filter(envelope => envelope.mailboxId !== this.destMailboxId)\n\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tfor (const envelope of envelopes) {\n\t\t\t\t\tif (this.moveThread) {\n\t\t\t\t\t\tawait this.$store.dispatch('moveThread', { envelope, destMailboxId: this.destMailboxId })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.$store.dispatch('moveMessage', { id: envelope.databaseId, destMailboxId: this.destMailboxId })\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', { mailboxId: this.destMailboxId })\n\t\t\t\tthis.$emit('move')\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not move messages', {\n\t\t\t\t\terror,\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.moving = false\n\t\t\t\tthis.$emit('close')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveModal.vue?vue&type=template&id=de89f7bc&\"\nimport script from \"./MoveModal.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MailboxPicker',{attrs:{\"account\":_vm.account,\"selected\":_vm.destMailboxId,\"loading\":_vm.moving,\"label-select\":_vm.moveThread ? _vm.t('mail', 'Move thread') : _vm.t('mail', 'Move message'),\"label-select-loading\":_vm.moveThread ? _vm.t('mail', 'Moving thread') : _vm.t('mail', 'Moving message')},on:{\"update:selected\":function($event){_vm.destMailboxId=$event},\"select\":_vm.onMove,\"close\":_vm.onClose}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportantIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportantIcon.vue?vue&type=script&lang=js&\"","<template functional>\n\t<span :aria-hidden=\"!props.title\"\n\t\t:aria-label=\"props.title\"\n\t\t:class=\"[data.class, data.staticClass]\"\n\t\tclass=\"material-design-icon important-icon\"\n\t\trole=\"img\"\n\t\tv-bind=\"data.attrs\"\n\t\tv-on=\"listeners\">\n\t\t<svg :fill=\"props.fillColor\"\n\t\t\tclass=\"material-design-icon__svg\"\n\t\t\t:width=\"props.size\"\n\t\t\t:height=\"props.size\"\n\t\t\tviewBox=\"0 0 16 16\">\n\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t<path d=\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\" />\n\t\t</svg>\n\t</span>\n</template>\n\n<script>\nexport default {\n\tname: 'ImportantIcon',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\tfillColor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'currentColor',\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./ImportantIcon.vue?vue&type=template&id=6f6ed4f0&functional=true&\"\nimport script from \"./ImportantIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./ImportantIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('span',_vm._g(_vm._b({staticClass:\"material-design-icon important-icon\",class:[_vm.data.class, _vm.data.staticClass],attrs:{\"aria-hidden\":!_vm.props.title,\"aria-label\":_vm.props.title,\"role\":\"img\"}},'span',_vm.data.attrs,false),_vm.listeners),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.props.fillColor,\"width\":_vm.props.size,\"height\":_vm.props.size,\"viewBox\":\"0 0 16 16\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0V0z\",\"fill\":\"none\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2021 Greta Doci <gretadoci@gmail.com>\n  -\n  - @author 2021 Greta Doci <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Modal size=\"large\" @close=\"onClose\">\n\t\t<div class=\"modal-content\">\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Add default tags') }}\n\t\t\t</h2>\n\t\t\t<div v-for=\"tag in tags\" :key=\"tag.id\" class=\"tag-group\">\n\t\t\t\t<button class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tcolor: convertHex(tag.color, 1),\n\t\t\t\t\t\t'background-color': convertHex(tag.color, 0.15)\n\t\t\t\t\t}\">\n\t\t\t\t\t{{ tag.displayName }}\n\t\t\t\t</button>\n\t\t\t\t<Actions :force-menu=\"true\">\n\t\t\t\t\t<ActionButton v-if=\"renameTagLabel\"\n\t\t\t\t\t\ticon=\"icon-rename\"\n\t\t\t\t\t\t@click=\"openEditTag\">\n\t\t\t\t\t\t{{ t('mail','Rename tag') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionInput v-if=\"renameTagInput\"\n\t\t\t\t\t\ticon=\"icon-tag\"\n\t\t\t\t\t\t:value=\"tag.displayName\"\n\t\t\t\t\t\t@submit=\"renameTag(tag, $event)\" />\n\t\t\t\t\t<ActionText\n\t\t\t\t\t\tv-if=\"showSaving\"\n\t\t\t\t\t\ticon=\"icon-loading-small\">\n\t\t\t\t\t\t{{ t('mail', 'Saving new tag name ') }}\n\t\t\t\t\t</ActionText>\n\t\t\t\t</Actions>\n\t\t\t\t<button v-if=\"!isSet(tag.imapLabel)\"\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"addTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Set') }}\n\t\t\t\t</button>\n\t\t\t\t<button v-else\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"removeTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Unset') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t</h2>\n\t\t\t<div class=\"create-tag\">\n\t\t\t\t<button v-if=\"!editing\"\n\t\t\t\t\tclass=\"tagButton\"\n\t\t\t\t\t@click=\"addTagInput\">\n\t\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t\t</button>\n\t\t\t\t<ActionInput v-if=\"editing\" icon=\"icon-tag\" @submit=\"createTag\" />\n\t\t\t\t<ActionText\n\t\t\t\t\tv-if=\"showSaving\"\n\t\t\t\t\ticon=\"icon-loading-small\">\n\t\t\t\t\t{{ t('mail', 'Saving tag ') }}\n\t\t\t\t</ActionText>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionText from '@nextcloud/vue/dist/Components/ActionText'\nimport ActionInput from '@nextcloud/vue/dist/Components/ActionInput'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { showError, showInfo } from '@nextcloud/dialogs'\n\nfunction randomColor() {\n\tlet randomHexColor = ((1 << 24) * Math.random() | 0).toString(16)\n\twhile (randomHexColor.length < 6) {\n\t\trandomHexColor = '0' + randomHexColor\n\t}\n\treturn '#' + randomHexColor\n}\nexport default {\n\tname: 'TagModal',\n\tcomponents: {\n\t\tModal,\n\t\tActions,\n\t\tActionText,\n\t\tActionInput,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisAdded: false,\n\t\t\tediting: false,\n\t\t\ttagLabel: true,\n\t\t\ttagInput: false,\n\t\t\tshowSaving: false,\n\t\t\trenameTagLabel: true,\n\t\t\trenameTagInput: false,\n\t\t\tcolor: randomColor(),\n\t\t}\n\t},\n\tcomputed: {\n\t\ttags() {\n\t\t\treturn this.$store.getters.getTags.filter((tag) => tag.imapLabel !== '$label1').sort((a, b) => {\n\t\t\t\tif (a.isDefaultTag && !b.isDefaultTag) {\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (b.isDefaultTag && !a.isDefaultTag) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (a.isDefaultTag && b.isDefaultTag) {\n\t\t\t\t\tif (a.displayName < b.displayName) {\n\t\t\t\t\t\treturn 1\n\t\t\t\t\t}\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (this.isSet(a.imapLabel) && !this.isSet(b.imapLabel)) {\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (!this.isSet(a.imapLabel) && this.isSet(b.imapLabel)) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (a.displayName < b.displayName) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\treturn -1\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tisSet(imapLabel) {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some(tag => tag.imapLabel === imapLabel)\n\t\t},\n\t\taddTag(imapLabel) {\n\t\t\tthis.isAdded = true\n\t\t\tthis.$store.dispatch('addEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\tremoveTag(imapLabel) {\n\t\t\tthis.isAdded = false\n\t\t\tthis.$store.dispatch('removeEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\taddTagInput() {\n\t\t\tthis.editing = true\n\t\t\tthis.showSaving = false\n\t\t},\n\t\tasync createTag(event) {\n\t\t\tthis.editing = true\n\t\t\tconst displayName = event.target.querySelector('input[type=text]').value\n\t\t\tif (this.$store.getters.getTags.some(tag => tag.displayName === displayName)) {\n\t\t\t\tshowError(this.t('mail', 'Tag already exists'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('createTag', {\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tcolor: randomColor(displayName),\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\tshowError(this.t('mail', 'An error occurred, unable to create the tag.'))\n\t\t\t} finally {\n\t\t\t\tthis.showSaving = false\n\t\t\t\tthis.tagLabel = true\n\t\t\t}\n\t\t},\n\t\tconvertHex(color, opacity) {\n\t\t\tif (color.length === 4) {\n\t\t\t\tconst r = parseInt(color.substring(1, 2), 16)\n\t\t\t\tconst g = parseInt(color.substring(2, 3), 16)\n\t\t\t\tconst b = parseInt(color.substring(3, 4), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t} else {\n\t\t\t\tconst r = parseInt(color.substring(1, 3), 16)\n\t\t\t\tconst g = parseInt(color.substring(3, 5), 16)\n\t\t\t\tconst b = parseInt(color.substring(5, 7), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t}\n\t\t},\n\t\topenEditTag() {\n\t\t\tthis.renameTagLabel = false\n\t\t\tthis.renameTagInput = true\n\t\t\tthis.showSaving = false\n\n\t\t},\n\t\tasync renameTag(tag, event) {\n\t\t\tthis.renameTagInput = false\n\t\t\tthis.showSaving = false\n\t\t\tconst displayName = event.target.querySelector('input[type=text]').value\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('updateTag', {\n\t\t\t\t\ttag,\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tcolor: tag.color,\n\t\t\t\t})\n\t\t\t\tthis.renameTagLabel = true\n\t\t\t\tthis.renameTagInput = false\n\t\t\t\tthis.showSaving = false\n\t\t\t} catch (error) {\n\t\t\t\tshowInfo(t('mail', 'An error occurred, unable to rename the tag.'))\n\t\t\t\tconsole.error(error)\n\t\t\t\tthis.renameTagLabel = false\n\t\t\t\tthis.renameTagInput = false\n\t\t\t\tthis.showSaving = true\n\t\t\t}\n\t\t},\n\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-content {\n\tpadding: 0 20px 20px 20px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n::v-deep .modal-container {\n\twidth: auto !important;\n}\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-left: 10px;\n}\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: right;\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-border-dark);\n\t}\n}\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 94px;\n}\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tlist-style: none;\n\n\t.color0 {\n\t\twidth: 30px !important;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tmargin-top: -65px;\n\t\tmargin-left: 180px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-left: 10px;\n}\n::v-deep .action-input {\n\tmargin-left: -31px;\n}\n::v-deep .icon-tag {\n\tbackground-image: none;\n}\n.action-item {\n\tright: 8px;\n\tfloat: right;\n}\n.create-tag {\n\tlist-style: none;\n}\n@media only screen and (max-width: 512px) {\n\t::v-deep .modal-container {\n\ttop: 100px !important;\n\tmax-height: calc(100vh - 170px) !important\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=style&index=0&id=0b6e590a&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TagModal.vue?vue&type=template&id=0b6e590a&scoped=true&\"\nimport script from \"./TagModal.vue?vue&type=script&lang=js&\"\nexport * from \"./TagModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagModal.vue?vue&type=style&index=0&id=0b6e590a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b6e590a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"size\":\"large\"},on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"modal-content\"},[_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add default tags'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('button',{staticClass:\"tag-group__label\",style:({\n\t\t\t\t\tcolor: _vm.convertHex(tag.color, 1),\n\t\t\t\t\t'background-color': _vm.convertHex(tag.color, 0.15)\n\t\t\t\t})},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(tag.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('Actions',{attrs:{\"force-menu\":true}},[(_vm.renameTagLabel)?_c('ActionButton',{attrs:{\"icon\":\"icon-rename\"},on:{\"click\":_vm.openEditTag}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Rename tag'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.renameTagInput)?_c('ActionInput',{attrs:{\"icon\":\"icon-tag\",\"value\":tag.displayName},on:{\"submit\":function($event){return _vm.renameTag(tag, $event)}}}):_vm._e(),_vm._v(\" \"),(_vm.showSaving)?_c('ActionText',{attrs:{\"icon\":\"icon-loading-small\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Saving new tag name '))+\"\\n\\t\\t\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(!_vm.isSet(tag.imapLabel))?_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.addTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Set'))+\"\\n\\t\\t\\t\")]):_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.removeTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Unset'))+\"\\n\\t\\t\\t\")])],1)}),_vm._v(\" \"),_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"create-tag\"},[(!_vm.editing)?_c('button',{staticClass:\"tagButton\",on:{\"click\":_vm.addTagInput}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('ActionInput',{attrs:{\"icon\":\"icon-tag\"},on:{\"submit\":_vm.createTag}}):_vm._e(),_vm._v(\" \"),(_vm.showSaving)?_c('ActionText',{attrs:{\"icon\":\"icon-loading-small\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Saving tag '))+\"\\n\\t\\t\\t\")]):_vm._e()],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as webdav from 'webdav'\nimport axios from '@nextcloud/axios'\nimport memoize from 'lodash/fp/memoize'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\n\nexport const getClient = memoize((service) => {\n\t// Add this so the server knows it is an request from the browser\n\taxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\n\n\t// force our axios\n\tconst patcher = webdav.getPatcher()\n\tpatcher.patch('request', axios)\n\n\treturn webdav.createClient(\n\t\tgenerateRemoteUrl(`dav/${service}/${getCurrentUser().uid}`)\n\t)\n})\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport md5 from 'md5'\nimport convert from 'color-convert'\n\n/**\n * Generates a hex color based on RGB string\n *\n * @param {String} uid The string to generate a color from\n * @returns {string} The hex color\n */\nexport function uidToHexColor(uid) {\n\tconst color = uidToColor(uid)\n\treturn '#' + convert.rgb.hex(color.r, color.g, color.b)\n}\n\n// copied from calendar\n// TODO: have it separately in a file\n\n/**\n * This is copied from nextcloud-vue for now, until it is exposed upstream.\n */\n\nexport const uidToColor = (uid) => {\n\t// Normalize hash\n\tlet hash = uid.toLowerCase()\n\n\t// Already a md5 hash?\n\tif (hash.match(/^([0-9a-f]{4}-?){8}$/) === null) {\n\t\thash = md5(hash)\n\t}\n\n\thash = hash.replace(/[^0-9a-f]/g, '')\n\n\tconst steps = 6\n\tconst finalPalette = GenColors(steps)\n\n\t// Convert a string to an integer evenly\n\tfunction hashToInt(hash, maximum) {\n\t\tlet finalInt = 0\n\t\tconst result = []\n\n\t\t// Splitting evenly the string\n\t\tfor (let i = 0; i < hash.length; i++) {\n\t\t\t// chars in md5 goes up to f, hex:16\n\t\t\tresult.push(parseInt(hash.charAt(i), 16) % 16)\n\t\t}\n\n\t\t// Adds up all results\n\t\tfor (const j in result) {\n\t\t\tfinalInt += result[j]\n\t\t}\n\n\t\t// chars in md5 goes up to f, hex:16\n\t\t// make sure we're always using int in our operation\n\t\treturn parseInt(parseInt(finalInt, 10) % maximum, 10)\n\t}\n\treturn finalPalette[hashToInt(hash, steps * 3)]\n}\n\nfunction Color(r, g, b) {\n\tthis.r = r\n\tthis.g = g\n\tthis.b = b\n}\n\nfunction stepCalc(steps, ends) {\n\tconst step = new Array(3)\n\tstep[0] = (ends[1].r - ends[0].r) / steps\n\tstep[1] = (ends[1].g - ends[0].g) / steps\n\tstep[2] = (ends[1].b - ends[0].b) / steps\n\treturn step\n}\n\nfunction mixPalette(steps, color1, color2) {\n\tconst palette = []\n\tpalette.push(color1)\n\tconst step = stepCalc(steps, [color1, color2])\n\tfor (let i = 1; i < steps; i++) {\n\t\tconst r = parseInt(color1.r + step[0] * i, 10)\n\t\tconst g = parseInt(color1.g + step[1] * i, 10)\n\t\tconst b = parseInt(color1.b + step[2] * i, 10)\n\t\tpalette.push(new Color(r, g, b))\n\t}\n\treturn palette\n}\n\n/**\n * Generate colors from the official nextcloud color\n * You can provide how many colors you want (multiplied by 3)\n * if step = 6\n * 3 colors * 6 will result in 18 generated colors\n *\n * @param {number} [steps=6] Number of steps to go from a color to another\n * @returns {Object[]}\n */\nfunction GenColors(steps) {\n\tif (!steps) {\n\t\tsteps = 6\n\t}\n\n\tconst red = new Color(182, 70, 157)\n\tconst yellow = new Color(221, 203, 85)\n\tconst blue = new Color(0, 130, 201) // Nextcloud blue\n\n\tconst palette1 = mixPalette(steps, red, yellow)\n\tconst palette2 = mixPalette(steps, yellow, blue)\n\tconst palette3 = mixPalette(steps, blue, red)\n\n\treturn palette1.concat(palette2).concat(palette3)\n}\n\nexport default uidToColor\n","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport curry from 'lodash/fp/curry'\nimport ical from 'ical.js'\nimport { getClient } from '../dav/client'\nimport Axios from '@nextcloud/axios'\n\nimport Logger from '../logger'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { uidToHexColor } from '../util/calendarColor'\n\nconst canWrite = (properties) => {\n\tlet acls = properties?.acl?.ace\n\n\tif (!acls) {\n\t\treturn false\n\t}\n\t// There might only be one ACL, not a list\n\tif (!Array.isArray(acls)) {\n\t\tacls = [acls]\n\t}\n\n\tfor (const acl of acls) {\n\t\tif (acl.grant?.privilege?.write !== undefined) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nconst getCalendarData = (calendar) => {\n\treturn {\n\t\tdisplayname: calendar.props.displayname,\n\t\torder: calendar.props['calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: true, // check if VEVENT exists in props['supported-calendar-component-set'].comps\n\t\t},\n\t\twritable: canWrite(calendar.props),\n\t\turl: generateRemoteUrl(`dav/calendars/${getCurrentUser().uid}${calendar.filename}/`),\n\t\tcolor: calendar.props['calendar-color'] ?? uidToHexColor(calendar.props.displayname ?? ''),\n\n\t}\n}\n\n/**\n * @returns {Promise}\n */\nexport const getUserCalendars = async() => {\n\tconst response = await getClient('calendars')\n\t\t.getDirectoryContents('/', {\n\t\t\tdata: `<?xml version=\"1.0\"?>\n<d:propfind  xmlns:d=\"DAV:\" xmlns:c=\"urn:ietf:params:xml:ns:caldav\" xmlns:aapl=\"http://apple.com/ns/ical/\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:cs=\"http://calendarserver.org/ns/\">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <aapl:calendar-color />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>`,\n\t\t\tdetails: true,\n\t\t})\n\n\treturn response.data\n\t\t.map(getCalendarData)\n\t\t.filter(props => props.components.vevent && props.writable === true)\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random().toString(36).substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = (data) => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach((vtimezone) => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach((componentName) => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach((vobject) => {\n\t\t\tconst uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach((componentName) => {\n\t\tsplit[componentName] = []\n\t\tfor (const objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent.bind(component))\n\t\t\tfor (const objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {String} url the url\n * @param {Object} data the data\n * @returns {Promise}\n */\nexport const importCalendarEvent = curry((url, data) => {\n\tLogger.debug('importing events into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach((componentName) => {\n\t\tfor (const componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tLogger.info('importing event component', { component })\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tAxios.put(url + getRandomString() + '.ics', component, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n})\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"calendar-picker-option\">\n\t\t<div\n\t\t\tclass=\"calendar-picker-option__color-indicator\"\n\t\t\t:style=\"{ backgroundColor: color }\" />\n\n\t\t<span\n\t\t\tclass=\"calendar-picker-option__label\">\n\t\t\t{{ displayname }}\n\t\t</span>\n\t\t<span :class=\"displayIcon ? 'icon-caret-dark' : ''\" />\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'CalendarPickerOption',\n\tprops: {\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayIcon: {\n\t\t  type: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.calendar-picker-option {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&__color-indicator {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tmargin-right: 8px;\n\t\tflex-basis: 12px;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tflex-grow: 1;\n\t\tmax-width: 80px;\n\t}\n}\n\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=style&index=0&id=9bd234a6&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","<template>\n\t<Modal @close=\"onClose\">\n\t\t<div class=\"modal-content\">\n\t\t\t<h2>{{ t('mail', 'Create event') }}</h2>\n\t\t\t<div class=\"eventTitle\">\n\t\t\t\t<input v-model=\"eventTitle\" type=\"text\">\n\t\t\t</div>\n\t\t\t<div class=\"dateTimePicker\">\n\t\t\t\t<DatetimePicker v-model=\"startDate\"\n\t\t\t\t\t:format=\"dateFormat\"\n\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t:type=\"datePickerType\"\n\t\t\t\t\t:show-timezone-select=\"true\"\n\t\t\t\t\t:timezone-id=\"startTimezoneId\" />\n\t\t\t\t<DatetimePicker v-model=\"endDate\"\n\t\t\t\t\t:format=\"dateFormat\"\n\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t:type=\"datePickerType\"\n\t\t\t\t\t:show-timezone-select=\"true\"\n\t\t\t\t\t:timezone-id=\"endTimezoneId\" />\n\t\t\t</div>\n\t\t\t<div class=\"all-day\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"allDay\"\n\t\t\t\t\tv-model=\"isAllDay\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclass=\"checkbox\">\n\t\t\t\t<label\n\t\t\t\t\tfor=\"allDay\">\n\t\t\t\t\t{{ t('mail', 'All day') }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<Multiselect\n\t\t\t\tv-model=\"selectedCalendar\"\n\t\t\t\tlabel=\"displayname\"\n\t\t\t\ttrack-by=\"url\"\n\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t:options=\"calendars\">\n\t\t\t\t<template #option=\"{option}\">\n\t\t\t\t\t<CalendarPickerOption\n\t\t\t\t\t\tv-bind=\"option\" />\n\t\t\t\t</template>\n\t\t\t\t<template #singleLabel=\"{option}\">\n\t\t\t\t\t<CalendarPickerOption\n\t\t\t\t\t\t:display-icon=\"true\"\n\t\t\t\t\t\tv-bind=\"option\" />\n\t\t\t\t</template>\n\t\t\t</Multiselect>\n\t\t\t<br>\n\t\t\t<button class=\"primary\" @click=\"onSave\">\n\t\t\t\t{{ t('mail', 'Create') }}\n\t\t\t</button>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport { createEvent, getTimezoneManager, DateTimeValue, TextProperty } from '@nextcloud/calendar-js'\nimport DatetimePicker from '@nextcloud/vue/dist/Components/DatetimePicker'\nimport jstz from 'jstz'\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\n\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\nimport logger from '../logger'\nimport CalendarPickerOption from './CalendarPickerOption'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'EventModal',\n\tcomponents: {\n\t\tCalendarPickerOption,\n\t\tDatetimePicker,\n\t\tModal,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\t// Try to determine the current timezone, and fall back to UTC otherwise\n\t\tconst defaultTimezone = jstz.determine()\n\t\tconst defaultTimezoneId = defaultTimezone ? defaultTimezone.name() : 'UTC'\n\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t\teventTitle: this.envelope.subject,\n\t\t\tstartDate: new Date(),\n\t\t\tendDate: new Date(),\n\t\t\tisAllDay: false,\n\t\t\tstartTimezoneId: defaultTimezoneId,\n\t\t\tendTimezoneId: defaultTimezoneId,\n\t\t\tsaving: false,\n\t\t\tselectedCalendar: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tdateFormat() {\n\t\t\treturn this.isAllDay ? 'YYYY-MM-DD' : 'YYYY-MM-DD HH:mm'\n\t\t},\n\t\tdatePickerType() {\n\t\t\treturn this.isAllDay ? 'date' : 'datetime'\n\t\t},\n\t},\n\tcreated() {\n\t\tlogger.debug('creating event from envelope', {\n\t\t\tenvelope: this.envelope,\n\t\t})\n\t},\n\tasync mounted() {\n\t\tthis.calendars = (await getUserCalendars()).filter(c => c.writable)\n\n\t\tif (this.calendars.length) {\n\t\t\tthis.selectedCalendar = this.calendars[0]\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onSave() {\n\t\t\tthis.saving = true\n\n\t\t\ttry {\n\t\t\t\tlogger.debug('create event', {\n\t\t\t\t\tcalendar: this.selectedCalendar,\n\t\t\t\t\teventTitle: this.eventTitle,\n\t\t\t\t\tstartDate: this.startDate,\n\t\t\t\t\tstartTimezone: this.startTimezoneId,\n\t\t\t\t\tendTimezone: this.endTimezoneId,\n\t\t\t\t})\n\n\t\t\t\tconst timezoneManager = getTimezoneManager()\n\t\t\t\t// TODO: only do this once\n\t\t\t\ttimezoneManager.registerDefaultTimezones()\n\t\t\t\tconst startTimezone = timezoneManager.getTimezoneForId(this.startTimezoneId)\n\t\t\t\tconst startDateTime = DateTimeValue\n\t\t\t\t\t.fromJSDate(this.startDate, true)\n\t\t\t\t\t.getInTimezone(startTimezone)\n\t\t\t\tconst endTimezone = timezoneManager.getTimezoneForId(this.endTimezoneId)\n\t\t\t\tconst endDateTime = DateTimeValue\n\t\t\t\t\t.fromJSDate(this.endDate, true)\n\t\t\t\t\t.getInTimezone(endTimezone)\n\t\t\t\tif (this.isAllDay) {\n\t\t\t\t\tstartDateTime.isDate = true\n\t\t\t\t\tendDateTime.isDate = true\n\t\t\t\t}\n\n\t\t\t\tconst calendar = createEvent(startDateTime, endDateTime)\n\t\t\t\tconst event = calendar.getFirstComponent('VEVENT')\n\t\t\t\tevent.addProperty(new TextProperty('SUMMARY', this.eventTitle))\n\t\t\t\tfor (const vObject of calendar.getVObjectIterator()) {\n\t\t\t\t\tvObject.undirtify()\n\t\t\t\t}\n\t\t\t\tlogger.debug('calendar object created', { calendar, event })\n\n\t\t\t\tawait importCalendarEvent(\n\t\t\t\t\tthis.selectedCalendar.url,\n\t\t\t\t\tcalendar.toICS()\n\t\t\t\t)\n\n\t\t\t\tshowSuccess(t('mail', 'Event created'))\n\n\t\t\t\tthis.onClose()\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('mail', 'Could not create event'))\n\n\t\t\t\tlogger.error('Creating event from message failed', { error })\n\t\t\t} finally {\n\t\t\t\tthis.saving = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-wrapper .modal-container {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n}\ninput {\n\twidth: 100%;\n}\n::v-deep input[type='text'].multiselect__input {\n\tpadding: 0 !important;\n}\n::v-deep .multiselect__single {\n\tmargin-left: -18px;\n\twidth: 100px;\n}\n::v-deep .multiselect__tags {\n\tborder: none !important;\n}\n.all-day {\n\tmargin-left: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n.eventTitle {\n\tmargin-bottom: 5px;\n}\n.primary {\n\theight: 44px !important;\n\tfloat: right;\n}\n::v-deep .mx-datepicker {\n\twidth: 213px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CalendarPickerOption.vue?vue&type=template&id=9bd234a6&scoped=true&\"\nimport script from \"./CalendarPickerOption.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarPickerOption.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CalendarPickerOption.vue?vue&type=style&index=0&id=9bd234a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9bd234a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"calendar-picker-option\"},[_c('div',{staticClass:\"calendar-picker-option__color-indicator\",style:({ backgroundColor: _vm.color })}),_vm._v(\" \"),_c('span',{staticClass:\"calendar-picker-option__label\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.displayname)+\"\\n\\t\")]),_vm._v(\" \"),_c('span',{class:_vm.displayIcon ? 'icon-caret-dark' : ''})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=style&index=0&id=ebd3f16a&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EventModal.vue?vue&type=template&id=ebd3f16a&scoped=true&\"\nimport script from \"./EventModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EventModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventModal.vue?vue&type=style&index=0&id=ebd3f16a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ebd3f16a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"modal-content\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Create event')))]),_vm._v(\" \"),_c('div',{staticClass:\"eventTitle\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.eventTitle),expression:\"eventTitle\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.eventTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.eventTitle=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"dateTimePicker\"},[_c('DatetimePicker',{attrs:{\"format\":_vm.dateFormat,\"clearable\":false,\"minute-step\":5,\"show-second\":false,\"type\":_vm.datePickerType,\"show-timezone-select\":true,\"timezone-id\":_vm.startTimezoneId},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}}),_vm._v(\" \"),_c('DatetimePicker',{attrs:{\"format\":_vm.dateFormat,\"clearable\":false,\"minute-step\":5,\"show-second\":false,\"type\":_vm.datePickerType,\"show-timezone-select\":true,\"timezone-id\":_vm.endTimezoneId},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"all-day\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isAllDay),expression:\"isAllDay\"}],staticClass:\"checkbox\",attrs:{\"id\":\"allDay\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isAllDay)?_vm._i(_vm.isAllDay,null)>-1:(_vm.isAllDay)},on:{\"change\":function($event){var $$a=_vm.isAllDay,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isAllDay=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isAllDay=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isAllDay=$$c}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"allDay\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'All day'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"label\":\"displayname\",\"track-by\":\"url\",\"allow-empty\":false,\"options\":_vm.calendars},scopedSlots:_vm._u([{key:\"option\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('CalendarPickerOption',_vm._b({},'CalendarPickerOption',option,false))]}},{key:\"singleLabel\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('CalendarPickerOption',_vm._b({attrs:{\"display-icon\":true}},'CalendarPickerOption',option,false))]}}]),model:{value:(_vm.selectedCalendar),callback:function ($$v) {_vm.selectedCalendar=$$v},expression:\"selectedCalendar\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('button',{staticClass:\"primary\",on:{\"click\":_vm.onSave}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create'))+\"\\n\\t\\t\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"","<template>\n\t<ul class=\"list-item-content__actions--primary\">\n\t\t<slot />\n\t</ul>\n</template>\n\n<script>\nexport default {\n\tname: 'EnvelopePrimaryActions',\n}\n</script>\n\n<style>\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text {\n\tfont-size: 14px;\n\tmargin-top: -8px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopePrimaryActions.vue?vue&type=style&index=0&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EnvelopePrimaryActions.vue?vue&type=template&id=bbba5190&\"\nimport script from \"./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopePrimaryActions.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"list-item-content__actions--primary\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<ListItem\n\t\tv-draggable-envelope=\"{\n\t\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\t\tmailboxId: data.mailboxId,\n\t\t\tenvelopeId: data.databaseId,\n\t\t\tdraggableLabel,\n\t\t\tselectedEnvelopes,\n\t\t}\"\n\t\tclass=\"list-item-style\"\n\t\t:class=\"{seen: data.flags.seen, draft, selected: selected}\"\n\t\t:to=\"link\"\n\t\t:data-envelope-id=\"data.databaseId\"\n\t\t:title=\"addresses\"\n\t\t:details=\"formatted()\"\n\t\t@click=\"onClick\">\n\t\t<template #icon>\n\t\t\t<div\n\t\t\t\tv-if=\"mailbox.isUnified && hasMultipleAccounts\"\n\t\t\t\tclass=\"mail-message-account-color\"\n\t\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t\t<div\n\t\t\t\tv-if=\"data.flags.flagged\"\n\t\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star svg icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<div\n\t\t\t\tv-if=\"data.flags.$junk\"\n\t\t\t\tclass=\"app-content-list-item-star icon-junk\"\n\t\t\t\t:data-starred=\"data.flags.$junk ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t\t<Avatar :display-name=\"addresses\" :email=\"avatarEmail\" />\n\t\t\t\t<p v-if=\"selectMode\" class=\"app-content-list-item-select-checkbox\">\n\t\t\t\t\t<input :id=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\tclass=\"checkbox\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:checked=\"selected\">\n\t\t\t\t\t<label\n\t\t\t\t\t\t:for=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\t@click.exact.prevent=\"toggleSelected\"\n\t\t\t\t\t\t@click.shift.prevent=\"onSelectMultiple\" />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #subtitle>\n\t\t\t<span v-if=\"data.flags.answered\" class=\"icon-reply\" />\n\t\t\t<span v-if=\"data.flags.hasAttachments === true\" class=\"icon-public icon-attachment\" />\n\t\t\t<span v-if=\"draft\" class=\"draft\">\n\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t</span>\n\t\t\t{{ subjectForSubtitle }}\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<EnvelopePrimaryActions v-if=\"!moreActionsOpen\">\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<StarOutline v-if=\"showFavoriteIconVariant\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t<Star v-else\n\t\t\t\t\t\t\t:size=\"20\"\n\t\t\t\t\t\t\tfill-color=\"#f9cf3d\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.flagged ? t('mail', 'Unfavorite') : t('mail', 'Favorite')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Email v-if=\"showImportantIconVariant\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t<EmailOutline v-else\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.seen ? t('mail', 'Unread') : t('mail', 'Read')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tisImportant ? t('mail', 'Unimportant') : t('mail', 'Important')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t</EnvelopePrimaryActions>\n\t\t\t<template v-if=\"!moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AlertOctagonIcon\n\t\t\t\t\t\t\t:title=\"data.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t:title=\"selected ? t('mail', 'Unselect') : t('mail', 'Select')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tselected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TagIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit tags')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<OpenInNewIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Move')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Move thread') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DotsHorizontalIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Delete thread')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Delete thread') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t\t<template v-if=\"moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=false\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenEditAsNew\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PlusIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit as new message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"showEventModal = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CalendarBlankIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Create event')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Create event') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t</template>\n\t\t<template #extra>\n\t\t\t<div\n\t\t\t\tv-if=\"mailbox.isUnified && hasMultipleAccounts\"\n\t\t\t\tclass=\"mail-message-account-color\"\n\t\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t:key=\"tag.id\"\n\t\t\t\tclass=\"tag-group\">\n\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t</div>\n\t\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelopes=\"[data]\"\n\t\t\t\t:move-thread=\"true\"\n\t\t\t\t@move=\"onMove\"\n\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t<EventModal v-if=\"showEventModal\"\n\t\t\t\t:envelope=\"data\"\n\t\t\t\t@close=\"showEventModal = false\" />\n\t\t\t<TagModal\n\t\t\t\tv-if=\"showTagModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelope=\"data\"\n\t\t\t\t@close=\"onCloseTagModal\" />\n\t\t</template>\n\t</ListItem>\n</template>\n<script>\nimport ListItem from '@nextcloud/vue/dist/Components/ListItem'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport AlertOctagonIcon from 'vue-material-design-icons/AlertOctagon'\nimport Avatar from './Avatar'\nimport { calculateAccountColor } from '../util/AccountColor'\nimport CalendarBlankIcon from 'vue-material-design-icons/CalendarBlank'\nimport CheckIcon from 'vue-material-design-icons/Check'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport DeleteIcon from 'vue-material-design-icons/Delete'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal'\nimport moment from '@nextcloud/moment'\nimport importantSvg from '../../img/important.svg'\nimport { DraggableEnvelopeDirective } from '../directives/drag-and-drop/draggable-envelope'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport MoveModal from './MoveModal'\nimport OpenInNewIcon from 'vue-material-design-icons/OpenInNew'\nimport StarOutline from 'vue-material-design-icons/StarOutline'\nimport Star from 'vue-material-design-icons/Star'\nimport EmailOutline from 'vue-material-design-icons/EmailOutline'\nimport Email from 'vue-material-design-icons/Email'\nimport ImportantIcon from './icons/ImportantIcon'\nimport PlusIcon from 'vue-material-design-icons/Plus'\nimport TagIcon from 'vue-material-design-icons/Tag'\nimport TagModal from './TagModal'\nimport EventModal from './EventModal'\nimport EnvelopePrimaryActions from './EnvelopePrimaryActions'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tAlertOctagonIcon,\n\t\tCalendarBlankIcon,\n\t\tCheckIcon,\n\t\tChevronLeft,\n\t\tDeleteIcon,\n\t\tDotsHorizontalIcon,\n\t\tEnvelopePrimaryActions,\n\t\tEventModal,\n\t\tListItem,\n\t\tAvatar,\n\t\tActionButton,\n\t\tMoveModal,\n\t\tOpenInNewIcon,\n\t\tPlusIcon,\n\t\tTagIcon,\n\t\tTagModal,\n\t\tStar,\n\t\tStarOutline,\n\t\tEmailOutline,\n\t\tEmail,\n\t\tImportantIcon,\n\t},\n\tdirectives: {\n\t\tdraggableEnvelope: DraggableEnvelopeDirective,\n\t},\n\tprops: {\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselectedEnvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t\thasMultipleAccounts: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timportantSvg,\n\t\t\tshowMoveModal: false,\n\t\t\tshowEventModal: false,\n\t\t\tshowTagModal: false,\n\t\t\tmoreActionsOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.data.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\taccountColor() {\n\t\t\tconst account = this.$store.getters.getAccount(this.data.accountId)\n\t\t\treturn calculateAccountColor(account?.emailAddress ?? '')\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\taccount() {\n\t\t\tconst accountId = this.data.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t\treturn undefined\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddresses() {\n\t\t\t// Show recipients' label/address in a sent mailbox\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.label ? recipient.label : recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients.join(', ') : t('mail', 'Blind copy recipients only')\n\t\t\t}\n\t\t\t// Show sender label/address in other mailbox types\n\t\t\treturn this.data.from[0]?.label ?? this.data.from[0]?.email ?? '?'\n\t\t},\n\t\tavatarEmail() {\n\t\t\t// Show first recipients' avatar in a sent mailbox (or undefined when sent to Bcc only)\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients[0] : ''\n\t\t\t}\n\n\t\t\t// Show sender avatar in other mailbox types\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t},\n\t\tshowFavoriteIconVariant() {\n\t\t\treturn this.data.flags.flagged\n\t\t},\n\t\tshowImportantIconVariant() {\n\t\t\treturn this.data.flags.seen\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.data.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.data.databaseId).filter((tag) => tag.imapLabel && tag.imapLabel !== '$label1')\n\t\t},\n\t\tdraggableLabel() {\n\t\t\tlet label = this.data.subject\n\t\t\tconst sender = this.data.from[0]?.label ?? this.data.from[0]?.email\n\t\t\tif (sender) {\n\t\t\t\tlabel += ` (${sender})`\n\t\t\t}\n\t\t\treturn label\n\t\t},\n\t\t/**\n\t\t * Subject of envelope or \"No Subject\".\n\t\t * @returns {string}\n\t\t */\n\t\tsubjectForSubtitle() {\n\t\t\t// We have to use || here (instead of ??) because the subject might be '', null\n\t\t\t// or undefined.\n\t\t\treturn this.data.subject || this.t('mail', 'No subject')\n\t\t},\n\t},\n\tmethods: {\n\t\tsetSelected(value) {\n\t\t\tif (this.selected !== value) {\n\t\t\t\tthis.$emit('update:selected', value)\n\t\t\t}\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.data.dateInt).fromNow()\n\t\t},\n\t\tunselect() {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.$emit('updated:selected', false)\n\t\t\t}\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected', !this.selected)\n\t\t},\n\t\tonClick(event) {\n\t\t\tif (this.draft && !event.defaultPrevented) {\n\t\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t...this.data,\n\t\t\t\t\t\tdraftId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\ttemplateMessageId: this.data.databaseId,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonSelectMultiple() {\n\t\t\tthis.$emit('select-multiple')\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.data)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.data })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.data)\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tthis.setSelected(false)\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.data.databaseId)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\tenvelope: this.data,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync onOpenEditAsNew() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttemplateMessageId: this.data.databaseId,\n\t\t\t\tdata: this.data,\n\t\t\t})\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonOpenEventModal() {\n\t\t\tthis.showEventModal = true\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.icon-important {\n\t::v-deep path {\n\tfill: #ffcc00;\n\tstroke: var(--color-main-background);\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t::v-deep path {\n\tstroke: var(--color-background-dark);\n\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\tbackground-image: none;\n\tleft: 7px;\n\ttop: 13px;\n\topacity: 1;\n\n\t&:hover,\n\t&:focus {\n\topacity: 0.5;\n\t}\n\t}\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n.list-item-style.selected {\n\tbackground-color: var(--color-background-dark);\n}\n.icon-junk {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 6px;\n\tleft: 34px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n}\nlist-item-style.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n.list-item-style.active {\n\tbackground-color: var(--color-primary-light);\n\tborder-radius: 16px;\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n\t// Fix layout of messages in list until we move to component\n\n.app-content-list .list-item {\n\tpadding-right: 0;\n\n\t.app-content-list-item-line-two {\n\tpadding-right: 0;\n\tmargin-top: -8px;\n\t}\n\n\t.app-content-list-item-menu {\n\tmargin-right: -2px;\n\tmargin-top: -8px;\n\n\t::v-deep .action-item__menu {\n\tright: 7px !important;\n\n\t.action-item__menu_arrow {\n\tright: 6px !important;\n\t}\n\t}\n\t}\n\n\t.app-content-list-item-details {\n\t\tpadding-right: 7px;\n\t\t}\n}\n::v-deep .list-item__extra {\n\tmargin-left: 41px !important;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n::v-deep.list-item__wrapper {\n\tlist-style: none;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: block;\n}\n::v-deep.icon-important.app-content-list-item-star {\n\tposition: absolute;\n\ttop: 7px;\n\tz-index: 1;\n}\n.app-content-list-item-star.icon-starred {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-bottom: 32px;\n\tmargin-left: 28px;\n\tcursor: pointer;\n\tz-index: 1;\n}\n::v-deep .svg svg{\n\theight: 16px;\n\twidth: 16px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=17434778&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=17434778&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=17434778&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17434778\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListItem',{directives:[{name:\"draggable-envelope\",rawName:\"v-draggable-envelope\",value:({\n\t\taccountId: _vm.data.accountId ? _vm.data.accountId : _vm.mailbox.accountId,\n\t\tmailboxId: _vm.data.mailboxId,\n\t\tenvelopeId: _vm.data.databaseId,\n\t\tdraggableLabel: _vm.draggableLabel,\n\t\tselectedEnvelopes: _vm.selectedEnvelopes,\n\t}),expression:\"{\\n\\t\\taccountId: data.accountId ? data.accountId : mailbox.accountId,\\n\\t\\tmailboxId: data.mailboxId,\\n\\t\\tenvelopeId: data.databaseId,\\n\\t\\tdraggableLabel,\\n\\t\\tselectedEnvelopes,\\n\\t}\"}],staticClass:\"list-item-style\",class:{seen: _vm.data.flags.seen, draft: _vm.draft, selected: _vm.selected},attrs:{\"to\":_vm.link,\"data-envelope-id\":_vm.data.databaseId,\"title\":_vm.addresses,\"details\":_vm.formatted()},on:{\"click\":_vm.onClick},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.mailbox.isUnified && _vm.hasMultipleAccounts)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star svg icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.$junk)?_c('div',{staticClass:\"app-content-list-item-star icon-junk\",attrs:{\"data-starred\":_vm.data.flags.$junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.addresses,\"email\":_vm.avatarEmail}}),_vm._v(\" \"),(_vm.selectMode)?_c('p',{staticClass:\"app-content-list-item-select-checkbox\"},[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":(\"select-checkbox-\" + (_vm.data.uid)),\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selected}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"select-checkbox-\" + (_vm.data.uid))},on:{\"click\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)},function($event){if(!$event.shiftKey){ return null; }$event.preventDefault();return _vm.onSelectMultiple.apply(null, arguments)}]}})]):_vm._e()],1)]},proxy:true},{key:\"subtitle\",fn:function(){return [(_vm.data.flags.answered)?_c('span',{staticClass:\"icon-reply\"}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments === true)?_c('span',{staticClass:\"icon-public icon-attachment\"}):_vm._e(),_vm._v(\" \"),(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.subjectForSubtitle)+\"\\n\\t\")]},proxy:true},{key:\"actions\",fn:function(){return [(!_vm.moreActionsOpen)?_c('EnvelopePrimaryActions',[_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showFavoriteIconVariant)?_c('StarOutline',{attrs:{\"size\":20}}):_c('Star',{attrs:{\"size\":20,\"fill-color\":\"#f9cf3d\"}})]},proxy:true}],null,false,2819323606)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.flagged ? _vm.t('mail', 'Unfavorite') : _vm.t('mail', 'Favorite'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showImportantIconVariant)?_c('Email',{attrs:{\"size\":20}}):_c('EmailOutline',{attrs:{\"size\":20}})]},proxy:true}],null,false,251490435)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.seen ? _vm.t('mail', 'Unread') : _vm.t('mail', 'Read'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,4006335173)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Unimportant') : _vm.t('mail', 'Important'))+\"\\n\\t\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),(!_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlertOctagonIcon',{attrs:{\"title\":_vm.data.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'),\"size\":20}})]},proxy:true}],null,false,922843479)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CheckIcon',{attrs:{\"title\":_vm.selected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'),\"size\":20}})]},proxy:true}],null,false,805099236)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.selected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TagIcon',{attrs:{\"title\":_vm.t('mail', 'Edit tags'),\"size\":20}})]},proxy:true}],null,false,1760434282)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('OpenInNewIcon',{attrs:{\"title\":_vm.t('mail', 'Move'),\"size\":20}})]},proxy:true}],null,false,1852981371)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move thread'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DotsHorizontalIcon',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,2458825807)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon',{attrs:{\"title\":_vm.t('mail', 'Delete thread'),\"size\":20}})]},proxy:true}],null,false,2482086091)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete thread'))+\"\\n\\t\\t\\t\")])]:_vm._e(),_vm._v(\" \"),(_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,194182918)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenEditAsNew.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('PlusIcon',{attrs:{\"title\":_vm.t('mail', 'Edit as new message'),\"size\":20}})]},proxy:true}],null,false,2673016614)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();_vm.showEventModal = true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CalendarBlankIcon',{attrs:{\"title\":_vm.t('mail', 'Create event'),\"size\":20}})]},proxy:true}],null,false,3283461621)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create event'))+\"\\n\\t\\t\\t\")])]:_vm._e()]},proxy:true},{key:\"extra\",fn:function(){return [(_vm.mailbox.isUnified && _vm.hasMultipleAccounts)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])}),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.data],\"move-thread\":true},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showEventModal)?_c('EventModal',{attrs:{\"envelope\":_vm.data},on:{\"close\":function($event){_vm.showEventModal = false}}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.data},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<transition name=\"multiselect-header\">\n\t\t\t<div v-if=\"selectMode\" key=\"multiselect-header\" class=\"multiselect-header\">\n\t\t\t\t<div class=\"button primary\" @click.prevent=\"markSelectedSeenOrUnseen\">\n\t\t\t\t\t<span id=\"action-label\">{{\n\t\t\t\t\t\tareAllSelectedRead\n\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}}</span>\n\t\t\t\t</div>\n\t\t\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"isAtLeastOneSelectedUnimportant\"\n\t\t\t\t\t\ticon=\"icon-important\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"markSelectionImportant\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tn(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"isAtLeastOneSelectedImportant\"\n\t\t\t\t\t\ticon=\"icon-important\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"markSelectionUnimportant\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tn(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-starred\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"favoriteOrUnfavoriteAll\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tareAllSelectedFavorite\n\t\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-close\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"unselectAll\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"!account.isUnified\"\n\t\t\t\t\t\ticon=\"icon-external\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\ticon=\"icon-forward\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"deleteAllSelected\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\t\t\t\t<MoveModal\n\t\t\t\t\tv-if=\"showMoveModal\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:envelopes=\"selectedEnvelopes\"\n\t\t\t\t\t:move-thread=\"true\"\n\t\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t</div>\n\t\t</transition>\n\t\t<transition-group name=\"list\">\n\t\t\t<div id=\"list-refreshing\"\n\t\t\t\tkey=\"loading\"\n\t\t\t\tclass=\"icon-loading-small\"\n\t\t\t\t:class=\"{refreshing: refreshing}\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"(env, index) in envelopes\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t:selected=\"selection.includes(env.databaseId)\"\n\t\t\t\t:select-mode=\"selectMode\"\n\t\t\t\t:has-multiple-accounts=\"hasMultipleAccounts\"\n\t\t\t\t:selected-envelopes=\"selectedEnvelopes\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@update:selected=\"onEnvelopeSelectToggle(env, index, ...$event)\"\n\t\t\t\t@select-multiple=\"onEnvelopeSelectMultiple(env, index)\" />\n\t\t\t<div\n\t\t\t\tv-if=\"loadMoreButton && !loadingMore\"\n\t\t\t\t:key=\"'list-collapse-' + searchQuery\"\n\t\t\t\tclass=\"load-more\"\n\t\t\t\t@click=\"$emit('loadMore')\">\n\t\t\t\t{{ t('mail', 'Load more') }}\n\t\t\t</div>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</div>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { showError } from '@nextcloud/dialogs'\n\nimport Envelope from './Envelope'\nimport logger from '../logger'\nimport MoveModal from './MoveModal'\nimport { matchError } from '../errors/match'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport { differenceWith } from 'ramda'\nimport dragEventBus from '../directives/drag-and-drop/util/dragEventBus'\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tEnvelope,\n\t\tMoveModal,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\trefreshing: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t\tdefault: true,\n\t\t},\n\t\tloadingMore: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tloadMoreButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselection: [],\n\t\t\tshowMoveModal: false,\n\t\t\tlastToggledIndex: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tselectMode() {\n\t\t\t// returns true when in selection mode (where the user selects several emails at once)\n\t\t\treturn this.selection.length > 0\n\t\t},\n\t\tareAllSelectedRead() {\n\t\t\t// returns false if at least one selected message has not been read yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.seen === true)\n\t\t},\n\t\tisAtLeastOneSelectedImportant() {\n\t\t\t// returns true if at least one selected message is marked as important\n\t\t\treturn this.selectedEnvelopes.some((env) => {\n\t\t\t\treturn this.$store.getters\n\t\t\t\t\t.getEnvelopeTags(env.databaseId)\n\t\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t\t})\n\t\t},\n\t\tisAtLeastOneSelectedUnimportant() {\n\t\t\t// returns true if at least one selected message is not marked as important\n\t\t\treturn this.selectedEnvelopes.some((env) => {\n\t\t\t\treturn !this.$store.getters\n\t\t\t\t\t.getEnvelopeTags(env.databaseId)\n\t\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t\t})\n\t\t},\n\t\tareAllSelectedFavorite() {\n\t\t\t// returns false if at least one selected message has not been favorited yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.flagged === true)\n\t\t},\n\t\tselectedEnvelopes() {\n\t\t\treturn this.envelopes.filter((env) => this.selection.includes(env.databaseId))\n\t\t},\n\t\thasMultipleAccounts() {\n\t\t\tconst mailboxIds = this.envelopes.map(envelope => envelope.mailboxId)\n\t\t\treturn Array.from(new Set(mailboxIds)).length > 1\n\t\t},\n\t},\n\twatch: {\n\t\tenvelopes(newVal, oldVal) {\n\t\t\t// Unselect vanished envelopes\n\t\t\tconst newIds = newVal.map((env) => env.databaseId)\n\t\t\tthis.selection = this.selection.filter((id) => newIds.includes(id))\n\t\t\tdifferenceWith((a, b) => a.databaseId === b.databaseId, oldVal, newVal)\n\t\t\t\t.forEach((env) => {\n\t\t\t\t\tenv.flags.selected = false\n\t\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tdragEventBus.$on('envelopesDropped', this.unselectAll)\n\t},\n\tbeforeDestroy() {\n\t\tdragEventBus.$off('envelopesDropped', this.unselectAll)\n\t},\n\tmethods: {\n\t\tisEnvelopeSelected(idx) {\n\t\t\tif (this.selection.length === 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selection.includes(idx)\n\t\t},\n\t\tmarkSelectedSeenOrUnseen() {\n\t\t\tconst seen = !this.areAllSelectedRead\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tseen,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tmarkSelectionImportant() {\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeImportantOrUnimportant', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\taddTag: true,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tmarkSelectionUnimportant() {\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeImportantOrUnimportant', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\taddTag: false,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tfavoriteOrUnfavoriteAll() {\n\t\t\tconst favFlag = !this.areAllSelectedFavorite\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeFavoriteOrUnfavorite', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tfavFlag,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tasync deleteAllSelected() {\n\t\t\tlet nextEnvelopeToNavigate\n\t\t\tlet isAllSelected\n\n\t\t\tif (this.selectedEnvelopes.length === this.envelopes.length) {\n\t\t\t\tisAllSelected = true\n\t\t\t} else {\n\t\t\t\tconst indexSelectedEnvelope = this.selectedEnvelopes.findIndex((selectedEnvelope) =>\n\t\t\t\t\tselectedEnvelope.databaseId === this.$route.params.threadId)\n\n\t\t\t\t// one of threads is selected\n\t\t\t\tif (indexSelectedEnvelope !== -1) {\n\t\t\t\t\tconst lastSelectedEnvelope = this.selectedEnvelopes[this.selectedEnvelopes.length - 1]\n\t\t\t\t\tconst diff = this.envelopes.filter(envelope => envelope === lastSelectedEnvelope || !this.selectedEnvelopes.includes(envelope))\n\t\t\t\t\tconst lastIndex = diff.indexOf(lastSelectedEnvelope)\n\t\t\t\t\tnextEnvelopeToNavigate = diff[lastIndex === 0 ? 1 : lastIndex - 1]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait Promise.all(this.selectedEnvelopes.map(async(envelope) => {\n\t\t\t\tlogger.info(`deleting thread ${envelope.threadRootId}`)\n\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\tenvelope,\n\t\t\t\t})\n\t\t\t})).catch(async error => {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t})\n\t\t\tif (nextEnvelopeToNavigate) {\n\t\t\t\tawait this.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tthreadId: nextEnvelopeToNavigate.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// Get new messages\n\t\t\t\tawait this.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tquantity: this.selectedEnvelopes.length,\n\t\t\t\t})\n\t\t\t} else if (isAllSelected) {\n\t\t\t\tawait this.$router.push({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tsetEnvelopeSelected(envelope, selected) {\n\t\t\tconst alreadySelected = this.selection.includes(envelope.databaseId)\n\t\t\tif (selected && !alreadySelected) {\n\t\t\t\tenvelope.flags.selected = true\n\t\t\t\tthis.selection.push(envelope.databaseId)\n\t\t\t} else if (!selected && alreadySelected) {\n\t\t\t\tenvelope.flags.selected = false\n\t\t\t\tthis.selection.splice(this.selection.indexOf(envelope.databaseId), 1)\n\t\t\t}\n\t\t},\n\t\tonEnvelopeSelectToggle(envelope, index, selected) {\n\t\t\tthis.lastToggledIndex = index\n\t\t\tthis.setEnvelopeSelected(envelope, selected)\n\t\t},\n\t\tonEnvelopeSelectMultiple(envelope, index) {\n\t\t\tif (this.lastToggledIndex === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst start = Math.min(this.lastToggledIndex, index)\n\t\t\tconst end = Math.max(this.lastToggledIndex, index)\n\t\t\tconst selected = this.selection.includes(envelope.databaseId)\n\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\tthis.setEnvelopeSelected(this.envelopes[i], !selected)\n\t\t\t}\n\t\t\tthis.lastToggledIndex = index\n\t\t},\n\t\tunselectAll() {\n\t\t\tthis.envelopes.forEach((env) => {\n\t\t\t\tenv.flags.selected = false\n\t\t\t})\n\t\t\tthis.selection = []\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\tforwardedMessages: this.selection,\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t\tthis.unselectAll()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\tposition: absolute;\n\tleft: calc(50% - 8px);\n\toverflow: hidden;\n\tpadding: 12px;\n\tbackground-color: var(--color-main-background);\n\tz-index: 1;\n\tborder-radius: var(--border-radius-pill);\n\tborder: 1px solid var(--color-border);\n\ttop: -24px;\n\topacity: 0;\n\ttransition-property: top, opacity;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n\n\t&.refreshing {\n\t\ttop: 4px;\n\t\topacity: 1;\n\t}\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=0c4ad86c&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=0c4ad86c&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=0c4ad86c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c4ad86c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"multiselect-header\"}},[(_vm.selectMode)?_c('div',{key:\"multiselect-header\",staticClass:\"multiselect-header\"},[_c('div',{staticClass:\"button primary\",on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectedSeenOrUnseen.apply(null, arguments)}}},[_c('span',{attrs:{\"id\":\"action-label\"}},[_vm._v(_vm._s(_vm.areAllSelectedRead\n\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)))])]),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[(_vm.isAtLeastOneSelectedUnimportant)?_c('ActionButton',{attrs:{\"icon\":\"icon-important\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectionImportant.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.isAtLeastOneSelectedImportant)?_c('ActionButton',{attrs:{\"icon\":\"icon-important\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectionUnimportant.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-starred\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.favoriteOrUnfavoriteAll.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.areAllSelectedFavorite\n\t\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-close\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.unselectAll.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-forward\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteAllSelected.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":_vm.selectedEnvelopes,\"move-thread\":true},on:{\"close\":_vm.onCloseMoveModal}}):_vm._e()],1):_vm._e()]),_vm._v(\" \"),_c('transition-group',{attrs:{\"name\":\"list\"}},[_c('div',{key:\"loading\",staticClass:\"icon-loading-small\",class:{refreshing: _vm.refreshing},attrs:{\"id\":\"list-refreshing\"}}),_vm._v(\" \"),_vm._l((_vm.envelopes),function(env,index){return _c('Envelope',{key:env.databaseId,attrs:{\"data\":env,\"mailbox\":_vm.mailbox,\"selected\":_vm.selection.includes(env.databaseId),\"select-mode\":_vm.selectMode,\"has-multiple-accounts\":_vm.hasMultipleAccounts,\"selected-envelopes\":_vm.selectedEnvelopes},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"update:selected\":function($event){return _vm.onEnvelopeSelectToggle.apply(void 0, [ env, index ].concat( $event ))},\"select-multiple\":function($event){return _vm.onEnvelopeSelectMultiple(env, index)}}})}),_vm._v(\" \"),(_vm.loadMoreButton && !_vm.loadingMore)?_c('div',{key:'list-collapse-' + _vm.searchQuery,staticClass:\"load-more\",on:{\"click\":function($event){return _vm.$emit('loadMore')}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Load more'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = (error) => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = (trace) => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tlet text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = (error) => {\n\tconsole.error(error)\n\tlet message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tconst builder = new IssueTemplateBuilder()\n\tconst template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new'\n\t\t+ '?title='\n\t\t+ encodeURIComponent(message)\n\t\t+ '&body='\n\t\t+ encodeURIComponent(template)\n\t)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\"\n\t\t\t\t:href=\"reportUrl\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { getReportUrl } from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=e2d62ba4&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"wrapper\">\n\t\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t\t<a class=\"icon-loading\" />\n\t\t\t<h2>{{ hint }}</h2>\n\t\t\t<transition name=\"fade\">\n\t\t\t\t<em v-if=\"slowHint && slow\">{{ slowHint }}</em>\n\t\t\t</transition>\n\t\t</div>\n\t\t<div v-else class=\"container icon-loading\" />\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'Loading',\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\tslowHint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tslow: false,\n\t\t\tslowTimer: undefined,\n\t\t}\n\t},\n\tmounted() {\n\t\tclearTimeout(this.slowTimer)\n\n\t\tthis.slowTimer = setTimeout(() => {\n\t\t\tthis.slow = true\n\t\t}, 3500)\n\t},\n\tbeforeDestroy() {\n\t\tclearTimeout(this.slowTimer)\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tflex-direction: column;\n\tflex: 1 auto;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=d31c7de6&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=d31c7de6&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=d31c7de6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d31c7de6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[(_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('a',{staticClass:\"icon-loading\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.slowHint && _vm.slow)?_c('em',[_vm._v(_vm._s(_vm.slowHint))]):_vm._e()])],1):_c('div',{staticClass:\"container icon-loading\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<slot> {{ t('mail', 'No messages') }}</slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailboxSection',\n}\n</script>\n<style scoped lang=\"scss\">\n#emptycontent {\n\tmargin-top: 10px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Error v-if=\"error\"\n\t\t:error=\"t('mail', 'Could not open mailbox')\"\n\t\tmessage=\"\"\n\t\trole=\"alert\" />\n\t<Loading v-else-if=\"loadingEnvelopes\" :hint=\"t('mail', 'Loading messages ')\" role=\"alert\" />\n\t<Loading\n\t\tv-else-if=\"loadingCacheInitialization\"\n\t\t:hint=\"t('mail', 'Loading messages ')\"\n\t\t:slow-hint=\"t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')\" />\n\t<EmptyMailboxSection v-else-if=\"isPriorityInbox && !hasMessages\" key=\"empty\" />\n\t<EmptyMailbox v-else-if=\"!hasMessages\" key=\"empty\" />\n\t<EnvelopeList\n\t\tv-else\n\t\t:account=\"account\"\n\t\t:mailbox=\"mailbox\"\n\t\t:search-query=\"searchQuery\"\n\t\t:envelopes=\"envelopesToShow\"\n\t\t:refreshing=\"refreshing\"\n\t\t:loading-more=\"loadingMore\"\n\t\t:load-more-button=\"showLoadMore\"\n\t\t@delete=\"onDelete\"\n\t\t@loadMore=\"loadMore\" />\n</template>\n\n<script>\nimport EmptyMailbox from './EmptyMailbox'\nimport EnvelopeList from './EnvelopeList'\nimport Error from './Error'\nimport { findIndex, propEq } from 'ramda'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport MailboxLockedError from '../errors/MailboxLockedError'\nimport MailboxNotCachedError from '../errors/MailboxNotCachedError'\nimport { matchError } from '../errors/match'\nimport { wait } from '../util/wait'\nimport EmptyMailboxSection from './EmptyMailboxSection'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\n\nexport default {\n\tname: 'Mailbox',\n\tcomponents: {\n\t\tEmptyMailboxSection,\n\t\tEmptyMailbox,\n\t\tEnvelopeList,\n\t\tError,\n\t\tLoading,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tpaginate: {\n\t\t\ttype: String,\n\t\t\tdefault: 'scroll',\n\t\t},\n\t\tinitialPageSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\topenFirst: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisPriorityInbox: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\trefreshing: false,\n\t\t\tloadingMore: false,\n\t\t\tloadingEnvelopes: true,\n\t\t\tloadingCacheInitialization: false,\n\t\t\tloadMailboxInterval: undefined,\n\t\t\texpanded: false,\n\t\t\tendReached: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tenvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery)\n\t\t},\n\t\tenvelopesToShow() {\n\t\t\tif (this.paginate === 'manual' && !this.expanded) {\n\t\t\t\treturn this.envelopes.slice(0, 5)\n\t\t\t}\n\t\t\treturn this.envelopes\n\t\t},\n\t\thasMessages() {\n\t\t\treturn this.envelopes.length > 0\n\t\t},\n\t\tshowLoadMore() {\n\t\t\treturn !this.endReached && this.paginate === 'manual'\n\t\t},\n\t},\n\twatch: {\n\t\t// Force the envelope list to re-render when user clicks on the folder it's currently in\n\t\t$route(to) {\n\t\t\tif (to.params.threadId === undefined && !this.isMobile) {\n\t\t\t\tconst first = this.envelopes[0]\n\t\t\t\tif (typeof first !== 'undefined') {\n\t\t\t\t\tlogger.debug('refreshing mailbox')\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\t// Don't navigate\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taccount() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t\tmailbox() {\n\t\t\tthis.loadEnvelopes()\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mailbox change`)\n\t\t\t\t\tthis.sync(false)\n\t\t\t\t})\n\t\t},\n\t\tsearchQuery() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('loadMore', this.onScroll)\n\t\tthis.bus.$on('delete', this.onDelete)\n\t\tthis.bus.$on('shortcut', this.handleShortcut)\n\t\tthis.loadMailboxInterval = setInterval(this.loadMailbox, 60000)\n\t},\n\tasync mounted() {\n\t\tthis.loadEnvelopes()\n\t\t\t.then(() => {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mount`)\n\t\t\t\tthis.sync(false)\n\t\t\t})\n\t},\n\tdestroyed() {\n\t\tthis.bus.$off('loadMore', this.onScroll)\n\t\tthis.bus.$off('delete', this.onDelete)\n\t\tthis.bus.$off('shortcut', this.handleShortcut)\n\t\tthis.stopInterval()\n\t},\n\tmethods: {\n\t\tinitializeCache() {\n\t\t\tthis.loadingCacheInitialization = true\n\t\t\tthis.error = false\n\n\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) during cache initalization`)\n\t\t\tthis.sync(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingCacheInitialization = false\n\n\t\t\t\t\treturn this.loadEnvelopes()\n\t\t\t\t})\n\t\t},\n\t\tasync loadEnvelopes() {\n\t\t\tlogger.debug(`Fetching envelopes for mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, this.mailbox)\n\t\t\tthis.loadingEnvelopes = true\n\t\t\tthis.loadingCacheInitialization = false\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tlimit: this.initialPageSize,\n\t\t\t\t})\n\n\t\t\t\tlogger.debug(envelopes.length + ' envelopes fetched', { envelopes })\n\n\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\tif (this.openFirst && !this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t// Show first message\n\t\t\t\t\tconst first = envelopes[0]\n\n\t\t\t\t\t// Keep the selected account-mailbox combination, but navigate to the message\n\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.mailboxId here)\n\t\t\t\t\tlogger.debug('showing the first message of mailbox ' + this.$route.params.mailboxId)\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\t\t\tdraftId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tawait matchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) is locked`, { error })\n\n\t\t\t\t\t\tawait wait(15 * 1000)\n\t\t\t\t\t\t// Keep trying\n\t\t\t\t\t\tawait this.loadEnvelopes()\n\t\t\t\t\t},\n\t\t\t\t\t[MailboxNotCachedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) not cached. Triggering initialization`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.initializeCache()\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tlogger.error(`Could not initialize cache of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdefault: (error) => {\n\t\t\t\t\t\tlogger.error(`Could not fetch envelopes of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync loadMore() {\n\t\t\tif (!this.expanded) {\n\t\t\t\tlogger.debug('expanding envelope list')\n\t\t\t\tthis.expanded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug('fetching next envelope page')\n\t\t\tthis.loadingMore = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\tlogger.info('envelope list end reached')\n\t\t\t\t\tthis.endReached = true\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not fetch next envelope page', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loadingMore = false\n\t\t\t}\n\t\t},\n\t\tasync handleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentId = parseInt(this.$route.params.threadId, 10)\n\n\t\t\tconst env = envelopes.find((e) => e.databaseId === currentId)\n\t\t\tconst idx = envelopes.indexOf(env)\n\t\t\tlet next\n\n\t\t\tif (e.srcKey !== 'refresh' && !env) {\n\t\t\t\tlogger.debug('envelope is not in the list, ignoring shortcut', {\n\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tswitch (e.srcKey) {\n\t\t\tcase 'next':\n\t\t\tcase 'prev':\n\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t} else {\n\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t}\n\n\t\t\t\tif (!next) {\n\t\t\t\t\tlogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// Keep the selected account-mailbox combination, but navigate to a different message\n\t\t\t\t// (it's not a bug that we don't use next.accountId and next.mailboxId here)\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\tlogger.debug('deleting', { env })\n\t\t\t\tthis.onDelete(env.databaseId)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\t\tenvelope: env,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('could not delete envelope', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\tcase 'flag':\n\t\t\t\tlogger.debug('flagging envelope via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', env).catch((error) =>\n\t\t\t\t\tlogger.error('could not flag envelope via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tcase 'refresh':\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) per shortcut`)\n\t\t\t\tthis.sync(false)\n\n\t\t\t\tbreak\n\t\t\tcase 'unseen':\n\t\t\t\tlogger.debug('marking message as seen/unseen via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: env }).catch((error) =>\n\t\t\t\t\tlogger.error('could not mark envelope as seen/unseen via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tlogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t\tasync sync(init = false) {\n\t\t\tif (this.refreshing) {\n\t\t\t\tlogger.debug(`already sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery}), aborting`, { init })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.refreshing = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tinit,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tmatchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()](error) {\n\t\t\t\t\t\tlogger.info('Background sync failed because the mailbox is locked', { error, init })\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('Could not sync envelopes: ' + error.message, { error, init })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.refreshing = false\n\t\t\t\tlogger.debug(`finished sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { init })\n\t\t\t}\n\t\t},\n\t\t// onDelete(id): Load more message and navigate to other message if needed\n\t\t// id: The id of the message being delete\n\t\tonDelete(id) {\n\t\t\t// Get a new message\n\t\t\tthis.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\tquery: this.searchQuery,\n\t\t\t\tquantity: 1,\n\t\t\t})\n\t\t\tconst idx = findIndex(propEq('databaseId', id), this.envelopes)\n\t\t\tif (idx === -1) {\n\t\t\t\tlogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (id !== this.$route.params.threadId) {\n\t\t\t\tlogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst next = this.envelopes[idx === 0 ? 1 : idx - 1]\n\t\t\tif (!next) {\n\t\t\t\tlogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected mailbox, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.mailboxId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll() {\n\t\t\tif (this.paginate !== 'scroll') {\n\t\t\t\tlogger.debug('ignoring scroll pagination')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadMore()\n\t\t},\n\t\tasync loadMailbox() {\n\t\t\t// When the account is unified or inbox, return nothing, else sync the mailbox\n\t\t\tif (this.account.isUnified || this.mailbox.specialRole === 'inbox') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) in background`)\n\t\t\t\tawait this.sync(false)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Background sync failed: ' + error.message, { error })\n\t\t\t}\n\t\t},\n\t\tstopInterval() {\n\t\t\tclearInterval(this.loadMailboxInterval)\n\t\t\tthis.loadMailboxInterval = undefined\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// Fix vertical space between sections in priority inbox\n.nameimportant,\n.namestarred {\n\t::v-deep #load-more-mail-messages {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmptyMailboxSection.vue?vue&type=template&id=4512145e&scoped=true&\"\nimport script from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4512145e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_vm._t(\"default\",function(){return [_vm._v(\" \"+_vm._s(_vm.t('mail', 'No messages')))]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=style&index=0&id=f7652ee8&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Mailbox.vue?vue&type=template&id=f7652ee8&scoped=true&\"\nimport script from \"./Mailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Mailbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mailbox.vue?vue&type=style&index=0&id=f7652ee8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f7652ee8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open mailbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loadingEnvelopes)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages '),\"role\":\"alert\"}}):(_vm.loadingCacheInitialization)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages '),\"slow-hint\":_vm.t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')}}):(_vm.isPriorityInbox && !_vm.hasMessages)?_c('EmptyMailboxSection',{key:\"empty\"}):(!_vm.hasMessages)?_c('EmptyMailbox',{key:\"empty\"}):_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.searchQuery,\"envelopes\":_vm.envelopesToShow,\"refreshing\":_vm.refreshing,\"loading-more\":_vm.loadingMore,\"load-more-button\":_vm.showLoadMore},on:{\"delete\":_vm.onDelete,\"loadMore\":_vm.loadMore}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div id=\"emptycontent\">\n\t\t\t<div class=\"icon icon-mail\" />\n\t\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t\t<p />\n\t\t</div>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n}\n</script>\n\n<style scoped>\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=3def5510&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=3def5510&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=3def5510&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3def5510\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[_c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))]),_vm._v(\" \"),_c('p')])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport { translate as t } from '@nextcloud/l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {Folder} folder a folder\n * @returns {string}\n */\nexport const getRandomFolderErrorMessage = (folder) => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map((text) => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @returns {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Popover trigger=\"click\" class=\"contact-popover\">\n\t\t<UserBubble slot=\"trigger\"\n\t\t\t:display-name=\"label\"\n\t\t\t:avatar-image=\"avatarUrlAbsolute\"\n\t\t\t@click=\"onClickOpenContactDialog\">\n\t\t\t<span class=\"user-bubble-email\">{{ email }}</span>\n\t\t</UserBubble>\n\t\t<div class=\"contact-wrapper\">\n\t\t\t<div v-if=\"contactsWithEmail && contactsWithEmail.length > 0\" class=\"contact-existing\">\n\t\t\t\t<span class=\"icon-details\">\n\t\t\t\t\t{{ t('mail', 'Contacts with this address') }}:\n\t\t\t\t</span>\n\t\t\t\t<span>\n\t\t\t\t\t{{ contactsWithEmailComputed }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-if=\"selection === ContactSelectionStateEnum.select\" class=\"contact-menu\">\n\t\t\t\t<a class=\"icon-reply\" @click=\"onClickReply\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Reply') }}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"icon-user\" @click=\"selection = ContactSelectionStateEnum.existing\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Add to Contact') }}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"icon-add\" @click=\"selection = ContactSelectionStateEnum.new\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'New Contact') }}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"icon-clippy\" @click=\"onClickCopyToClipboard\">\n\t\t\t\t\t<span class=\"action-label\">{{ t('mail', 'Copy to clipboard') }}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div v-else class=\"contact-input-wrapper\">\n\t\t\t\t<Multiselect\n\t\t\t\t\tv-if=\"selection === ContactSelectionStateEnum.existing\"\n\t\t\t\t\tid=\"contact-selection\"\n\t\t\t\t\tref=\"contact-selection-label\"\n\t\t\t\t\tv-model=\"selectedContact\"\n\t\t\t\t\t:options=\"selectableContacts\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"label\"\n\t\t\t\t\t:multiple=\"false\"\n\t\t\t\t\t:placeholder=\"t('name', 'Contact name ')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t@search-change=\"onAutocomplete\" />\n\n\t\t\t\t<input v-else-if=\"selection === ContactSelectionStateEnum.new\" v-model=\"newContactName\">\n\t\t\t</div>\n\t\t\t<div v-if=\"selection !== ContactSelectionStateEnum.select\">\n\t\t\t\t<a class=\"icon-close\" type=\"button\" @click=\"selection = ContactSelectionStateEnum.select\">\n\t\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\tv-close-popover\n\t\t\t\t\t:disabled=\"addButtonDisabled\"\n\t\t\t\t\tclass=\"icon-checkmark\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t@click=\"onClickAddToContact\">\n\t\t\t\t\t{{ t('mail', 'Add') }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</Popover>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport UserBubble from '@nextcloud/vue/dist/Components/UserBubble'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\n\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\nimport { addToContact, findMatches, newContact, autoCompleteByName } from '../service/ContactIntegrationService'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport debouncePromise from 'debounce-promise'\n\nconst debouncedSearch = debouncePromise(autoCompleteByName, 500)\n\nconst ContactSelectionStateEnum = Object.freeze({ new: 1, existing: 2, select: 3 })\n\nexport default {\n\tname: 'RecipientBubble',\n\tcomponents: {\n\t\tUserBubble,\n\t\tPopover,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: undefined,\n\t\t\tloadingContacts: false,\n\t\t\tcontactsWithEmail: [],\n\t\t\tautoCompleteContacts: [],\n\t\t\tselectedContact: '',\n\t\t\tnewContactName: '',\n\t\t\tContactSelectionStateEnum,\n\t\t\tselection: ContactSelectionStateEnum.select,\n\t\t\tisContactPopoverOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tavatarUrlAbsolute() {\n\t\t\tif (!this.avatarUrl) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.avatarUrl.startsWith('http')) {\n\t\t\t\treturn this.avatarUrl\n\t\t\t}\n\n\t\t\t// Make it an absolute URL because the user bubble component doesn't work with relative URLs\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl(this.avatarUrl)\n\t\t},\n\t\tselectableContacts() {\n\t\t\treturn this.autoCompleteContacts\n\t\t\t\t.map((contact) => ({ ...contact, label: contact.label }))\n\t\t},\n\t\tcontactsWithEmailComputed() {\n\t\t\tlet additional = ''\n\t\t\tif (this.contactsWithEmail && this.contactsWithEmail.length > 3) {\n\t\t\t\tadditional = ` + ${this.contactsWithEmail.length - 3}`\n\t\t\t}\n\t\t\treturn this.contactsWithEmail.slice(0, 3).map(e => e.label).join(', ').concat(additional)\n\t\t},\n\t\taddButtonDisabled() {\n\t\t\treturn !((this.selection === ContactSelectionStateEnum.existing && this.selectedContact)\n\t\t\t\t\t|| (this.selection === ContactSelectionStateEnum.new && this.newContactName.trim() !== ''))\n\t\t},\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t} catch (error) {\n\t\t\tconsole.debug('no avatar for ' + this.email, {\n\t\t\t\terror,\n\t\t\t})\n\t\t}\n\t\tthis.newContactName = this.label\n\t},\n\tmethods: {\n\t\tonClickCopyToClipboard() {\n\t\t\tthis.$copyText(this.email)\n\t\t},\n\t\tonClickReply() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'mailto',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonClickOpenContactDialog() {\n\t\t\tif (this.contactsWithEmail.length === 0) { // TODO fix me\n\t\t\t\tfindMatches(this.email).then(res => {\n\t\t\t\t\tif (res && res.length > 0) {\n\t\t\t\t\t\tthis.contactsWithEmail = res\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonClickAddToContact() {\n\t\t\tif (this.selection === ContactSelectionStateEnum.new) {\n\t\t\t\tif (this.newContactName !== '') {\n\t\t\t\t\tnewContact(this.newContactName.trim(), this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t} else if (this.selection === ContactSelectionStateEnum.existing) {\n\t\t\t\tif (this.selectedContact) {\n\t\t\t\t\taddToContact(this.selectedContact.id, this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tthis.autoCompleteContacts = uniqBy('id')(this.autoCompleteContacts.concat(results))\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n\n.contact-menu {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n.contact-popover {\n\tdisplay: inline-block;\n}\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput,\n\t.multiselect {\n\t\twidth: 100%;\n\t}\n}\n.icon-clippy,\n.icon-user,\n.icon-reply,\n.icon-checkmark,\n.icon-close,\n.icon-add {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n@media only screen and (min-width: 600px) {\n\t.icon-clippy,\n\t.icon-user,\n\t.icon-reply,\n\t.icon-checkmark,\n\t.icon-close,\n\t.icon-add {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n.contact-existing {\n\tmargin-bottom: 10px;\n\tfont-size: small;\n\t.icon-details {\n\t\tpadding-left: 34px;\n\t\tbackground-position: 10px center;\n\t\ttext-align: left;\n\t}\n}\n\n</style>\n","/*\n * @copyright 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @author 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findMatches = (mail) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/match/{mail}', {\n\t\tmail,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n\nexport const addToContact = (id, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/add')\n\n\treturn Axios.put(url, { uid: id, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const newContact = (name, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/new')\n\n\treturn Axios.put(url, { contactName: name, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const autoCompleteByName = (term) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/autoComplete/{term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=style&index=0&id=09fd225b&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./RecipientBubble.vue?vue&type=template&id=09fd225b&scoped=true&\"\nimport script from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientBubble.vue?vue&type=style&index=0&id=09fd225b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09fd225b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Popover',{staticClass:\"contact-popover\",attrs:{\"trigger\":\"click\"}},[_c('UserBubble',{attrs:{\"slot\":\"trigger\",\"display-name\":_vm.label,\"avatar-image\":_vm.avatarUrlAbsolute},on:{\"click\":_vm.onClickOpenContactDialog},slot:\"trigger\"},[_c('span',{staticClass:\"user-bubble-email\"},[_vm._v(_vm._s(_vm.email))])]),_vm._v(\" \"),_c('div',{staticClass:\"contact-wrapper\"},[(_vm.contactsWithEmail && _vm.contactsWithEmail.length > 0)?_c('div',{staticClass:\"contact-existing\"},[_c('span',{staticClass:\"icon-details\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Contacts with this address'))+\":\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.contactsWithEmailComputed)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.selection === _vm.ContactSelectionStateEnum.select)?_c('div',{staticClass:\"contact-menu\"},[_c('a',{staticClass:\"icon-reply\",on:{\"click\":_vm.onClickReply}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('a',{staticClass:\"icon-user\",on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.existing}}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Add to Contact')))])]),_vm._v(\" \"),_c('a',{staticClass:\"icon-add\",on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.new}}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'New Contact')))])]),_vm._v(\" \"),_c('a',{staticClass:\"icon-clippy\",on:{\"click\":_vm.onClickCopyToClipboard}},[_c('span',{staticClass:\"action-label\"},[_vm._v(_vm._s(_vm.t('mail', 'Copy to clipboard')))])])]):_c('div',{staticClass:\"contact-input-wrapper\"},[(_vm.selection === _vm.ContactSelectionStateEnum.existing)?_c('Multiselect',{ref:\"contact-selection-label\",attrs:{\"id\":\"contact-selection\",\"options\":_vm.selectableContacts,\"taggable\":true,\"label\":\"label\",\"track-by\":\"label\",\"multiple\":false,\"placeholder\":_vm.t('name', 'Contact name '),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectedContact),callback:function ($$v) {_vm.selectedContact=$$v},expression:\"selectedContact\"}}):(_vm.selection === _vm.ContactSelectionStateEnum.new)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newContactName),expression:\"newContactName\"}],domProps:{\"value\":(_vm.newContactName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newContactName=$event.target.value}}}):_vm._e()],1),_vm._v(\" \"),(_vm.selection !== _vm.ContactSelectionStateEnum.select)?_c('div',[_c('a',{staticClass:\"icon-close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.select}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('a',{directives:[{name:\"close-popover\",rawName:\"v-close-popover\"}],staticClass:\"icon-checkmark\",attrs:{\"disabled\":_vm.addButtonDisabled,\"type\":\"button\"},on:{\"click\":_vm.onClickAddToContact}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add'))+\"\\n\\t\\t\\t\")])]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @param {Text} message the message\n * @returns {boolean|*}\n */\nexport const isPgpgMessage = (message) =>\n\tmessage.format === 'plain' && message.value.startsWith('-----BEGIN PGP MESSAGE-----')\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Actions v-if=\"calendars.length\" default-icon=\"icon-add\">\n\t\t<ActionButton\n\t\t\tv-for=\"(calendar, idx) in cals\"\n\t\t\t:key=\"idx\"\n\t\t\t:icon=\"calendar.loading ? 'icon-loading-small' : 'icon-add'\"\n\t\t\t@click=\"onImport(calendar)\">\n\t\t\t{{ t('mail', 'Import into {calendar}', {calendar: calendar.displayname}) }}\n\t\t</ActionButton>\n\t</Actions>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ical from 'ical.js'\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'CalendarImport',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\thandler: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcals() {\n\t\t\treturn this.calendars.map((original) => {\n\t\t\t\tthis.$set(original, 'loading', false)\n\t\t\t\treturn original\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonImport(calendar) {\n\t\t\tcalendar.loading = true\n\n\t\t\tthis.handler(calendar)\n\t\t\t\t.catch(console.error.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tcalendar.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n\n\titineraryDateTime(dt) {\n\t\tif (typeof dt === 'string') {\n\t\t\treturn dt\n\t\t}\n\t\treturn dt['@value']\n\t},\n\n\taddIcalTimeProperty(icalEvent, itineraryDt, icalPropertyName) {\n\t\tconst t = moment(this.itineraryDateTime(itineraryDt)).format()\n\t\tconst prop = icalEvent.updatePropertyWithValue(icalPropertyName, ical.Time.fromDateTimeString(t))\n\t\tif (typeof itineraryDt !== 'string') {\n\t\t\tprop.setParameter('TZID', itineraryDt.timezone)\n\t\t}\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./CalendarImport.vue?vue&type=template&id=c109c658&scoped=true&\"\nimport script from \"./CalendarImport.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarImport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c109c658\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.calendars.length)?_c('Actions',{attrs:{\"default-icon\":\"icon-add\"}},_vm._l((_vm.cals),function(calendar,idx){return _c('ActionButton',{key:idx,attrs:{\"icon\":calendar.loading ? 'icon-loading-small' : 'icon-add'},on:{\"click\":function($event){return _vm.onImport(calendar)}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Import into {calendar}', {calendar: calendar.displayname}))+\"\\n\\t\")])}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\n\t\t\t} else if ('startDate' in this.data.reservationFor) {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tconst end = this.getEndDateTime(this.data.reservationFor)\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=4ec97965&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EventReservation.vue?vue&type=template&id=4ec97965&scoped=true&\"\nimport script from \"./EventReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./EventReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventReservation.vue?vue&type=style&index=0&id=4ec97965&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ec97965\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"event\"},[_c('div',{staticClass:\"event-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.eventName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"venue\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.location)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.date)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.date)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.time)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.time)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=2a317718&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./FlightReservation.vue?vue&type=template&id=2a317718&scoped=true&\"\nimport script from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlightReservation.vue?vue&type=style&index=0&id=2a317718&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a317718\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('AirplaneIcon',{attrs:{\"title\":_vm.t('mail', 'Airplane')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flightNumber))]),_vm._v(\" \"),(_vm.reservation)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reservation {id}', {id: _vm.reservation}))+\"\\n\\t\\t\")]):_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=08dee74f&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TrainReservation.vue?vue&type=template&id=08dee74f&scoped=true&\"\nimport script from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainReservation.vue?vue&type=style&index=0&id=08dee74f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08dee74f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('TrainIcon',{attrs:{\"title\":_vm.t('mail', 'Train')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.trainNumber))]),_vm._v(\" \"),_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<EventReservation\n\t\t\t\tv-if=\"entry['@type'] === 'EventReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<FlightReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'FlightReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<TrainReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'TrainReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<span v-else :key=\"idx\">{{\n\t\t\t\tt('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})\n\t\t\t}}</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport once from 'lodash/fp/once'\n\nimport { getUserCalendars } from '../service/DAVService'\nimport logger from '../logger'\nimport EventReservation from './itinerary/EventReservation'\nimport FlightReservation from './itinerary/FlightReservation'\nimport TrainReservation from './itinerary/TrainReservation'\n\nconst getUserCalendarsOnce = once(getUserCalendars)\n\nexport default {\n\tname: 'Itinerary',\n\tcomponents: {\n\t\tEventReservation,\n\t\tFlightReservation,\n\t\tTrainReservation,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t}\n\t},\n\tmounted() {\n\t\tgetUserCalendarsOnce()\n\t\t\t.then((calendars) => (this.calendars = calendars))\n\t\t\t.catch((error) => logger.error('Could not load calendars', { error }))\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Itinerary.vue?vue&type=template&id=5044772a&\"\nimport script from \"./Itinerary.vue?vue&type=script&lang=js&\"\nexport * from \"./Itinerary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.entries),function(entry,idx){return [(entry['@type'] === 'EventReservation')?_c('EventReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'FlightReservation')?_c('FlightReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'TrainReservation')?_c('TrainReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):_c('span',{key:idx},[_vm._v(_vm._s(_vm.t('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})))])]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport function saveAttachmentToFiles(id, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'/apps/mail/api/messages/{id}/attachment/{attachmentId}',\n\t\t{\n\t\t\tid,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(id, directory) {\n\t// attachmentId = 0 means 'all attachments' (see MessageController.php::saveAttachement)\n\treturn saveAttachmentToFiles(id, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then((res) => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: (prog) => progress(prog, prog.loaded, prog.total),\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then((resp) => resp.data)\n\t\t.then(({ id }) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport logger from '../logger'\n\nlet mailvelope\n\nconst loadMailvelopeStatically = () => window.mailvelope\n\nconst loadMailvelopeDynamically = () =>\n\tnew Promise((resolve) => {\n\t\twindow.addEventListener('mailvelope', () => resolve(window.mailvelope), false)\n\t})\n\nexport const getMailvelope = async() => {\n\tif (mailvelope) {\n\t\treturn mailvelope\n\t}\n\n\tmailvelope = loadMailvelopeStatically()\n\tif (mailvelope) {\n\t\tlogger.debug('mailvelope found statically')\n\t\treturn mailvelope\n\t}\n\n\tlogger.debug('loading mailvelope dynamically')\n\tmailvelope = await loadMailvelopeDynamically()\n\tlogger.debug('mailvelope found dynamically')\n\treturn mailvelope\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\"\n\t\t@click=\"$emit('click', $event)\">\n\t\t<img v-if=\"isImage\" class=\"mail-attached-image\" :src=\"url\">\n\t\t<img class=\"attachment-icon\" :src=\"mimeUrl\">\n\t\t<span class=\"attachment-name\"\n\t\t\t:title=\"label\">{{ name }}\n\t\t\t<span class=\"attachment-size\">({{ humanReadable(size) }})</span>\n\t\t</span>\n\t\t<Actions :boundaries-element=\"boundariesElement\">\n\t\t\t<ActionButton\n\t\t\t\tv-if=\"isCalendarEvent\"\n\t\t\t\tclass=\"attachment-import calendar\"\n\t\t\t\t:icon=\"{'icon-add': !loadingCalendars, 'icon-loading-small': loadingCalendars}\"\n\t\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t\t@click.stop=\"loadCalendars\">\n\t\t\t\t{{ t('mail', 'Import into calendar') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-download\"\n\t\t\t\tclass=\"attachment-download\"\n\t\t\t\t@click=\"download\">\n\t\t\t\t{{ t('mail', 'Download attachment') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t\t:icon=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click.stop=\"saveToCloud\">\n\t\t\t\t{{ t('mail', 'Save to Files') }}\n\t\t\t</ActionButton>\n\t\t\t<div\n\t\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t\t:class=\"{open: showCalendarPopover}\">\n\t\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\" />\n\t\t\t</div>\n\t\t</Actions>\n\t</div>\n</template>\n\n<script>\n\nimport { formatFileSize } from '@nextcloud/files'\nimport { translate as t } from '@nextcloud/l10n'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { mixin as onClickOutside } from 'vue-on-click-outside'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\n\nimport Logger from '../logger'\n\nimport { downloadAttachment, saveAttachmentToFiles } from '../service/AttachmentService'\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t\tActions,\n\t\tActionButton,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\tdefault: t('mail', 'Unnamed'),\n\t\t\trequired: false,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tname() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message')\n\t\t\t}\n\t\t\treturn this.fileName\n\t\t},\n\t\tlabel() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message') + ' (' + formatFileSize(this.size) + ')'\n\t\t\t}\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map((cal) => {\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tboundariesElement() {\n\t\t\treturn document.querySelector('#content-vue')\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (id, attachmentId) => (directory) => {\n\t\t\t\treturn saveAttachmentToFiles(id, attachmentId, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((e) => Logger.error('not saved', { error: e }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.location = this.url\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then((calendars) => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch((e) => Logger.error('import error', { error: e }))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: calc(100% - 32px);\n\tpadding: 16px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\tcursor: pointer;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n\tcursor: pointer;\n}\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 72px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n\tmargin-bottom: 20px;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n\tmargin-bottom: 20px;\n}\n.action-item {\n\tdisplay: inline-block !important;\n\tposition: relative !important;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=016cf9f4&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=016cf9f4&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=016cf9f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"016cf9f4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment\",on:{\"click\":function($event){return _vm.$emit('click', $event)}}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}}),_vm._v(\" \"),_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.name)+\"\\n\\t\\t\"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(\"(\"+_vm._s(_vm.humanReadable(_vm.size))+\")\")])]),_vm._v(\" \"),_c('Actions',{attrs:{\"boundaries-element\":_vm.boundariesElement}},[(_vm.isCalendarEvent)?_c('ActionButton',{staticClass:\"attachment-import calendar\",attrs:{\"icon\":{'icon-add': !_vm.loadingCalendars, 'icon-loading-small': _vm.loadingCalendars},\"disabled\":_vm.loadingCalendars},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Import into calendar'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{staticClass:\"attachment-download\",attrs:{\"icon\":\"icon-download\"},on:{\"click\":_vm.download}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download attachment'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"attachment-save-to-cloud\",attrs:{\"icon\":{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},\"disabled\":_vm.savingToCloud},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save to Files'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachmentImageViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachmentImageViewer.vue?vue&type=script&lang=js&\"","<template>\n\t<Modal\n\t\tsize=\"large\"\n\t\t@close=\"$emit('close')\">\n\t\t<img\n\t\t\t:src=\"url\"\n\t\t\tclass=\"modal__attachment\">\n\t</Modal>\n</template>\n\n<script>\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nexport default {\n\tname: 'AttachmentImageViewer',\n\tcomponents: {\n\t\tModal,\n\t},\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-wrapper {\n\t.modal-container {\n\t\tbackground-color: unset !important;\n\t\tbox-shadow: none !important;\n\t\theight: auto !important;\n\t\ttop: unset !important;\n\t}\n\n\t.modal__attachment {\n\t\tdisplay: flex;\n\t\tmargin: 0 auto;\n\t\tmax-width: min(850px, 85vw);\n\t\tmax-height: 85vh;\n\t\tbackground-color: var(--color-main-background);\n\t}\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttachmentImageViewer.vue?vue&type=style&index=0&id=4507de1c&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"mail-message-attachments\">\n\t\t<div class=\"attachments\">\n\t\t\t<MessageAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t:mime=\"attachment.mime\"\n\t\t\t\t:mime-url=\"attachment.mimeUrl\"\n\t\t\t\t@click=\"showViewer(attachment)\" />\n\t\t\t<AttachmentImageViewer v-if=\"attachmentImageURL && showPreview\"\n\t\t\t\t:url=\"attachmentImageURL\"\n\t\t\t\t@close=\"showPreview = false\" />\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\" class=\"attachments-button-wrapper\">\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud\"\n\t\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\">\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud icon-folder\"\n\t\t\t\t@click=\"downloadZip\">\n\t\t\t\t{{ t('mail', 'Download Zip') }}\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { saveAttachmentsToFiles } from '../service/AttachmentService'\n\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\nimport AttachmentImageViewer from './AttachmentImageViewer'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tAttachmentImageViewer,\n\t\tMessageAttachment,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tshowPreview: false,\n\t\t\tattachmentImageURL: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t\tzipUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/attachments', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveAll() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachments in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\tconst saveAttachments = (id) => (directory) => {\n\t\t\t\treturn saveAttachmentsToFiles(id, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((error) => Logger.error('not saved', { error }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownloadZip() {\n\t\t\twindow.location = this.zipUrl\n\t\t},\n\t\tshowViewer(attachment) {\n\t\t\tif (attachment.isImage) {\n\t\t\t\tthis.showPreview = true\n\t\t\t\tthis.attachmentImageURL = attachment.downloadUrl\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.attachments {\n\twidth: 230px;\n  position: relative;\n  display: flex;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n}\n.attachments-save-to-cloud {\n\tdisplay: inline-block;\n\tmargin: 16px;\n\tbackground-position: 16px center;\n  padding: 12px 12px 12px 37px !important;\n}\n.oc-dialog {\n\tz-index: 10000000;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n</style>\n","import { render, staticRenderFns } from \"./AttachmentImageViewer.vue?vue&type=template&id=4507de1c&scoped=true&\"\nimport script from \"./AttachmentImageViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./AttachmentImageViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AttachmentImageViewer.vue?vue&type=style&index=0&id=4507de1c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4507de1c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"size\":\"large\"},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('img',{staticClass:\"modal__attachment\",attrs:{\"src\":_vm.url}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=6b3bdbe4&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mail-message-attachments\"},[_c('div',{staticClass:\"attachments\"},[_vm._l((_vm.attachments),function(attachment){return _c('MessageAttachment',{key:attachment.id,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime\":attachment.mime,\"mime-url\":attachment.mimeUrl},on:{\"click\":function($event){return _vm.showViewer(attachment)}}})}),_vm._v(\" \"),(_vm.attachmentImageURL && _vm.showPreview)?_c('AttachmentImageViewer',{attrs:{\"url\":_vm.attachmentImageURL},on:{\"close\":function($event){_vm.showPreview = false}}}):_vm._e()],2),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',{staticClass:\"attachments-button-wrapper\"},[_c('button',{staticClass:\"attachments-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"attachments-save-to-cloud icon-folder\",on:{\"click\":_vm.downloadZip}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download Zip'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"hasMdnRequest && !mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'The sender of this message has asked to be notified when you read this message.')\n\t\t}}\n\t\t<button :disabled=\"loading\" @click=\"sendMdn\">\n\t\t\t{{ t('mail', 'Notify the sender') }}\n\t\t</button>\n\t</div>\n\t<div v-else-if=\"mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'You sent a read confirmation to the sender of this message.')\n\t\t}}\n\t</div>\n</template>\n\n<script>\nimport logger from '../logger'\nimport { sendMdn } from '../service/MessageService'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MdnRequest',\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thasMdnRequest: this.message.dispositionNotificationTo && this.message.dispositionNotificationTo.length > 0,\n\t\t\tloading: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmdnSent() {\n\t\t\treturn this.message.flags.mdnsent\n\t\t},\n\t},\n\tmethods: {\n\t\tasync sendMdn() {\n\t\t\tthis.loading = true\n\t\t\tlogger.debug('send return receipt')\n\n\t\t\ttry {\n\t\t\t\tawait sendMdn(this.message.databaseId)\n\t\t\t\tthis.$store.commit('flagEnvelope', { envelope: this.message, flag: 'mdnsent', value: true })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not send mdn', error)\n\t\t\t\tshowError(t('mail', 'Could not send mdn'))\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MdnRequest.vue?vue&type=template&id=3bf60f28&scoped=true&\"\nimport script from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nexport * from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf60f28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasMdnRequest && !_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'The sender of this message has asked to be notified when you read this message.'))+\"\\n\\t\"),_c('button',{attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.sendMdn}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Notify the sender'))+\"\\n\\t\")])]):(_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'You sent a read confirmation to the sender of this message.'))+\"\\n\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n</script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageEncryptedBody.vue?vue&type=template&id=812ccd96&scoped=true&\"\nimport script from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"812ccd96\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.mailvelope)?_c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}})],1):_c('span',[_vm._v(_vm._s(_vm.t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\" style=\"color: #000000\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<Actions default-icon=\"icon-toggle\" :menu-title=\"t('mail', 'Show')\">\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"displayIframe\">\n\t\t\t\t\t{{ t('mail', 'Show images temporarily') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"sender\"\n\t\t\t\t\ticon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContent\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {sender}', { sender }) }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"domain\"\n\t\t\t\t\ticon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContentForDomain\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {domain}', { domain }) }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\t\t<div v-if=\"loading\" class=\"icon-loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading, scroll: !fullHeight}\">\n\t\t\t<iframe ref=\"iframe\"\n\t\t\t\tclass=\"message-frame\"\n\t\t\t\t:title=\"t('mail', 'Message frame')\"\n\t\t\t\t:src=\"url\"\n\t\t\t\tseamless\n\t\t\t\t@load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { iframeResizer } from 'iframe-resizer'\nimport PrintScout from 'printscout'\nimport { trustSender } from '../service/TrustedSenderService'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\n\nimport logger from '../logger'\nimport MdnRequest from './MdnRequest'\nconst scout = new PrintScout()\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tcomponents: {\n\t\tMdnRequest,\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfullHeight: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t\tisSenderTrusted: this.message.isSenderTrusted,\n\t\t}\n\t},\n\tcomputed: {\n\t\tsender() {\n\t\t\treturn this.message.from[0]?.email\n\t\t},\n\t\tdomain() {\n\t\t\treturn this.sender?.split('@').pop()\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t},\n\tmounted() {\n\t\tiframeResizer({ log: false, heightCalculationMethod: 'taggedElement' }, this.$refs.iframe)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tthis.$refs.iframe.iFrameResizer.close()\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tthis.hasBlockedContent\n\t\t\t\t= iframeDoc.querySelectorAll('[data-original-src]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('[data-original-style]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('style[data-original-content]').length > 0\n\n\t\t\tthis.loading = false\n\t\t\tif (this.isSenderTrusted) {\n\t\t\t\tthis.displayIframe()\n\t\t\t}\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tdisplayIframe() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tlogger.debug('showing external images')\n\t\t\tiframeDoc.querySelectorAll('[data-original-src]').forEach((node) => {\n\t\t\t\tnode.style.display = null\n\t\t\t\tnode.setAttribute('src', node.getAttribute('data-original-src'))\n\t\t\t})\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach((node) => node.setAttribute('style', node.getAttribute('data-original-style')))\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('style[data-original-content]')\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tnode.innerHTML = node.getAttribute('data-original-content')\n\t\t\t\t})\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t\tasync onShowBlockedContent() {\n\t\t\tthis.displayIframe()\n\t\t\tawait trustSender(this.message.from[0].email, 'individual', true)\n\t\t},\n\t\tasync onShowBlockedContentForDomain() {\n\t\t\tthis.displayIframe()\n\t\t\t// TODO: there might be more than one @ in an email address\n\t\t\tawait trustSender(this.domain, 'domain', true)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 48px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 8px;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n::v-deep .icon-toggle {\n\tbackground-image: var(--icon-toggle-000) !important;\n}\n::v-deep .action-item__menutoggle--with-title {\n\tbackground-color: var(--color-background-hover) !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=f2e16bd6&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=f2e16bd6&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=f2e16bd6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2e16bd6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),(_vm.hasBlockedContent)?_c('div',{staticStyle:{\"color\":\"#000000\"},attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('Actions',{attrs:{\"default-icon\":\"icon-toggle\",\"menu-title\":_vm.t('mail', 'Show')}},[_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.displayIframe}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Show images temporarily'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.sender)?_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContent}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {sender}', { sender: _vm.sender }))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.domain)?_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContentForDomain}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {domain}', { domain: _vm.domain }))+\"\\n\\t\\t\\t\")]):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"icon-loading\"}):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading, scroll: !_vm.fullHeight},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",staticClass:\"message-frame\",attrs:{\"title\":_vm.t('mail', 'Message frame'),\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div id=\"message-container\" v-html=\"nl2br(enhancedBody)\" />\n\t\t<details v-if=\"signature\" class=\"mail-signature\">\n\t\t\t<summary v-html=\"nl2br(signatureSummaryAndBody.summary)\" />\n\t\t\t<span v-html=\"nl2br(signatureSummaryAndBody.body)\" />\n\t\t</details>\n\t</div>\n</template>\n\n<script>\nimport MdnRequest from './MdnRequest'\nconst regFirstParagraph = /(.+\\n\\r?)+(\\n\\r?)+/\n\nexport default {\n\tname: 'MessagePlainTextBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tcomputed: {\n\t\tenhancedBody() {\n\t\t\treturn this.body.replace(/(^&gt;.*\\n)+/gm, (match) => {\n\t\t\t\treturn `<details class=\"quoted-text\"><summary>${t('mail', 'Quoted text')}</summary>${match}</details>`\n\t\t\t})\n\t\t},\n\t\tsignatureSummaryAndBody() {\n\t\t\tconst matches = this.signature.trim().match(regFirstParagraph)\n\n\t\t\tif (matches && matches[0]) {\n\t\t\t\treturn {\n\t\t\t\t\tsummary: matches[0],\n\t\t\t\t\tbody: this.signature.substring(matches[0].length),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lines = this.signature.trim().split(/\\r?\\n/)\n\t\t\treturn {\n\t\t\t\tsummary: lines[0],\n\t\t\t\tbody: lines.slice(1).join('\\n'),\n\t\t\t}\n\t\t},\n\t\tsignatureSummary() {\n\t\t\tconsole.info(this.signature.match(regFirstParagraph))\n\n\t\t\treturn this.signatureSummaryAndBody.summary\n\t\t},\n\t},\n\tmethods: {\n\t\tnl2br(str) {\n\t\t\treturn str.replace(/(\\r\\n|\\n\\r|\\n|\\r)/g, '<br />')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n</style>\n<style lang=\"scss\" scoped>\n#mail-content, .mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=1&id=9fd9f8e0&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div :class=\"[message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body']\"\n\t\trole=\"region\"\n\t\t:aria-label=\"t('mail','Message body')\">\n\t\t<div v-if=\"itineraries.length > 0\" class=\"message-itinerary\">\n\t\t\t<Itinerary :entries=\"itineraries\" :message-id=\"message.messageId\" />\n\t\t</div>\n\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\"\n\t\t\t:url=\"htmlUrl\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<MessageEncryptedBody v-else-if=\"isEncrypted\"\n\t\t\t:body=\"message.body\"\n\t\t\t:from=\"from\"\n\t\t\t:message=\"message\" />\n\t\t<MessagePlainTextBody v-else\n\t\t\t:body=\"message.body\"\n\t\t\t:signature=\"message.signature\"\n\t\t\t:message=\"message\" />\n\t\t<MessageAttachments :attachments=\"message.attachments\" :envelope=\"envelope\" />\n\t\t<div id=\"reply-composer\" />\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\n\nimport { html, plain } from '../util/text'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport Itinerary from './Itinerary'\nimport MessageAttachments from './MessageAttachments'\nimport MessageEncryptedBody from './MessageEncryptedBody'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tItinerary,\n\t\tMessageAttachments,\n\t\tMessageEncryptedBody,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tfrom() {\n\t\t\treturn this.message.from.length === 0 ? '?' : this.message.from[0].label || this.message.from[0].email\n\t\t},\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/html', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t\tisEncrypted() {\n\t\t\treturn isPgpgMessage(this.message.hasHtmlBody ? html(this.message.body) : plain(this.message.body))\n\t\t},\n\t\titineraries() {\n\t\t\treturn this.message.itineraries ?? []\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n</style>\n","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=9fd9f8e0&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./MessagePlainTextBody.vue?vue&type=style&index=1&id=9fd9f8e0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9fd9f8e0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"message-container\"},domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.enhancedBody))}}),_vm._v(\" \"),(_vm.signature)?_c('details',{staticClass:\"mail-signature\"},[_c('summary',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.summary))}}),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.body))}})]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=0c1b32ff&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=0c1b32ff&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=0c1b32ff&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c1b32ff\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body'],attrs:{\"role\":\"region\",\"aria-label\":_vm.t('mail','Message body')}},[(_vm.itineraries.length > 0)?_c('div',{staticClass:\"message-itinerary\"},[_c('Itinerary',{attrs:{\"entries\":_vm.itineraries,\"message-id\":_vm.message.messageId}})],1):_vm._e(),_vm._v(\" \"),(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.isEncrypted)?_c('MessageEncryptedBody',{attrs:{\"body\":_vm.message.body,\"from\":_vm.from,\"message\":_vm.message}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature,\"message\":_vm.message}}),_vm._v(\" \"),_c('MessageAttachments',{attrs:{\"attachments\":_vm.message.attachments,\"envelope\":_vm.envelope}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Standard Actions menu for Envelopes -->\n<template>\n\t<div>\n\t\t<Actions\n\t\t\tmenu-align=\"right\"\n\t\t\tevent=\"\"\n\t\t\t@click.native.prevent>\n\t\t\t<template v-if=\"!moreActionsOpen\">\n\t\t\t\t<EnvelopePrimaryActions>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<StarOutline v-if=\"showFavoriteIconVariant\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t<Star v-else\n\t\t\t\t\t\t\t\t:size=\"20\"\n\t\t\t\t\t\t\t\tfill-color=\"#f9cf3d\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tenvelope.flags.flagged ? t('mail', 'Unfavorite') : t('mail', 'Favorite')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Email v-if=\"showImportantIconVariant\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t<EmailOutline v-else\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tenvelope.flags.seen ? t('mail', 'Unread') : t('mail', 'Read')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tisImportant ? t('mail', 'Unimportant') : t('mail', 'Important')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</EnvelopePrimaryActions>\n\t\t\t\t<ActionButton v-if=\"withReply\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click=\"onReply\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ReplyAllIcon v-if=\"hasMultipleRecipients\"\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply all')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t<ReplyIcon v-else\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Reply') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"hasMultipleRecipients\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click=\"onReply(true)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ReplyIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply to sender only')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Reply to sender only') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"onForward\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Forward')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Forward') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AlertOctagonIcon\n\t\t\t\t\t\t\t:title=\"envelope.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tenvelope.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TagIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit tags')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"withSelect\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t:title=\"isSelected ? t('mail', 'Unselect') : t('mail', 'Select')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tisSelected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<OpenInNewIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Move message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Move message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DotsHorizontalIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Delete message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Delete message') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t\t<template v-if=\"moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=false\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t\t</template>\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Forward message as attachment')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Forward message as attachment') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"onOpenEditAsNew\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PlusIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit as new message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"showEventModal = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CalendarBlankIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Create event')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Create event') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"withShowSource\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onShowSourceModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<InformationIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'View source')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'View source') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionLink v-if=\"debug\"\n\t\t\t\t\t:download=\"threadingFileName\"\n\t\t\t\t\t:href=\"threadingFile\"\n\t\t\t\t\t:close-after-click=\"true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DownloadIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Download thread data for debugging')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Download thread data for debugging') }}\n\t\t\t\t</ActionLink>\n\t\t\t</template>\n\t\t</Actions>\n\t\t<Modal v-if=\"showSourceModal\" class=\"source-modal\" @close=\"onCloseSourceModal\">\n\t\t\t<div class=\"source-modal-content\">\n\t\t\t\t<div class=\"section\">\n\t\t\t\t\t<h2>{{ t('mail', 'Message source') }}</h2>\n\t\t\t\t\t<pre class=\"message-source\">{{ rawMessage }}</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelopes=\"[envelope]\"\n\t\t\t@move=\"onMove\"\n\t\t\t@close=\"onCloseMoveModal\" />\n\t\t<EventModal v-if=\"showEventModal\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t@close=\"showEventModal = false\" />\n\t\t<TagModal\n\t\t\tv-if=\"showTagModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t@close=\"onCloseTagModal\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionLink from '@nextcloud/vue/dist/Components/ActionLink'\nimport AlertOctagonIcon from 'vue-material-design-icons/AlertOctagon'\nimport { Base64 } from 'js-base64'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport CalendarBlankIcon from 'vue-material-design-icons/CalendarBlank'\nimport CheckIcon from 'vue-material-design-icons/Check'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport DeleteIcon from 'vue-material-design-icons/Delete'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal'\nimport DownloadIcon from 'vue-material-design-icons/Download'\nimport EmailOutline from 'vue-material-design-icons/EmailOutline'\nimport Email from 'vue-material-design-icons/Email'\nimport EventModal from './EventModal'\nimport EnvelopePrimaryActions from './EnvelopePrimaryActions'\nimport { generateUrl } from '@nextcloud/router'\nimport InformationIcon from 'vue-material-design-icons/Information'\nimport ImportantIcon from './icons/ImportantIcon'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport MoveModal from './MoveModal'\nimport OpenInNewIcon from 'vue-material-design-icons/OpenInNew'\nimport PlusIcon from 'vue-material-design-icons/Plus'\nimport ReplyIcon from 'vue-material-design-icons/Reply'\nimport ReplyAllIcon from 'vue-material-design-icons/ReplyAll'\nimport ShareIcon from 'vue-material-design-icons/Share'\nimport Star from 'vue-material-design-icons/Star'\nimport StarOutline from 'vue-material-design-icons/StarOutline'\n\nimport TagIcon from 'vue-material-design-icons/Tag'\nimport TagModal from './TagModal'\nimport NoTrashMailboxConfiguredError from '../errors/NoTrashMailboxConfiguredError'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MenuEnvelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionLink,\n\t\tAlertOctagonIcon,\n\t\tCalendarBlankIcon,\n\t\tChevronLeft,\n\t\tCheckIcon,\n\t\tDeleteIcon,\n\t\tDotsHorizontalIcon,\n\t\tDownloadIcon,\n\t\tEnvelopePrimaryActions,\n\t\tEventModal,\n\t\tInformationIcon,\n\t\tModal,\n\t\tMoveModal,\n\t\tOpenInNewIcon,\n\t\tPlusIcon,\n\t\tReplyIcon,\n\t\tReplyAllIcon,\n\t\tShareIcon,\n\t\tTagIcon,\n\t\tTagModal,\n\t\tStar,\n\t\tStarOutline,\n\t\tEmail,\n\t\tEmailOutline,\n\t\tImportantIcon,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\t// It is just used to get the accountId when envelope doesn't have it\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisSelected: {\n\t\t\t// Indicates if the envelope is currently selected\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSelect: {\n\t\t\t// \"Select\" action should only appear in envelopes from the envelope list\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithShowSource: {\n\t\t\t// \"Show source\" action should only appear in thread envelopes\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdebug: window?.OC?.debug || false,\n\t\t\trawMessage: '', // Will hold the raw source of the message when requested\n\t\t\tshowSourceModal: false,\n\t\t\tshowMoveModal: false,\n\t\t\tshowEventModal: false,\n\t\t\tshowTagModal: false,\n\t\t\tmoreActionsOpen: false,\n\t\t\tforwardMessages: this.envelope.databaseId,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\tconst accountId = this.envelope.accountId ?? this.mailbox.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\tthreadingFile() {\n\t\t\treturn `data:text/plain;base64,${Base64.encode(JSON.stringify({\n\t\t\t\tsubject: this.envelope.subject,\n\t\t\t\tmessageId: this.envelope.messageId,\n\t\t\t\tinReplyTo: this.envelope.inReplyTo,\n\t\t\t\treferences: this.envelope.references,\n\t\t\t\tthreadRootId: this.envelope.threadRootId,\n\t\t\t}, null, 2))}`\n\t\t},\n\t\tthreadingFileName() {\n\t\t\treturn `${this.envelope.databaseId}.json`\n\t\t},\n\t\tshowFavoriteIconVariant() {\n\t\t\treturn this.envelope.flags.flagged\n\t\t},\n\t\tshowImportantIconVariant() {\n\t\t\treturn this.envelope.flags.seen\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t},\n\tmethods: {\n\t\tonForward() {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: 'forward',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected')\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tif (this.withSelect) {\n\t\t\t\tthis.$emit('unselect')\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.envelope.databaseId)\n\n\t\t\tlogger.info(`deleting message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tthis.forwardedMessages = [this.envelope.databaseId]\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\tforwardedMessages: this.forwardedMessages,\n\t\t\t})\n\t\t},\n\t\tasync onShowSourceModal() {\n\t\t\tconst resp = await axios.get(\n\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/source', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tthis.rawMessage = resp.data.source\n\t\t\tthis.showSourceModal = true\n\t\t},\n\t\tonCloseSourceModal() {\n\t\t\tthis.showSourceModal = false\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenEventModal() {\n\t\t\tthis.showEventModal = true\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonReply(onlySender = false) {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: onlySender ? 'reply' : 'replyAll',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t\tasync onOpenEditAsNew() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttemplateMessageId: this.envelope.databaseId,\n\t\t\t\tdata: this.envelope,\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n\t.source-modal {\n\t\t::v-deep .modal-container {\n\t\t\theight: 800px;\n\t\t}\n\n\t\t.source-modal-content {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\toverflow-y: scroll !important;\n\t\t}\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=style&index=0&id=44419322&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MenuEnvelope.vue?vue&type=template&id=44419322&scoped=true&\"\nimport script from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuEnvelope.vue?vue&type=style&index=0&id=44419322&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44419322\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Actions',{attrs:{\"menu-align\":\"right\",\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();}}},[(!_vm.moreActionsOpen)?[_c('EnvelopePrimaryActions',[_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showFavoriteIconVariant)?_c('StarOutline',{attrs:{\"size\":20}}):_c('Star',{attrs:{\"size\":20,\"fill-color\":\"#f9cf3d\"}})]},proxy:true}],null,false,2819323606)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.flags.flagged ? _vm.t('mail', 'Unfavorite') : _vm.t('mail', 'Favorite'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showImportantIconVariant)?_c('Email',{attrs:{\"size\":20}}):_c('EmailOutline',{attrs:{\"size\":20}})]},proxy:true}],null,false,251490435)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.flags.seen ? _vm.t('mail', 'Unread') : _vm.t('mail', 'Read'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,4006335173)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Unimportant') : _vm.t('mail', 'Important'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.withReply)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onReply},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.hasMultipleRecipients)?_c('ReplyAllIcon',{attrs:{\"title\":_vm.t('mail', 'Reply all'),\"size\":20}}):_c('ReplyIcon',{attrs:{\"title\":_vm.t('mail', 'Reply'),\"size\":20}})]},proxy:true}],null,false,1812719128)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.hasMultipleRecipients)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){return _vm.onReply(true)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ReplyIcon',{attrs:{\"title\":_vm.t('mail', 'Reply to sender only'),\"size\":20}})]},proxy:true}],null,false,1847095553)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply to sender only'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onForward},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ShareIcon',{attrs:{\"title\":_vm.t('mail', 'Forward'),\"size\":20}})]},proxy:true}],null,false,3681882419)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlertOctagonIcon',{attrs:{\"title\":_vm.envelope.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'),\"size\":20}})]},proxy:true}],null,false,3018406441)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.envelope.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TagIcon',{attrs:{\"title\":_vm.t('mail', 'Edit tags'),\"size\":20}})]},proxy:true}],null,false,1760434282)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.withSelect)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CheckIcon',{attrs:{\"title\":_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'),\"size\":20}})]},proxy:true}],null,false,3004720510)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('OpenInNewIcon',{attrs:{\"title\":_vm.t('mail', 'Move message'),\"size\":20}})]},proxy:true}],null,false,3082800176)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DotsHorizontalIcon',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,2458825807)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon',{attrs:{\"title\":_vm.t('mail', 'Delete message'),\"size\":20}})]},proxy:true}],null,false,698101614)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete message'))+\"\\n\\t\\t\\t\")])]:_vm._e(),_vm._v(\" \"),(_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\\t\")]},proxy:true}],null,false,2293545807)}),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ShareIcon',{attrs:{\"title\":_vm.t('mail', 'Forward message as attachment'),\"size\":20}})]},proxy:true}],null,false,1446130195)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward message as attachment'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onOpenEditAsNew},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('PlusIcon',{attrs:{\"title\":_vm.t('mail', 'Edit as new message'),\"size\":20}})]},proxy:true}],null,false,2673016614)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();_vm.showEventModal = true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CalendarBlankIcon',{attrs:{\"title\":_vm.t('mail', 'Create event'),\"size\":20}})]},proxy:true}],null,false,3283461621)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create event'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.withShowSource)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onShowSourceModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('InformationIcon',{attrs:{\"title\":_vm.t('mail', 'View source'),\"size\":20}})]},proxy:true}],null,false,3604652729)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'View source'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.debug)?_c('ActionLink',{attrs:{\"download\":_vm.threadingFileName,\"href\":_vm.threadingFile,\"close-after-click\":true},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DownloadIcon',{attrs:{\"title\":_vm.t('mail', 'Download thread data for debugging'),\"size\":20}})]},proxy:true}],null,false,1608243158)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download thread data for debugging'))+\"\\n\\t\\t\\t\")]):_vm._e()]:_vm._e()],2),_vm._v(\" \"),(_vm.showSourceModal)?_c('Modal',{staticClass:\"source-modal\",on:{\"close\":_vm.onCloseSourceModal}},[_c('div',{staticClass:\"source-modal-content\"},[_c('div',{staticClass:\"section\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message source')))]),_vm._v(\" \"),_c('pre',{staticClass:\"message-source\"},[_vm._v(_vm._s(_vm.rawMessage))])])])]):_vm._e(),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.envelope]},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showEventModal)?_c('EventModal',{attrs:{\"envelope\":_vm.envelope},on:{\"close\":function($event){_vm.showEventModal = false}}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.envelope},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","<template>\n\t<span class=\"live-relative-timestamp\" :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.timestamp).fromNow()\n\t\t},\n\t},\n}\n</script>\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"envelope\">\n\t\t<div class=\"envelope--header\"\n\t\t\t:class=\"{'list-item-style' : expanded }\">\n\t\t\t<Avatar v-if=\"envelope.from && envelope.from[0]\"\n\t\t\t\t:email=\"envelope.from[0].email\"\n\t\t\t\t:display-name=\"envelope.from[0].label\"\n\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t:size=\"40\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<div\n\t\t\t\tv-if=\"envelope.flags.flagged\"\n\t\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t\t:data-starred=\"envelope.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<div\n\t\t\t\tv-if=\"envelope.flags.$junk\"\n\t\t\t\tclass=\"app-content-list-item-star icon-junk\"\n\t\t\t\t:data-starred=\"envelope.flags.$junk ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t\t<router-link\n\t\t\t\t:to=\"route\"\n\t\t\t\tevent=\"\"\n\t\t\t\tclass=\"left\"\n\t\t\t\t:class=\"{seen: envelope.flags.seen}\"\n\t\t\t\t@click.native.prevent=\"$emit('toggleExpand', $event)\">\n\t\t\t\t<div class=\"sender\"\n\t\t\t\t\t:class=\"{ 'centered-sender': centeredSender }\">\n\t\t\t\t\t{{ envelope.from && envelope.from[0] ? envelope.from[0].label : '' }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"hasChangedSubject\" class=\"subject\">\n\t\t\t\t\t<span class=\"preview\">\n\t\t\t\t\t\t<!-- TODO: instead of subject it should be shown the first line of the message #2666 -->\n\t\t\t\t\t\t{{ cleanSubject }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t\t:key=\"tag.id\"\n\t\t\t\t\tclass=\"tag-group\">\n\t\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t\t<div class=\"right\">\n\t\t\t\t<Moment class=\"timestamp\" :timestamp=\"envelope.dateInt\" />\n\t\t\t\t<button\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'icon-reply-all-white': hasMultipleRecipients,\n\t\t\t\t\t\t'icon-reply-white': !hasMultipleRecipients,\n\t\t\t\t\t\tprimary: expanded,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t@click=\"onReply\">\n\t\t\t\t\t<span class=\"action-label\"> {{ hasMultipleRecipients ? t('mail', 'Reply all') : t('mail', 'Reply') }}</span>\n\t\t\t\t</button>\n\t\t\t\t<MenuEnvelope class=\"app-content-list-item-menu\"\n\t\t\t\t\t:envelope=\"envelope\"\n\t\t\t\t\t:with-reply=\"false\"\n\t\t\t\t\t:with-select=\"false\"\n\t\t\t\t\t:with-show-source=\"true\"\n\t\t\t\t\t@delete=\"$emit('delete',envelope.databaseId)\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Message v-else-if=\"message\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<Error v-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t</div>\n</template>\n<script>\nimport Error from './Error'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport Message from './Message'\nimport MenuEnvelope from './MenuEnvelope'\nimport Moment from './Moment'\nimport Avatar from './Avatar'\nimport importantSvg from '../../img/important.svg'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\n\nexport default {\n\tname: 'ThreadEnvelope',\n\tcomponents: {\n\t\tError,\n\t\tLoading,\n\t\tMenuEnvelope,\n\t\tMoment,\n\t\tMessage,\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmailboxId: {\n\t\t\trequired: false,\n\t\t\ttype: [\n\t\t\t\tString,\n\t\t\t\tNumber,\n\t\t\t],\n\t\t\tdefault: undefined,\n\t\t},\n\t\tthreadSubject: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\texpanded: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tmessage: undefined,\n\t\t\timportantSvg,\n\t\t\tseenTimer: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\treturn this.$store.getters.getAccount(this.envelope.accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\troute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.mailboxId || this.envelope.mailboxId,\n\t\t\t\t\tthreadId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.find((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).filter((tag) => tag.imapLabel !== '$label1')\n\t\t},\n\t\thasChangedSubject() {\n\t\t\treturn this.cleanSubject !== this.threadSubject\n\t\t},\n\t\tcleanSubject() {\n\t\t\treturn this.envelope.subject.replace(/((?:[\\t ]*(?:R|RE|F|FW|FWD):[\\t ]*)*)/i, '')\n\t\t},\n\t\tcenteredSender() {\n\t\t\t  return (!this.hasChangedSubject || this.cleanSubject.length === 0) && this.tags.length === 0\n\t\t},\n\t},\n\twatch: {\n\t\texpanded(expanded) {\n\t\t\tif (expanded) {\n\t\t\t\tthis.fetchMessage()\n\t\t\t} else {\n\t\t\t\tthis.message = undefined\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.expanded) {\n\t\t\tawait this.fetchMessage()\n\n\t\t\t// Only one envelope is expanded at the time of mounting so we can\n\t\t\t// assume that this is the relevant envelope to be scrolled to.\n\t\t\tthis.$nextTick(() => this.scrollToCurrentEnvelope())\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.seenTimer !== undefined) {\n\t\t\tlogger.info('Navigating away before seenTimer delay, will not mark message as seen/read')\n\t\t\tclearTimeout(this.seenTimer)\n\t\t}\n\t},\n\tmethods: {\n\t\tasync fetchMessage() {\n\t\t\tthis.loading = true\n\n\t\t\tlogger.debug(`fetching thread message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tthis.message = await this.$store.dispatch('fetchMessage', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`message ${this.envelope.databaseId} fetched`, { message: this.message })\n\n\t\t\t\tif (!this.envelope.flags.seen) {\n\t\t\t\t\tlogger.info('Starting timer to mark message as seen/read')\n\t\t\t\t\tthis.seenTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t\t\t\t\tthis.seenTimer = undefined\n\t\t\t\t\t}, 2000)\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not fetch message', { error })\n\t\t\t}\n\n\t\t\t// Fetch itineraries if they haven't been included in the message data\n\t\t\tif (this.message && !this.message.itineraries) {\n\t\t\t\tawait this.fetchItineraries()\n\t\t\t}\n\t\t},\n\t\tasync fetchItineraries() {\n\t\t\t// Sanity check before actually making the request\n\t\t\tif (!this.message.hasHtmlBody && this.message.attachments.length === 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug(`Fetching itineraries for message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tconst itineraries = await this.$store.dispatch('fetchItineraries', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`Itineraries of message ${this.envelope.databaseId} fetched`, { itineraries })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error(`Could not fetch itineraries of message ${this.envelope.databaseId}`, { error })\n\t\t\t}\n\t\t},\n\t\tscrollToCurrentEnvelope() {\n\t\t\t// Account for global navigation bar and thread header\n\t\t\tconst globalHeader = document.querySelector('#header').clientHeight\n\t\t\tconst threadHeader = document.querySelector('#mail-thread-header').clientHeight\n\t\t\tconst top = this.$el.getBoundingClientRect().top - globalHeader - threadHeader\n\t\t\twindow.scrollTo({ top })\n\t\t},\n\t\tonReply() {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: this.hasMultipleRecipients ? 'replyAll' : 'reply',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.sender {\n\t\tmargin-left: 8px;\n\t}\n\t.centered-sender {\n\t\tmargin-top: 8px;\n\t}\n\n\t.right {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-left: 10px;\n\t\theight: 44px;\n\n\t\t.app-content-list-item-menu {\n\t\t\tmargin-left: 4px;\n\t\t}\n\n\t\t.timestamp {\n\t\t\tmargin-right: 10px;\n\t\t\tfont-size: small;\n\t\t\twhite-space: nowrap;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\t.button {\n\t\tcolor: var(--color-main-background);\n\t\t&:not(.active):not(.primary) {\n\t\t\tdisplay: none;\n\n\t\t\t&.primary {\n\t\t\t\tbackground-color: var(--color-primary);\n\t\t\t\topacity: 1;\n\t\t\t\tmargin-bottom: 0;\n\n\t\t\t}\n\t\t}\n\t}\n\t.avatardiv {\n\t\tdisplay: inline-block;\n\t\tmargin-bottom: -23px;\n\t}\n\t.subject {\n\t\tmargin-left: 8px;\n\t\tcursor: default;\n\t}\n\n\t.envelope {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbox-shadow: 0 0 10px var(--color-box-shadow);\n\t\tborder-radius: 16px;\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding-bottom: 20px;\n\n\t\t& + .envelope {\n\t\t\tmargin-top: -20px;\n\t\t}\n\n\t\t&:last-of-type {\n\t\t\tmargin-bottom: 10px;\n\t\t\tpadding-bottom: 0;\n\t\t}\n\t}\n\n\t.envelope--header {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tpadding: 10px;\n\t\tborder-radius: var(--border-radius);\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t\tborder-radius: 16px;\n\t\t}\n\t}\n\t.left {\n\t\tflex-grow: 1;\n\t}\n\t.icon-important {\n\t\t::v-deep path {\n\t\t\tfill: #ffcc00;\n\t\t\tstroke: var(--color-main-background);\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&.app-content-list-item-star {\n\t\t\tbackground-image: none;\n\t\t\tposition: absolute;\n\t\t\topacity: 1;\n\t\t\twidth: 16px;\n\t\t\theight: 16px;\n\t\t\tmargin-left: -1px;\n\t\t\tdisplay: flex;\n\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.5;\n\t\t\t}\n\t\t}\n\t}\n\t.app-content-list-item-star.icon-starred {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\tmargin-top: -2px;\n\t\tmargin-left: 27px;\n\t\tcursor: pointer;\n\t}\n\t.app-content-list-item-star.icon-junk {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\tmargin-top: -2px;\n\t\tmargin-left: 27px;\n\t\tcursor: pointer;\n\t\topacity: .2;\n\t}\n\t.left:not(.seen) {\n\t\tfont-weight: bold;\n\t}\n\t.tag-group__label {\n\t\tmargin: 0 7px;\n\t\tz-index: 2;\n\t\tfont-size: calc(var(--default-font-size) * 0.8);\n\t\tfont-weight: bold;\n\t\tpadding-left: 2px;\n\t\tpadding-right: 2px;\n\t}\n\t.tag-group__bg {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\topacity: 15%;\n\t}\n\t.tag-group {\n\t\tdisplay: inline-block;\n\t\tborder: 1px solid transparent;\n\t\tborder-radius: var(--border-radius-pill);\n\t\tposition: relative;\n\t\tmargin: 0 1px;\n\t\toverflow: hidden;\n\t\tleft: 4px;\n\t}\n\t.envelope--header.list-item-style {\n\t\tborder-radius: 16px;\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=4e73ee46&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"live-relative-timestamp\",attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=style&index=0&id=494361d8&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ThreadEnvelope.vue?vue&type=template&id=494361d8&scoped=true&\"\nimport script from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreadEnvelope.vue?vue&type=style&index=0&id=494361d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"494361d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"envelope\"},[_c('div',{staticClass:\"envelope--header\",class:{'list-item-style' : _vm.expanded }},[(_vm.envelope.from && _vm.envelope.from[0])?_c('Avatar',{attrs:{\"email\":_vm.envelope.from[0].email,\"display-name\":_vm.envelope.from[0].label,\"disable-tooltip\":true,\"size\":40}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.envelope.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.$junk)?_c('div',{staticClass:\"app-content-list-item-star icon-junk\",attrs:{\"data-starred\":_vm.envelope.flags.$junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('router-link',{staticClass:\"left\",class:{seen: _vm.envelope.flags.seen},attrs:{\"to\":_vm.route,\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.$emit('toggleExpand', $event)}}},[_c('div',{staticClass:\"sender\",class:{ 'centered-sender': _vm.centeredSender }},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.envelope.from && _vm.envelope.from[0] ? _vm.envelope.from[0].label : '')+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.hasChangedSubject)?_c('div',{staticClass:\"subject\"},[_c('span',{staticClass:\"preview\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.cleanSubject)+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('Moment',{staticClass:\"timestamp\",attrs:{\"timestamp\":_vm.envelope.dateInt}}),_vm._v(\" \"),_c('button',{staticClass:\"button\",class:{\n\t\t\t\t\t'icon-reply-all-white': _vm.hasMultipleRecipients,\n\t\t\t\t\t'icon-reply-white': !_vm.hasMultipleRecipients,\n\t\t\t\t\tprimary: _vm.expanded,\n\t\t\t\t},on:{\"click\":_vm.onReply}},[_c('span',{staticClass:\"action-label\"},[_vm._v(\" \"+_vm._s(_vm.hasMultipleRecipients ? _vm.t('mail', 'Reply all') : _vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('MenuEnvelope',{staticClass:\"app-content-list-item-menu\",attrs:{\"envelope\":_vm.envelope,\"with-reply\":false,\"with-select\":false,\"with-show-source\":true},on:{\"delete\":function($event){return _vm.$emit('delete',_vm.envelope.databaseId)}}})],1)],1),_vm._v(\" \"),(_vm.loading)?_c('Loading'):(_vm.message)?_c('Message',{attrs:{\"envelope\":_vm.envelope,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContentDetails id=\"mail-message\">\n\t\t<Loading v-if=\"loading\" />\n\t\t<template v-else>\n\t\t\t<div id=\"mail-thread-header\">\n\t\t\t\t<div id=\"mail-thread-header-fields\">\n\t\t\t\t\t<h2 :title=\"threadSubject\">\n\t\t\t\t\t\t{{ threadSubject }}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div ref=\"avatarHeader\" class=\"avatar-header\">\n\t\t\t\t\t\t<!-- Participants that can fit in the parent div -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(0, participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t<!-- Indicator to show that there are more participants than displayed -->\n\t\t\t\t\t\t<Popover v-if=\"threadParticipants.length > participantsToDisplay\"\n\t\t\t\t\t\t\tclass=\"avatar-more\">\n\t\t\t\t\t\t\t<span slot=\"trigger\" class=\"avatar-more\">\n\t\t\t\t\t\t\t\t{{ moreParticipantsString }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t<!-- Remaining participants, if any (Needed to have avatarHeader reactive) -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\tclass=\"avatar-hidden\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ThreadEnvelope v-for=\"env in thread\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:envelope=\"env\"\n\t\t\t\t:mailbox-id=\"$route.params.mailboxId\"\n\t\t\t\t:thread-subject=\"threadSubject\"\n\t\t\t\t:expanded=\"expandedThreads.includes(env.databaseId)\"\n\t\t\t\t:full-height=\"thread.length === 1\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@move=\"onMove(env.databaseId)\"\n\t\t\t\t@toggleExpand=\"toggleExpand(env.databaseId)\" />\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\n\nimport { prop, uniqBy } from 'ramda'\nimport debounce from 'lodash/fp/debounce'\n\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport RecipientBubble from './RecipientBubble'\nimport ThreadEnvelope from './ThreadEnvelope'\n\nexport default {\n\tname: 'Thread',\n\tcomponents: {\n\t\tRecipientBubble,\n\t\tAppContentDetails,\n\t\tLoading,\n\t\tThreadEnvelope,\n\t\tPopover,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\texpandedThreads: [],\n\t\t\tparticipantsToDisplay: 999,\n\t\t\tresizeDebounced: debounce(500, this.updateParticipantsToDisplay),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmoreParticipantsString() {\n\t\t\t// Returns a number showing the number of thread participants that are not shown in the avatar-header\n\t\t\treturn `+${this.threadParticipants.length - this.participantsToDisplay}`\n\t\t},\n\t\tthreadId() {\n\t\t\treturn parseInt(this.$route.params.threadId, 10)\n\t\t},\n\t\tthread() {\n\t\t\tconst envelopes = this.$store.getters.getEnvelopeThread(this.threadId)\n\t\t\tconst envelope = envelopes.find(envelope => envelope.databaseId === this.threadId)\n\n\t\t\tif (envelope === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst currentMailbox = this.$store.getters.getMailbox(envelope.mailboxId)\n\t\t\tconst trashMailbox = this.$store.getters.getMailboxes(currentMailbox.accountId).find(mailbox => mailbox.specialRole === 'trash')\n\n\t\t\tif (trashMailbox === undefined) {\n\t\t\t\treturn envelopes\n\t\t\t}\n\n\t\t\tif (currentMailbox.databaseId === trashMailbox.databaseId) {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId === trashMailbox.databaseId)\n\t\t\t} else {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId !== trashMailbox.databaseId)\n\t\t\t}\n\t\t},\n\t\tthreadParticipants() {\n\t\t\tconst recipients = this.thread.flatMap(envelope => {\n\t\t\t\treturn envelope.from.concat(envelope.to).concat(envelope.cc)\n\t\t\t})\n\t\t\treturn uniqBy(prop('email'), recipients)\n\t\t},\n\t\tthreadSubject() {\n\t\t\tconst thread = this.thread\n\t\t\tif (thread.length === 0) {\n\t\t\t\tconsole.warn('thread is empty')\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn thread[0].subject\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (\n\t\t\t\tfrom.name === to.name\n\t\t\t\t&& from.params.mailboxId === to.params.mailboxId\n\t\t\t\t&& from.params.threadId === to.params.threadId\n\t\t\t\t&& from.params.filter === to.params.filter\n\t\t\t) {\n\t\t\t\tlogger.debug('navigated but the thread is still the same')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('navigated to another thread', { to, from })\n\t\t\tthis.resetThread()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.resetThread()\n\t\twindow.addEventListener('resize', this.resizeDebounced)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.resizeDebounced)\n\t},\n\tmethods: {\n\t\tupdateParticipantsToDisplay() {\n\t\t\t// Wait until everything is in place\n\t\t\tif (!this.$refs.avatarHeader || !this.threadParticipants) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Compute the number of participants to display depending on the width available\n\t\t\tconst avatarHeader = this.$refs.avatarHeader\n\t\t\tconst maxWidth = (avatarHeader.clientWidth - 100) // Reserve 100px for the avatar-more span\n\t\t\tlet childrenWidth = 0\n\t\t\tlet fits = 0\n\t\t\tlet idx = 0\n\t\t\twhile (childrenWidth < maxWidth && fits < this.threadParticipants.length) {\n\t\t\t\t// Skipping the 'avatar-more' span\n\t\t\t\tif (avatarHeader.childNodes[idx].clientWidth === undefined) {\n\t\t\t\t\tidx += 3\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tchildrenWidth += avatarHeader.childNodes[idx].clientWidth\n\t\t\t\tfits++\n\t\t\t\tidx++\n\t\t\t}\n\n\t\t\tif (childrenWidth > maxWidth) {\n\t\t\t\t// There's not enough space to show all thread participants\n\t\t\t\tif (fits > 1) {\n\t\t\t\t\tthis.participantsToDisplay = fits - 1\n\t\t\t\t} else if (fits === 0) {\n\t\t\t\t\tthis.participantsToDisplay = 1\n\t\t\t\t} else {\n\t\t\t\t\tthis.participantsToDisplay = fits\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// There's enough space to show all thread participants\n\t\t\t\tthis.participantsToDisplay = this.threadParticipants.length\n\t\t\t}\n\t\t},\n\t\ttoggleExpand(threadId) {\n\t\t\tif (!this.expandedThreads.includes(threadId)) {\n\t\t\t\tconsole.debug(`expand thread ${threadId}`)\n\t\t\t\tthis.expandedThreads.push(threadId)\n\t\t\t} else {\n\t\t\t\tconsole.debug(`collapse thread ${threadId}`)\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter(t => t !== threadId)\n\t\t\t}\n\t\t},\n\t\tonMove(threadId) {\n\t\t\tif (threadId === this.threadId) {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter((id) => id !== threadId)\n\t\t\t\tthis.fetchThread()\n\t\t\t}\n\t\t},\n\t\tasync resetThread() {\n\t\t\tthis.expandedThreads = [this.threadId]\n\t\t\tawait this.fetchThread()\n\t\t\tthis.updateParticipantsToDisplay()\n\t\t},\n\t\tasync fetchThread() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tconst threadId = this.threadId\n\n\t\t\ttry {\n\t\t\t\tconst thread = await this.$store.dispatch('fetchThread', threadId)\n\t\t\t\tlogger.debug(`thread for envelope ${threadId} fetched`, { thread })\n\t\t\t\t// TODO: add timeout so that envelope isn't flagged when only viewed\n\t\t\t\t//       for a few seconds\n\t\t\t\tif (threadId !== parseInt(this.$route.params.threadId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded envelope won't be shown nor flagged as seen\", {\n\t\t\t\t\t\toldId: threadId,\n\t\t\t\t\t\tnewId: this.$route.params.threadId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (thread.length === 0) {\n\t\t\t\t\tlogger.info('thread could not be found and is empty', { threadId })\n\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load envelope thread', { threadId, error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message thread')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n#mail-message {\n\tflex-grow: 1;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 60px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 60px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content {\n\tmargin: 10px 38px 0 60px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n.icon-reply-white,\n.icon-reply-all-white {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0 !important;\n\tpadding: 9px 18px 10px 32px !important;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\t.app-content-details,\n\t.splitpanes__pane-details {\n\t\tmax-width: unset !important;\n\t\twidth: 100% !important;\n\t}\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.splitpanes__pane-list,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Thread.vue?vue&type=template&id=2be07fe0&\"\nimport script from \"./Thread.vue?vue&type=script&lang=js&\"\nexport * from \"./Thread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Thread.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',{attrs:{\"id\":\"mail-message\"}},[(_vm.loading)?_c('Loading'):[_c('div',{attrs:{\"id\":\"mail-thread-header\"}},[_c('div',{attrs:{\"id\":\"mail-thread-header-fields\"}},[_c('h2',{attrs:{\"title\":_vm.threadSubject}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.threadSubject)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{ref:\"avatarHeader\",staticClass:\"avatar-header\"},[_vm._l((_vm.threadParticipants.slice(0, _vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})}),_vm._v(\" \"),(_vm.threadParticipants.length > _vm.participantsToDisplay)?_c('Popover',{staticClass:\"avatar-more\"},[_c('span',{staticClass:\"avatar-more\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.moreParticipantsString)+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})})],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,staticClass:\"avatar-hidden\",attrs:{\"email\":participant.email,\"label\":participant.label}})})],2)])]),_vm._v(\" \"),_vm._l((_vm.thread),function(env){return _c('ThreadEnvelope',{key:env.databaseId,attrs:{\"envelope\":env,\"mailbox-id\":_vm.$route.params.mailboxId,\"thread-subject\":_vm.threadSubject,\"expanded\":_vm.expandedThreads.includes(env.databaseId),\"full-height\":_vm.thread.length === 1},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"move\":function($event){return _vm.onMove(env.databaseId)},\"toggleExpand\":function($event){return _vm.toggleExpand(env.databaseId)}}})})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContent pane-config-key=\"mail\" :show-details=\"isThreadShown\" @update:showDetails=\"hideMessage\">\n\t\t<template slot=\"list\">\n\t\t\t<AppContentList\n\t\t\t\tv-infinite-scroll=\"onScroll\"\n\t\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\t\tclass=\"envelope-list\"\n\t\t\t\tinfinite-scroll-immediate-check=\"false\"\n\t\t\t\t:show-details=\"showThread\"\n\t\t\t\t:infinite-scroll-disabled=\"false\"\n\t\t\t\t:infinite-scroll-distance=\"10\"\n\t\t\t\trole=\"heading\"\n\t\t\t\t:aria-level=\"2\"\n\t\t\t\t@shortkey.native=\"onShortcut\">\n\t\t\t\t<Mailbox\n\t\t\t\t\tv-if=\"!mailbox.isPriorityInbox\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t\t:search-query=\"query\"\n\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"app-content-list-item\">\n\t\t\t\t\t\t<SectionTitle class=\"important\" :name=\"t('mail', 'Important and unread')\" />\n\t\t\t\t\t\t<Popover trigger=\"hover focus\">\n\t\t\t\t\t\t\t<button slot=\"trigger\" :aria-label=\"t('mail', 'Important info')\" class=\"button icon-info\" />\n\t\t\t\t\t\t\t<p class=\"important-info\">\n\t\t\t\t\t\t\t\t{{ importantInfo }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameimportant\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch(priorityImportantQuery)\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:collapsible=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item starred\" :name=\"t('mail', 'Favorites')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"namestarred\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch(priorityStarredQuery)\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item other\" :name=\"t('mail', 'Other')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameother\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:open-first=\"false\"\n\t\t\t\t\t\t:search-query=\"appendToSearch(priorityOtherQuery)\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t</template>\n\t\t\t</AppContentList>\n\t\t</template>\n\t\t<Thread v-if=\"showThread\" @delete=\"deleteMessage\" />\n\t\t<NoMessageSelected v-else-if=\"hasEnvelopes && !isMobile\" />\n\t</AppContent>\n</template>\n\n<script>\nimport AppContent from '@nextcloud/vue/dist/Components/AppContent'\nimport AppContentList from '@nextcloud/vue/dist/Components/AppContentList'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport SectionTitle from './SectionTitle'\nimport Vue from 'vue'\n\nimport infiniteScroll from '../directives/infinite-scroll'\nimport logger from '../logger'\nimport Mailbox from './Mailbox'\nimport NoMessageSelected from './NoMessageSelected'\nimport Thread from './Thread'\nimport { UNIFIED_ACCOUNT_ID, UNIFIED_INBOX_ID } from '../store/constants'\nimport {\n\tpriorityImportantQuery,\n\tpriorityOtherQuery,\n\tpriorityStarredQuery,\n} from '../util/priorityInbox'\nimport { detect, html } from '../util/text'\n\nexport default {\n\tname: 'MailboxThread',\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tMailbox,\n\t\tNoMessageSelected,\n\t\tPopover,\n\t\tSectionTitle,\n\t\tThread,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// eslint-disable-next-line\n\t\t\timportantInfo: t('mail', 'Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time.'),\n\t\t\tbus: new Vue(),\n\t\t\tsearchQuery: undefined,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t\tpriorityImportantQuery,\n\t\t\tpriorityStarredQuery,\n\t\t\tpriorityOtherQuery,\n\t\t}\n\t},\n\tcomputed: {\n\t\tunifiedAccount() {\n\t\t\treturn this.$store.getters.getAccount(UNIFIED_ACCOUNT_ID)\n\t\t},\n\t\tunifiedInbox() {\n\t\t\treturn this.$store.getters.getMailbox(UNIFIED_INBOX_ID)\n\t\t},\n\t\thasEnvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery).length > 0\n\t\t},\n\t\tshowThread() {\n\t\t\treturn (this.mailbox.isPriorityInbox === true || this.hasEnvelopes) && this.$route.name === 'message'\n\t\t},\n\t\tquery() {\n\t\t\tif (this.$route.params.filter === 'starred') {\n\t\t\t\tif (this.searchQuery) {\n\t\t\t\t\treturn this.searchQuery + ' is:starred'\n\t\t\t\t}\n\t\t\t\treturn 'is:starred'\n\t\t\t}\n\t\t\treturn this.searchQuery\n\t\t},\n\t\tisThreadShown() {\n\t\t\treturn !!this.$route.params.threadId\n\t\t},\n\t},\n\twatch: {\n\t\t$route() {\n\t\t\tthis.handleMailto()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.handleMailto()\n\t},\n\tmethods: {\n\t\tdeleteMessage(id) {\n\t\t\tthis.bus.$emit('delete', id)\n\t\t},\n\t\tonScroll(event) {\n\t\t\tlogger.debug('scroll', { event })\n\n\t\t\tthis.bus.$emit('loadMore')\n\t\t},\n\t\tonShortcut(e) {\n\t\t\tthis.bus.$emit('shortcut', e)\n\t\t},\n\t\tappendToSearch(str) {\n\t\t\tif (this.searchQuery === undefined) {\n\t\t\t\treturn str\n\t\t\t}\n\t\t\treturn this.searchQuery + ' ' + str\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\thandleMailto() {\n\t\t\tif (this.$route.name === 'message' && this.$route.params.threadId === 'mailto') {\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\t\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taccountId,\n\t\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\t\tbody: this.$route.query.body ? detect(this.$route.query.body) : html(''),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tstringToRecipients(str) {\n\t\t\tif (str === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > {\n\tz-index: 1;\n}\n\n.icon-info {\n\tbackground-image: var(--icon-info-000);\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list {\n\t// Required for centering the loading indicator\n\tdisplay: flex;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\twidth: 44px;\n\theight: 44px;\n\tborder: 0;\n\tmargin-bottom: 17px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n#app-content-wrapper {\n\tdisplay: flex;\n}\n\n.envelope-list {\n\tmax-height: calc(100vh - var(--header-height));\n\toverflow-y: auto;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=style&index=0&id=443131b3&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailboxThread.vue?vue&type=template&id=443131b3&scoped=true&\"\nimport script from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nexport * from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailboxThread.vue?vue&type=style&index=0&id=443131b3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"443131b3\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',{attrs:{\"pane-config-key\":\"mail\",\"show-details\":_vm.isThreadShown},on:{\"update:showDetails\":_vm.hideMessage}},[_c('template',{slot:\"list\"},[_c('AppContentList',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],staticClass:\"envelope-list\",attrs:{\"infinite-scroll-immediate-check\":\"false\",\"show-details\":_vm.showThread,\"infinite-scroll-disabled\":false,\"infinite-scroll-distance\":10,\"role\":\"heading\",\"aria-level\":2},nativeOn:{\"shortkey\":function($event){return _vm.onShortcut.apply(null, arguments)}}},[(!_vm.mailbox.isPriorityInbox)?_c('Mailbox',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.query,\"bus\":_vm.bus}}):[_c('div',{staticClass:\"app-content-list-item\"},[_c('SectionTitle',{staticClass:\"important\",attrs:{\"name\":_vm.t('mail', 'Important and unread')}}),_vm._v(\" \"),_c('Popover',{attrs:{\"trigger\":\"hover focus\"}},[_c('button',{staticClass:\"button icon-info\",attrs:{\"slot\":\"trigger\",\"aria-label\":_vm.t('mail', 'Important info')},slot:\"trigger\"}),_vm._v(\" \"),_c('p',{staticClass:\"important-info\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.importantInfo)+\"\\n\\t\\t\\t\\t\\t\\t\")])])],1),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameimportant\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch(_vm.priorityImportantQuery),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"collapsible\":true,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item starred\",attrs:{\"name\":_vm.t('mail', 'Favorites')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"namestarred\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch(_vm.priorityStarredQuery),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item other\",attrs:{\"name\":_vm.t('mail', 'Other')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameother\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"open-first\":false,\"search-query\":_vm.appendToSearch(_vm.priorityOtherQuery),\"is-priority-inbox\":true,\"bus\":_vm.bus}})]],2)],1),_vm._v(\" \"),(_vm.showThread)?_c('Thread',{on:{\"delete\":_vm.deleteMessage}}):(_vm.hasEnvelopes && !_vm.isMobile)?_c('NoMessageSelected'):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { getClient } from '../dav/client'\n\nexport async function getFileSize(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind  xmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props?.size\n}\n","/**\n * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>\n * @copyright Copyright (c) 2020 Gary Kim <gary@garykim.dev>\n *\n * @author Marco Ambrosini <marcoambrosini@pm.me>\n * @author Gary Kim <gary@garykim.dev>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// File originally from https://github.com/nextcloud/spreed/blob/bc22c21cf70a6243e7df7d838d49018c61468050/src/services/filesSharingServices.js\n// Slightly modified for use in Mail\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\n/**\n * Makes a share link for a given file or directory.\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @param {string} token The conversation's token\n * @returns {string} url share link\n */\nconst shareFile = async function(path, token) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1/', 2) + 'shares', {\n\t\t\tshareType: 3, // OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t\tshareWith: token,\n\t\t})\n\t\treturn res.data.ocs.data.url\n\t} catch (error) {\n\t\tif (\n\t\t\terror.response\n\t\t\t&& error.response.data\n\t\t\t&& error.response.data.ocs\n\t\t\t&& error.response.data.ocs.meta\n\t\t\t&& error.response.data.ocs.meta.message\n\t\t) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message || 'Unknown error'}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('mail', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nexport { shareFile }\n","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<ul>\n\t\t\t<li v-for=\"attachment in value\" :key=\"attachment.id\">\n\t\t\t\t<div class=\"new-message-attachment-name\">\n\t\t\t\t\t{{ attachment.displayName ? attachment.displayName : attachment.fileName }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"new-message-attachments-action svg icon-delete\" @click=\"onDelete(attachment)\" />\n\t\t\t</li>\n\t\t\t<li v-if=\"uploading\" class=\"attachments-upload-progress\">\n\t\t\t\t<div :class=\"{'icon-loading-small': uploading}\" />\n\t\t\t\t<div>{{ uploading ? t('mail', 'Uploading {percent}% ', {percent: uploadProgress}) : '' }}</div>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\"\n\t\t\ttype=\"file\"\n\t\t\tmultiple\n\t\t\tstyle=\"display: none;\"\n\t\t\t@change=\"onLocalAttachmentSelected\">\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport { getRequestToken } from '@nextcloud/auth'\nimport { formatFileSize } from '@nextcloud/files'\nimport prop from 'lodash/fp/prop'\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\nimport sum from 'lodash/fp/sum'\nimport sumBy from 'lodash/fp/sumBy'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport Vue from 'vue'\n\nimport logger from '../logger'\nimport { getFileSize } from '../service/FileService'\nimport { shareFile } from '../service/FileSharingService'\nimport { uploadLocalAttachment } from '../service/AttachmentService'\n\nexport default {\n\tname: 'ComposerAttachments',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploadSizeLimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\n\t\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\n\t\tthis.bus.$on('onAddCloudAttachmentLink', this.onAddCloudAttachmentLink)\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\temitNewAttachments(attachments) {\n\t\t\tthis.$emit('input', this.value.concat(attachments))\n\t\t},\n\t\ttotalSizeOfUpload() {\n\t\t\treturn Object.values(this.value).reduce((acc, upload) => {\n\t\t\t\tif (!upload.type === 'local') {\n\t\t\t\t\t// Ignore link shares\n\t\t\t\t\treturn acc\n\t\t\t\t}\n\n\t\t\t\treturn acc + upload.size\n\t\t\t}, 0)\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\n\t\t\tconst newTotal = toUpload + this.totalSizeOfUpload()\n\t\t\tlogger.debug('checking upload size limit', {\n\t\t\t\texistingUploads: this.totalSizeOfUpload(),\n\t\t\t\ttoUpload,\n\t\t\t\tlimit: this.uploadSizeLimit,\n\t\t\t\tnewTotal,\n\t\t\t})\n\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\tthis.showAttachmentFileSizeWarning(e.target.files.length)\n\n\t\t\t\tthis.uploading = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst progress = (id) => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t}\n\n\t\t\tconst promises = map((file) => {\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\n\t\t\t\treturn uploadLocalAttachment(file, progress(file.name)).then(({ file, id }) => {\n\t\t\t\t\tlogger.info('uploaded')\n\t\t\t\t\tthis.emitNewAttachments([{\n\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\ttype: 'local',\n\t\t\t\t\t}])\n\t\t\t\t})\n\n\t\t\t}, e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch((error) => logger.error('could not upload all attachments', { error }))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tasync onAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\n\n\t\t\ttry {\n\t\t\t\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\tconst fileSizes = await Promise.all(paths.map(getFileSize))\n\t\t\t\tconst newTotal = sum(fileSizes) + this.totalSizeOfUpload()\n\n\t\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\t\tthis.showAttachmentFileSizeWarning(paths.length)\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.emitNewAttachments(paths.map(function(name) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\tdisplayName: trimStart('/', name),\n\t\t\t\t\t\ttype: 'cloud',\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment', { error })\n\t\t\t}\n\t\t},\n\t\tasync onAddCloudAttachmentLink() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\n\n\t\t\ttry {\n\t\t\t\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\n\t\t\t\tconst url = await shareFile(path, getRequestToken())\n\n\t\t\t\tthis.appendToBodyAtCursor(`<a href=\"${url}\">${url}</a>`)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment link', { error })\n\t\t\t}\n\t\t},\n\t\tshowAttachmentFileSizeWarning(num) {\n\t\t\tshowWarning(n(\n\t\t\t\t'mail',\n\t\t\t\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\n\t\t\t\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\n\t\t\t\tnum,\n\t\t\t\t{\n\t\t\t\t\tsize: formatFileSize(this.uploadSizeLimit),\n\t\t\t\t}\n\t\t\t))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter((a) => a !== attachment)\n\t\t\t)\n\t\t},\n\t\tappendToBodyAtCursor(toAppend) {\n\t\t\tthis.bus.$emit('appendToBodyAtCursor', toAppend)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.new-message-attachments {\n\tul {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t// 2 and a half attachment height\n\t\tmax-height: 140px;\n\t\toverflow: auto;\n\t}\n\tli {\n\t\tpadding: 10px;\n\t}\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 10px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n\n.attachments-upload-progress {\n\tdisplay: flex;\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=3f65042e&scoped=true&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=3f65042e&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=3f65042e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f65042e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message-attachments\"},[_c('ul',[_vm._l((_vm.value),function(attachment){return _c('li',{key:attachment.id},[_c('div',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(attachment.displayName ? attachment.displayName : attachment.fileName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"new-message-attachments-action svg icon-delete\",on:{\"click\":function($event){return _vm.onDelete(attachment)}}})])}),_vm._v(\" \"),(_vm.uploading)?_c('li',{staticClass:\"attachments-upload-progress\"},[_c('div',{class:{'icon-loading-small': _vm.uploading}}),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.uploading ? _vm.t('mail', 'Uploading {percent}% ', {percent: _vm.uploadProgress}) : ''))])]):_vm._e()],2),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"multiselect__tag multiselect__tag--recipient\">\n\t\t<ListItemIcon\n\t\t\t:no-margin=\"true\"\n\t\t\t:title=\"option.label\"\n\t\t\t:avatar-size=\"24\" />\n\t\t<Actions>\n\t\t\t<ActionButton @click.prevent=\"removeRecipient(option)\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Close :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</ActionButton>\n\t\t</Actions>\n\t</div>\n</template>\n\n<script>\nimport ListItemIcon from '@nextcloud/vue/dist/Components/ListItemIcon'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Close from 'vue-material-design-icons/Close'\nexport default {\n\tname: 'RecipientListItem',\n\tcomponents: {\n\t\tListItemIcon,\n\t\tActions,\n\t\tActionButton,\n\t\tClose,\n\t},\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tremoveRecipient(option, field) {\n\t\t\tthis.$emit('remove-recipient', option, field)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.multiselect\n\t.multiselect__tags\n\t.multiselect__tags-wrap\n\t.multiselect__tag--recipient {\n\tpadding: 0 25px 0 0;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n}\n.multiselect__tag--recipient .action-item--single {\n\twidth: auto;\n\tmin-width: 24px;\n\theight: 24px;\n\tmin-height: 24px;\n\tposition: absolute;\n\tright: 0;\n}\n.multiselect__tag--recipient .action-item--single .material-design-icon {\n\theight: 24px;\n\twidth: 24px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=style&index=0&id=796d2733&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./RecipientListItem.vue?vue&type=template&id=796d2733&scoped=true&\"\nimport script from \"./RecipientListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientListItem.vue?vue&type=style&index=0&id=796d2733&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"796d2733\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"multiselect__tag multiselect__tag--recipient\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":_vm.option.label,\"avatar-size\":24}}),_vm._v(\" \"),_c('Actions',[_c('ActionButton',{on:{\"click\":function($event){$event.preventDefault();return _vm.removeRecipient(_vm.option)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Close',{attrs:{\"size\":20}})]},proxy:true}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailvelopeEditor.vue?vue&type=template&id=1320c887&scoped=true&\"\nimport script from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1320c887\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mailvelope-composer\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect\n\t\t\t\t\tid=\"from\"\n\t\t\t\t\t:value=\"selectedAlias\"\n\t\t\t\t\t:options=\"aliases\"\n\t\t\t\t\tlabel=\"name\"\n\t\t\t\t\ttrack-by=\"selectId\"\n\t\t\t\t\t:searchable=\"false\"\n\t\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t@select=\"onAliasChange\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"to\"\n\t\t\t\t\tref=\"toLabel\"\n\t\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address ')\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorTo\"\n\t\t\t\t\t:auto-limit=\"autoLimit\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'to')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'to')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</Multiselect>\n\t\t\t\t<button\n\t\t\t\t\t:title=\"t('mail','Toggle recipients list mode')\"\n\t\t\t\t\t:class=\"{'active':!autoLimit}\"\n\t\t\t\t\t@click.prevent=\"toggleViewMode\">\n\t\t\t\t\t<UnfoldMoreHorizontal v-if=\"autoLimit\" :size=\"24\" />\n\t\t\t\t\t<UnfoldLessHorizontal v-else :size=\"24\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'Cc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"cc\"\n\t\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address ')\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorCc\"\n\t\t\t\t\t:auto-limit=\"autoLimit\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'cc')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'cc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<span slot=\"noOptions\">{{ t('mail', '') }}</span>\n\t\t\t\t</Multiselect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showBCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'Bcc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"bcc\"\n\t\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address ')\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorBcc\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'bcc')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'bcc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t\t</Multiselect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject ')\"\n\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\">\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-warning\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div v-if=\"mailvelope.keysMissing.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\t\trecipients: mailvelope.keysMissing.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div class=\"composer-fields message-editor\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor\n\t\t\t\tv-if=\"!encrypt && editorPlainText\"\n\t\t\t\tkey=\"editor-plain\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message ')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onEditorInputText\" />\n\t\t\t<TextEditor\n\t\t\t\tv-else-if=\"!encrypt && !editorPlainText\"\n\t\t\t\tkey=\"editor-rich\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:html=\"true\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message ')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onEditorInputText\" />\n\t\t\t<MailvelopeEditor\n\t\t\t\tv-else\n\t\t\t\tref=\"mailvelopeEditor\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:recipients=\"allRecipients\"\n\t\t\t\t:quoted-text=\"body\"\n\t\t\t\t:is-reply-or-forward=\"isReply || isForward\" />\n\t\t</div>\n\t\t<ComposerAttachments v-model=\"attachments\"\n\t\t\t:bus=\"bus\"\n\t\t\t:upload-size-limit=\"attachmentSizeLimit\"\n\t\t\t@upload=\"onAttachmentsUploading\" />\n\t\t<div class=\"composer-actions-right composer-actions\">\n\t\t\t<div class=\"composer-actions--primary-actions\">\n\t\t\t\t<p class=\"composer-actions-draft-status\">\n\t\t\t\t\t<span v-if=\"savingDraft === true\" class=\"draft-status\">{{ t('mail', 'Saving draft ') }}</span>\n\t\t\t\t\t<span v-else-if=\"!canSaveDraft\" class=\"draft-status\">{{ t('mail', 'Error saving draft') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === false\" class=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<VButton v-if=\"!savingDraft && !canSaveDraft\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"onSave\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Download :size=\"20\" :title=\"t('mail', 'Save draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</VButton>\n\t\t\t\t<VButton v-if=\"savingDraft === false\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"discardDraft\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Delete :size=\"20\" :title=\"t('mail', 'Discard & close draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</VButton>\n\t\t\t</div>\n\t\t\t<div class=\"composer-actions--secondary-actions\">\n\t\t\t\t<Actions>\n\t\t\t\t\t<template v-if=\"!isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton icon=\"icon-upload\" @click=\"onAddLocalAttachment\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton icon=\"icon-folder\" @click=\"onAddCloudAttachment\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton :disabled=\"encrypt\" icon=\"icon-public\" @click=\"onAddCloudAttachmentLink\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\taddShareLink\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t\tv-if=\"!isScheduledSendingDisabled\"\n\t\t\t\t\t\t\t:close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=true\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<SendClock :size=\"20\" :title=\"t('mail', 'Send later')\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Send later')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t\t:checked=\"!encrypt && !editorPlainText\"\n\t\t\t\t\t\t\t:disabled=\"encrypt\"\n\t\t\t\t\t\t\t@check=\"editorMode = 'html'\"\n\t\t\t\t\t\t\t@uncheck=\"editorMode = 'plaintext'\">\n\t\t\t\t\t\t\t{{ t('mail', 'Enable formatting') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t\t:checked=\"requestMdn\"\n\t\t\t\t\t\t\t@check=\"requestMdn = true\"\n\t\t\t\t\t\t\t@uncheck=\"requestMdn = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Request a read receipt') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t\tv-if=\"mailvelope.available\"\n\t\t\t\t\t\t\t:checked=\"encrypt\"\n\t\t\t\t\t\t\t@check=\"encrypt = true\"\n\t\t\t\t\t\t\t@uncheck=\"encrypt = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Encrypt message with Mailvelope') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-if=\"isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=false\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t\t\t:title=\"t('mail', 'Send later')\"\n\t\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t\t{{ t('mail', 'Send later') }}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionRadio :value=\"undefined\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"!sendAtVal\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(undefined)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Send now') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow morning') }} - {{ convertToLocalDate(dateTomorrowMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowAfternoon\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowAfternoon\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowAfternoon)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow afternoon') }} - {{ convertToLocalDate(dateTomorrowAfternoon) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateMondayMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtMondayMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateMondayMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Monday morning') }} - {{ convertToLocalDate(dateMondayMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio name=\"sendLater\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t:checked=\"isSendAtCustom\"\n\t\t\t\t\t\t\t:value=\"customSendTime\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Custom date and time') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionInput v-model=\"selectedDate\"\n\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t:first-day-of-week=\"firstDayDatetimePicker\"\n\t\t\t\t\t\t\t:use12h=\"showAmPm\"\n\t\t\t\t\t\t\t:formatter=\"formatter\"\n\t\t\t\t\t\t\t:format=\"'YYYY-MM-DD HH:mm'\"\n\t\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t\t\t:disabled-date=\"disabledDatetimepickerDate\"\n\t\t\t\t\t\t\t:disabled-time=\"disabledDatetimepickerTime\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Enter a date') }}\n\t\t\t\t\t\t</ActionInput>\n\t\t\t\t\t</template>\n\t\t\t\t</Actions>\n\n\t\t\t\t<button :disabled=\"!canSend\"\n\t\t\t\t\tclass=\"button primary send-button\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t@click=\"onSend\">\n\t\t\t\t\t<Send\n\t\t\t\t\t\t:title=\"submitButtonTitle\"\n\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t{{ submitButtonTitle }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments ')\" role=\"alert\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\"\n\t\t:hint=\"t('mail', 'Sending ')\"\n\t\trole=\"alert\"\n\t\tclass=\"sending-hint\" />\n\t<EmptyContent v-else-if=\"state === STATES.ERROR\" class=\"centered-content\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Error sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<button class=\"button\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</button>\n\t\t<button class=\"button primary\" @click=\"onSend\">\n\t\t\t{{ t('mail', 'Retry') }}\n\t\t</button>\n\t</EmptyContent>\n\t<div v-else-if=\"state === STATES.WARNING\" class=\"emptycontent\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Warning sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<button class=\"button primary\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</button>\n\t\t<button class=\"button\" @click=\"onForceSend\">\n\t\t\t{{ t('mail', 'Send anyway') }}\n\t\t</button>\n\t</div>\n\t<EmptyContent v-else icon=\"icon-checkmark\">\n\t\t<h2>{{ sendAtVal ? t('mail', 'Message will be sent at') + ' ' + convertToLocalDate(sendAtVal) : t('mail', 'Message sent!') }}</h2>\n\t</EmptyContent>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport isArray from 'lodash/fp/isArray'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionCheckbox from '@nextcloud/vue/dist/Components/ActionCheckbox'\nimport ActionInput from '@nextcloud/vue/dist/Components/ActionInput'\nimport ActionRadio from '@nextcloud/vue/dist/Components/ActionRadio'\nimport Button from '@nextcloud/vue/dist/Components/Button'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport Delete from 'vue-material-design-icons/Delete'\nimport ComposerAttachments from './ComposerAttachments'\nimport Download from 'vue-material-design-icons/Download'\nimport EmptyContent from '@nextcloud/vue/dist/Components/EmptyContent'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\nimport ListItemIcon from '@nextcloud/vue/dist/Components/ListItemIcon'\nimport RecipientListItem from './RecipientListItem'\nimport UnfoldMoreHorizontal from 'vue-material-design-icons/UnfoldMoreHorizontal'\nimport UnfoldLessHorizontal from 'vue-material-design-icons/UnfoldLessHorizontal'\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t, getCanonicalLocale, getFirstDay, getLocale } from '@nextcloud/l10n'\nimport Vue from 'vue'\n\nimport { findRecipient } from '../service/AutocompleteService'\nimport { detect, html, plain, toHtml, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport TextEditor from './TextEditor'\nimport { buildReplyBody } from '../ReplyBuilder'\nimport MailvelopeEditor from './MailvelopeEditor'\nimport { getMailvelope } from '../crypto/mailvelope'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport { matchError } from '../errors/match'\nimport NoSentMailboxConfiguredError\n\tfrom '../errors/NoSentMailboxConfiguredError'\nimport NoDraftsMailboxConfiguredError\n\tfrom '../errors/NoDraftsMailboxConfiguredError'\nimport ManyRecipientsError\n\tfrom '../errors/ManyRecipientsError'\n\nimport Send from 'vue-material-design-icons/Send'\nimport SendClock from 'vue-material-design-icons/SendClock'\nimport moment from '@nextcloud/moment'\nimport { mapGetters } from 'vuex'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nconst NO_ALIAS_SET = -1\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tWARNING: 4,\n\tFINISHED: 5,\n\tDISCARDING: 6,\n\tDISCARDED: 7,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tMailvelopeEditor,\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionInput,\n\t\tActionRadio,\n\t\tVButton: Button,\n\t\tComposerAttachments,\n\t\tChevronLeft,\n\t\tDelete,\n\t\tDownload,\n\t\tLoading,\n\t\tMultiselect,\n\t\tTextEditor,\n\t\tEmptyContent,\n\t\tListItemIcon,\n\t\tRecipientListItem,\n\t\tSend,\n\t\tSendClock,\n\t\tUnfoldMoreHorizontal,\n\t\tUnfoldLessHorizontal,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => html(''),\n\t\t},\n\t\teditorBody: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdraftId: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tinReplyToMessageId: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardFrom: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardedMessages: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsendAt: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tattachmentsData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tdata() {\n\t\tlet bodyVal = this.editorBody\n\t\tif (bodyVal.length === 0) {\n\t\t\t// an empty body (e.g \"\") does not trigger an onInput event.\n\t\t\t// but to append the signature a onInput event is required.\n\t\t\tbodyVal = '<p></p><p></p>'\n\t\t}\n\n\t\t// Set default custom date time picker value to now + 1 hour\n\t\tconst selectedDate = new Date()\n\t\tselectedDate.setHours(selectedDate.getHours() + 1)\n\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tshowBCC: this.bcc.length > 0,\n\t\t\tselectedAlias: NO_ALIAS_SET, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal,\n\t\t\tattachments: this.attachmentsData,\n\t\t\tnoReply: this.to.some((to) => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tdraftsPromise: Promise.resolve(this.draftId),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tcanSaveDraft: true,\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: debounce(10 * 1000, this.saveDraft),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\tbus: new Vue(),\n\t\t\tencrypt: false,\n\t\t\tmailvelope: {\n\t\t\t\tavailable: false,\n\t\t\t\tkeyRing: undefined,\n\t\t\t\tkeysMissing: [],\n\t\t\t},\n\t\t\teditorMode: (this.body?.format !== 'html') ? 'plaintext' : 'html',\n\t\t\taddShareLink: t('mail', 'Add share link from {productName} Files', { productName: OC?.theme?.name ?? 'Nextcloud' }),\n\t\t\trequestMdn: false,\n\t\t\tappendSignature: true,\n\t\t\tloadingIndicatorTo: false,\n\t\t\tloadingIndicatorCc: false,\n\t\t\tloadingIndicatorBcc: false,\n\t\t\tisMoreActionsOpen: false,\n\t\t\tselectedDate,\n\t\t\tsendAtVal: this.sendAt,\n\t\t\tfirstDayDatetimePicker: getFirstDay() === 0 ? 7 : getFirstDay(),\n\t\t\tformatter: {\n\t\t\t\tstringify: (date) => {\n\t\t\t\t\treturn date ? moment(date).format('LLL') : ''\n\t\t\t\t},\n\t\t\t\tparse: (value) => {\n\t\t\t\t\treturn value ? moment(value, 'LLL').toDate() : null\n\t\t\t\t},\n\t\t\t},\n\t\t\tautoLimit: true,\n\t\t\teditorInputTextReady: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'isScheduledSendingDisabled',\n\t\t]),\n\t\taliases() {\n\t\t\tlet cnt = 0\n\t\t\tconst accounts = this.$store.getters.accounts.filter((a) => !a.isUnified)\n\t\t\tconst aliases = accounts.flatMap((account) => [\n\t\t\t\t{\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taliasId: null,\n\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\tname: account.name,\n\t\t\t\t\temailAddress: account.emailAddress,\n\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t},\n\t\t\t\taccount.aliases.map((alias) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\taliasId: alias.id,\n\t\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\t\tsignature: alias.signature,\n\t\t\t\t\t\tname: alias.name,\n\t\t\t\t\t\temailAddress: alias.alias,\n\t\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t])\n\t\t\treturn aliases.flat()\n\t\t},\n\t\tallRecipients() {\n\t\t\treturn this.selectTo.concat(this.selectCc).concat(this.selectBcc)\n\t\t},\n\t\tattachmentSizeLimit() {\n\t\t\treturn this.$store.getters.getPreference('attachment-size-limit')\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients\n\t\t\t\t.concat(this.autocompleteRecipients)\n\t\t\t\t.map((recipient) => ({ ...recipient, label: recipient.label || recipient.email }))\n\t\t},\n\t\tisForward() {\n\t\t\treturn this.forwardFrom !== undefined\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.replyTo !== undefined\n\t\t},\n\t\tcanSend() {\n\t\t\tif (this.encrypt && this.mailvelope.keysMissing.length) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t\teditorPlainText() {\n\t\t\treturn this.editorMode === 'plaintext'\n\t\t},\n\t\tsubmitButtonTitle() {\n\t\t\tif (this.sendAtVal) {\n\t\t\t\treturn t('mail', 'Send later') + ` ${this.convertToLocalDate(this.sendAtVal)}`\n\t\t\t}\n\t\t\tif (!this.mailvelope.available) {\n\t\t\t\treturn t('mail', 'Send')\n\t\t\t}\n\n\t\t\treturn this.encrypt ? t('mail', 'Encrypt and send') : t('mail', 'Send unencrypted')\n\t\t},\n\t\tdateTomorrowMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(9, 0, 0, 0)\n\n\t\t},\n\t\tdateTomorrowAfternoon() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(14, 0, 0, 0)\n\t\t},\n\t\tdateMondayMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setHours(9, 0, 0, 0)\n\t\t\treturn today.setDate(today.getDate() + (7 - today.getDay()) % 7 + 1)\n\t\t},\n\t\tcustomSendTime() {\n\t\t\treturn new Date(this.selectedDate).getTime()\n\t\t},\n\t\tshowAmPm() {\n\t\t\tconst localeData = moment().locale(getLocale()).localeData()\n\t\t\tconst timeFormat = localeData.longDateFormat('LT').toLowerCase()\n\n\t\t\treturn timeFormat.indexOf('a') !== -1\n\t\t},\n\t\tisSendAtTomorrowMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtTomorrowAfternoon() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowAfternoon / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtMondayMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateMondayMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtCustom() {\n\t\t\tif (this.sendAtVal && !this.isSendAtTomorrowMorning && !this.isSendAtTomorrowAfternoon && !this.isSendAtMondayMorning) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t'$route.params.threadId'() {\n\t\t\tthis.reset()\n\t\t},\n\t\tallRecipients() {\n\t\t\tthis.checkRecipientsKeys()\n\t\t},\n\t\taliases(newAliases) {\n\t\t\tconsole.debug('aliases changed')\n\t\t\tif (this.selectedAlias === NO_ALIAS_SET) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newAlias = newAliases.find(alias => alias.id === this.selectedAlias.id && alias.aliasId === this.selectedAlias.aliasId)\n\t\t\tif (newAlias === undefined) {\n\t\t\t\t// selected alias does not exist anymore.\n\t\t\t\tthis.onAliasChange(newAliases[0])\n\t\t\t} else {\n\t\t\t\t// update the selected alias\n\t\t\t\tthis.onAliasChange(newAlias)\n\t\t\t}\n\t\t},\n\t\teditorMode() {\n\t\t\tthis.appendSignature = true\n\t\t},\n\t\tbodyVal() {\n\t\t\tif (this.body.value === '') {\n\t\t\t\tthis.appendSignature = true\n\t\t\t}\n\t\t\tthis.handleAppendSignature()\n\t\t},\n\t},\n\tasync beforeMount() {\n\t\tthis.setAlias()\n\t\tthis.initBody()\n\t\tawait this.onMailvelopeLoaded(await getMailvelope())\n\t},\n\tmounted() {\n\t\tif (!this.isReply) {\n\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t}\n\n\t\t// Add attachments in case of forward\n\t\tif (this.forwardFrom?.attachments !== undefined) {\n\t\t\tthis.forwardFrom.attachments.forEach(att => {\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: att.fileName,\n\t\t\t\t\tdisplayName: trimStart('/', att.fileName),\n\t\t\t\t\tid: att.id,\n\t\t\t\t\tmessageId: this.forwardFrom.databaseId,\n\t\t\t\t\ttype: 'message-attachment',\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\t// Add messages forwarded as attachments\n\t\tlet forwards = []\n\t\tif (this.forwardedMessages && !isArray(this.forwardedMessages)) {\n\t\t\tforwards = [this.forwardedMessages]\n\t\t} else if (this.forwardedMessages && isArray(this.forwardedMessages)) {\n\t\t\tforwards = this.forwardedMessages\n\t\t}\n\t\tforwards.forEach(id => {\n\t\t\tconst env = this.$store.getters.getEnvelope(id)\n\t\t\tif (!env) {\n\t\t\t\t// TODO: also happens when the composer page is reloaded\n\t\t\t\tshowError(t('mail', 'Message {id} could not be found', {\n\t\t\t\t\tid,\n\t\t\t\t}))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.attachments.push({\n\t\t\t\tdisplayName: env.subject + '.eml',\n\t\t\t\tid,\n\t\t\t\ttype: 'message',\n\t\t\t})\n\t\t})\n\n\t\t// Set custom date and time picker value if initialized with custom send at value\n\t\tif (this.sendAt && this.isSendAtCustom) {\n\t\t\tthis.selectedDate = new Date(this.sendAt)\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('mailvelope', this.onMailvelopeLoaded)\n\t},\n\tmethods: {\n\t\tsetAlias() {\n\t\t\tconst previous = this.selectedAlias\n\t\t\tif (this.fromAccount) {\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => alias.id === this.fromAccount)\n\t\t\t} else {\n\t\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t\t}\n\t\t\t// Only overwrite editormode if body is empty\n\t\t\tif (previous === NO_ALIAS_SET && (!this.body || this.body.value === '')) {\n\t\t\t\tthis.editorMode = this.selectedAlias.editorMode\n\t\t\t}\n\t\t},\n\t\tasync checkRecipientsKeys() {\n\t\t\tif (!this.encrypt || !this.mailvelope.available) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst recipients = this.allRecipients.map((r) => r.email)\n\t\t\tconst keysValid = await this.mailvelope.keyRing.validKeyForAddress(recipients)\n\t\t\tlogger.debug('recipients keys validated', { recipients, keysValid })\n\t\t\tthis.mailvelope.keysMissing = recipients.filter((r) => keysValid[r] === false)\n\t\t},\n\t\tinitBody() {\n\t\t\t/** @var {Text} body **/\n\t\t\tlet body\n\t\t\tif (this.replyTo) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.replyTo.from[0],\n\t\t\t\t\tthis.replyTo.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else if (this.forwardFrom) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.forwardFrom.from[0],\n\t\t\t\t\tthis.forwardFrom.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else {\n\t\t\t\tbody = this.bodyVal\n\t\t\t}\n\t\t\tthis.bodyVal = html(body).value\n\t\t},\n\t\tgetMessageData(id) {\n\t\t\treturn {\n\t\t\t\t// TODO: Rename account to accountId\n\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\taccountId: this.selectedAlias.id,\n\t\t\t\taliasId: this.selectedAlias.aliasId,\n\t\t\t\tto: this.selectTo,\n\t\t\t\tcc: this.selectCc,\n\t\t\t\tbcc: this.selectBcc,\n\t\t\t\tdraftId: id,\n\t\t\t\tsubject: this.subjectVal,\n\t\t\t\tbody: this.encrypt ? plain(this.bodyVal) : html(this.bodyVal),\n\t\t\t\tattachments: this.attachments,\n\t\t\t\tinReplyToMessageId: this.inReplyToMessageId ?? (this.replyTo ? this.replyTo.messageId : undefined),\n\t\t\t\tisHtml: !this.editorPlainText,\n\t\t\t\trequestMdn: this.requestMdn,\n\t\t\t\tsendAt: this.sendAtVal ? Math.floor(this.sendAtVal / 1000) : undefined,\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then((id) => {\n\t\t\t\t\tconst draftData = data(id)\n\t\t\t\t\tif (\n\t\t\t\t\t\t!id\n\t\t\t\t\t\t&& !draftData.subject\n\t\t\t\t\t\t&& !draftData.body\n\t\t\t\t\t\t&& !draftData.cc\n\t\t\t\t\t\t&& !draftData.bcc\n\t\t\t\t\t\t&& !draftData.to\n\t\t\t\t\t\t&& !draftData.sendAt\n\t\t\t\t\t) {\n\t\t\t\t\t\t// this might happen after a call to reset()\n\t\t\t\t\t\t// where the text input gets reset as well\n\t\t\t\t\t\t// and fires an input event\n\t\t\t\t\t\tlogger.debug('Nothing substantial to save, ignoring draft save')\n\t\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\t\treturn id\n\t\t\t\t\t}\n\t\t\t\t\treturn this.draft(draftData)\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\t// It works (again)\n\t\t\t\t\tthis.canSaveDraft = true\n\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tawait matchError(error, {\n\t\t\t\t\t\t[NoDraftsMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tthis.canSaveDraft = false\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\treturn this.draftsPromise\n\t\t},\n\t\tcallSaveDraft(withDebounce, ...args) {\n\t\t\tif (withDebounce) {\n\t\t\t\treturn this.saveDraftDebounced(...args)\n\t\t\t} else {\n\t\t\t\treturn this.saveDraft(...args)\n\t\t\t}\n\t\t},\n\t\tonSave() {\n\t\t\tthis.callSaveDraft(false, this.getMessageData)\n\t\t},\n\t\thandleAppendSignature() {\n\t\t\tif (this.appendSignature) {\n\t\t\t\tconst signatureValue = toHtml(detect(this.selectedAlias.signature)).value\n\t\t\t\tthis.bus.$emit('insertSignature', signatureValue, this.selectedAlias.signatureAboveQuote)\n\t\t\t\tthis.appendSignature = false\n\t\t\t}\n\t\t},\n\t\t// needs to bypass an input event of the first initialisation, because of:\n\t\t// an empty body (e.g \"\") does not trigger an onInput event.\n\t\t// but to append the signature a onInput event is required.\n\t\tonEditorInputText() {\n\t\t\tif (this.editorInputTextReady) {\n\t\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t\t}\n\t\t\tthis.editorInputTextReady = true\n\t\t},\n\t\tonChangeSendLater(value) {\n\t\t\tthis.sendAtVal = value ? Number.parseInt(value, 10) : undefined\n\t\t},\n\t\tconvertToLocalDate(timestamp) {\n\t\t\tconst options = {\n\t\t\t\tmonth: 'short',\n\t\t\t\tday: 'numeric',\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t}\n\t\t\treturn new Date(timestamp).toLocaleString(getCanonicalLocale(), options)\n\t\t},\n\t\tonAliasChange(alias) {\n\t\t\tlogger.debug('changed alias', { alias })\n\t\t\tthis.selectedAlias = alias\n\t\t\tthis.appendSignature = true\n\t\t\tthis.handleAppendSignature()\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.$emit('onAddLocalAttachment')\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.$emit('onAddCloudAttachment')\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tonAddCloudAttachmentLink() {\n\t\t\tthis.bus.$emit('onAddCloudAttachmentLink')\n\t\t},\n\t\tonAutocomplete(term, loadingIndicator) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loadingIndicatorTo = loadingIndicator === 'to'\n\t\t\tthis.loadingIndicatorCc = loadingIndicator === 'cc'\n\t\t\tthis.loadingIndicatorBcc = loadingIndicator === 'bcc'\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tif (loadingIndicator === 'to') {\n\t\t\t\t\tthis.loadingIndicatorTo = false\n\t\t\t\t} else if (loadingIndicator === 'cc') {\n\t\t\t\t\tthis.loadingIndicatorCc = false\n\t\t\t\t} else if (loadingIndicator === 'bcc') {\n\t\t\t\t\tthis.loadingIndicatorBcc = false\n\t\t\t\t}\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.then(() => this.callSaveDraft(true, this.getMessageData))\n\t\t\t\t.catch((error) => logger.error('could not upload attachments', { error }))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t},\n\t\tasync onMailvelopeLoaded(mailvelope) {\n\t\t\tthis.encrypt = isPgpgMessage(this.body)\n\t\t\tthis.mailvelope.available = true\n\t\t\tlogger.info('Mailvelope loaded', {\n\t\t\t\tencrypt: this.encrypt,\n\t\t\t\tisPgpgMessage: isPgpgMessage(this.body),\n\t\t\t\tkeyRing: this.mailvelope.keyRing,\n\t\t\t})\n\t\t\tthis.mailvelope.keyRing = await mailvelope.getKeyring()\n\t\t\tawait this.checkRecipientsKeys()\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tasync onSend(_, force = false) {\n\t\t\tif (this.encrypt) {\n\t\t\t\tlogger.debug('get encrypted message from mailvelope')\n\t\t\t\tawait this.$refs.mailvelopeEditor.pull()\n\t\t\t}\n\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\tawait this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData)\n\t\t\t\t.then((data) => this.send({ ...data, force }))\n\t\t\t\t.then(() => logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tlogger.error('could not send message', { error });\n\t\t\t\t\t[this.errorText, this.state] = await matchError(error, {\n\t\t\t\t\t\t[NoSentMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'No sent mailbox configured. Please pick one in the account settings.'), STATES.ERROR]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[ManyRecipientsError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses.'), STATES.WARNING]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\t\t\treturn [error.toString(), STATES.ERROR]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t// Sync sent mailbox when it's currently open\n\t\t\tconst account = this.$store.getters.getAccount(this.selectedAlias.id)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.sentMailboxId) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\t\tmailboxId: account.sentMailboxId,\n\t\t\t\t\t\tquery: '',\n\t\t\t\t\t\tinit: false,\n\t\t\t\t\t})\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t},\n\t\tasync onForceSend() {\n\t\t\tawait this.onSend(null, true)\n\t\t},\n\t\treset() {\n\t\t\tthis.draftsPromise = Promise.resolve() // \"resets\" draft uid as well\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = '<p></p><p></p>'\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t\tthis.autocompleteRecipients = []\n\t\t\tthis.newRecipients = []\n\t\t\tthis.requestMdn = false\n\t\t\tthis.appendSignature = true\n\t\t\tthis.savingDraft = undefined\n\t\t\tthis.sendAtVal = undefined\n\n\t\t\tthis.setAlias()\n\t\t\tthis.initBody()\n\t\t\tVue.nextTick(() => {\n\t\t\t\t// toLabel may not be on the DOM yet\n\t\t\t\t// (because \"Message sent\" is shown)\n\t\t\t\t// so we defer the focus call\n\t\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t * @param {Object} alias the alias to format\n\t\t * @returns {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\tasync discardDraft() {\n\t\t\tconst id = await this.draftsPromise\n\t\t\tthis.$emit('discard-draft', id)\n\t\t},\n\t\t/**\n\t\t * Whether the date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @returns {boolean}\n\t\t */\n\t\tdisabledDatetimepickerDate(date) {\n\t\t\tconst minimumDate = new Date()\n\t\t\t// Make it one sec before midnight so it shows the next full day as available\n\t\t\tminimumDate.setHours(0, 0, 0)\n\t\t\tminimumDate.setSeconds(minimumDate.getSeconds() - 1)\n\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\n\t\t/**\n\t\t * Whether the time for date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @returns {boolean}\n\t\t */\n\t\tdisabledDatetimepickerTime(date) {\n\t\t\tconst now = new Date()\n\t\t\tconst minimumDate = new Date(now.getTime())\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\t\t/**\n\t\t * Remove recipient from recipients array (To,Cc,Bcc)\n\t\t *\n\t\t * @param {Array} option Current option from Multiselect\n\t\t * @param {Array} field List of recipients (ex. this.selectTo)\n\t\t */\n\t\tonRemoveRecipient(option, field) {\n\t\t\tswitch (field) {\n\t\t\tcase 'to':\n\t\t\t\tthis.removeRecipientTo(option)\n\t\t\t\tbreak\n\t\t\tcase 'cc':\n\t\t\t\tthis.removeRecipientCc(option)\n\t\t\t\tbreak\n\t\t\tcase 'bcc':\n\t\t\t\tthis.removeRecipientBcc(option)\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tremoveRecipient(option, list) {\n\t\t\treturn list.filter((recipient) => recipient.email !== option.email)\n\t\t},\n\t\tremoveRecipientTo(option) {\n\t\t\tthis.selectTo = this.removeRecipient(option, this.selectTo)\n\t\t},\n\t\tremoveRecipientCc(option) {\n\t\t\tthis.selectCc = this.removeRecipient(option, this.selectCc)\n\t\t},\n\t\tremoveRecipientBcc(option) {\n\t\t\tthis.selectBcc = this.removeRecipient(option, this.selectBcc)\n\t\t},\n\t\ttoggleViewMode() {\n\t\t\tthis.autoLimit = !this.autoLimit\n\t\t\tthis.showCC = !(this.showCC && this.selectCc.length === 0 && this.autoLimit)\n\t\t\tthis.showBCC = !(this.showBCC && this.selectBcc.length === 0 && this.autoLimit)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 100%;\n}\n\n.composer-actions {\n\tposition: sticky;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-fields {\n\tdisplay: flex;\n\tborder-top: 1px solid var(--color-border);\n\talign-items: flex-start;\n\n\t.multiselect.multiselect--multiple::after {\n\t\tposition:absolute;\n\t\tright: 0;\n\t\ttop: auto;\n\t\tbottom:8px\n\t}\n\n\t.multiselect__tag {\n\t\tposition: relative;\n\t}\n\n\t&.mail-account {\n\t\tborder-top: none;\n\t\tpadding-top: 10px;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.composer-fields--custom {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t\tpadding-top:5px;\n\t\twidth: calc(100% - 120px);\n\n\t\tbutton {\n\t\t\tmargin-top: 0;\n\t\t\tbackground-color: transparent;\n\t\t\tborder:none;\n\t\t\topacity: 0.5\n\t\t}\n\n\t\tbutton.active,button:active {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.multiselect {\n\t\t\twidth: calc(100% - 150px);\n\t\t}\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n}\n\n.subject {\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tmargin: 0;\n\tpadding: 24px 20px;\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n// Make composer editor expand\n.message-editor {\n\tflex: 1 1 100%;\n\tmin-height: 0;\n}\n\n.message-body {\n\theight: 100%;\n\twidth: 100%;\n\tmargin: 0;\n\tborder: none !important;\n\toutline: none !important;\n\tbox-shadow: none !important;\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-left: 20px;\n\n\t// Fix contenteditable not becoming focused upon clichint within it's\n\t// boundaries in safari\n\t-webkit-user-select: text;\n\tuser-select: text;\n}\n\n.draft-status {\n\tpadding: 2px;\n\topacity: 0.5;\n\tfont-size: small;\n\tdisplay: block;\n\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-right: 20px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-weight: bold;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n::v-deep .multiselect .multiselect__tags {\n\tborder: none !important;\n}\n::v-deep [data-select=\"create\"] .avatardiv--unknown {\n\tbackground: var(--color-text-maxcontrast) !important;\n}\n::v-deep .multiselect.opened .multiselect__tags .multiselect__tags-wrap {\n\tflex-wrap: wrap;\n}\n\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n.sending-hint {\n\theight: 50px;\n\tmargin-top: 50px;\n}\n.button {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.send-action-radio {\n\tpadding: 5px 0 5px 0;\n}\n.send-button {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10px 15px;\n\tmargin-left: 5px;\n}\n.send-button .send-icon {\n\tpadding-right: 5px;\n}\n.centered-content {\n\tmargin-top: 0 !important;\n}\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbottom: 5px;\n}\n.composer-actions--primary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-left: 10px;\n\talign-items: center;\n}\n.composer-actions--secondary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 5px;\n}\n.composer-actions--primary-actions .button {\n\tpadding: 2px;\n}\n.composer-actions--secondary-actions .button{\n\tflex-shrink: 0;\n}\n\n.composer-actions-draft-status {\n\tpadding-left: 10px;\n}\n\n@media only screen and (max-width: 580px) {\n\t.composer-actions-right {\n\t\talign-items: end;\n\t\tflex-direction: column-reverse;\n\t}\n\t.composer-actions-draft-status {\n\t\ttext-align: end;\n\t\tpadding-right: 15px;\n\t}\n\t.composer-actions--primary-actions {\n\t\tpadding-right: 5px;\n\t}\n}\n\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findRecipient = (term) => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=673cf596&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=673cf596&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=673cf596&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"673cf596\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{attrs:{\"id\":\"from\",\"value\":_vm.selectedAlias,\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"selectId\",\"searchable\":false,\"custom-label\":_vm.formatAliases,\"placeholder\":_vm.t('mail', 'Select account'),\"clear-on-select\":false},on:{\"select\":_vm.onAliasChange}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{ref:\"toLabel\",class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address '),\"clear-on-select\":true,\"close-on-select\":false,\"show-no-options\":false,\"preserve-search\":true,\"hide-selected\":true,\"loading\":_vm.loadingIndicatorTo,\"auto-limit\":_vm.autoLimit},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewToAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'to')}},scopedSlots:_vm._u([{key:\"tag\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'to')}}})]}},{key:\"option\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,2096561271),model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),_c('button',{class:{'active':!_vm.autoLimit},attrs:{\"title\":_vm.t('mail','Toggle recipients list mode')},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleViewMode.apply(null, arguments)}}},[(_vm.autoLimit)?_c('UnfoldMoreHorizontal',{attrs:{\"size\":24}}):_c('UnfoldLessHorizontal',{attrs:{\"size\":24}})],1)],1)]),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address '),\"clear-on-select\":true,\"show-no-options\":false,\"preserve-search\":true,\"loading\":_vm.loadingIndicatorCc,\"auto-limit\":_vm.autoLimit,\"hide-selected\":true},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewCcAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'cc')}},scopedSlots:_vm._u([{key:\"tag\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'cc')}}})]}},{key:\"option\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,4162477772),model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}},[_vm._v(\" \"),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', '')))])])],1)]):_vm._e(),_vm._v(\" \"),(_vm.showBCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address '),\"show-no-options\":false,\"clear-on-select\":true,\"preserve-search\":true,\"loading\":_vm.loadingIndicatorBcc,\"hide-selected\":true},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewBccAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'bcc')}},scopedSlots:_vm._u([{key:\"tag\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'bcc')}}})]}},{key:\"option\",fn:function(ref){\nvar option = ref.option;\nreturn [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,2659337166),model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}},[_vm._v(\" \"),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject ')},domProps:{\"value\":(_vm.subjectVal)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.subjectVal=$event.target.value},function($event){return _vm.callSaveDraft(true, _vm.getMessageData)}]}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.mailvelope.keysMissing.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\trecipients: _vm.mailvelope.keysMissing.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields message-editor\"},[(!_vm.encrypt && _vm.editorPlainText)?_c('TextEditor',{key:\"editor-plain\",staticClass:\"message-body\",attrs:{\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message '),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onEditorInputText},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):(!_vm.encrypt && !_vm.editorPlainText)?_c('TextEditor',{key:\"editor-rich\",staticClass:\"message-body\",attrs:{\"html\":true,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message '),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onEditorInputText},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):_c('MailvelopeEditor',{ref:\"mailvelopeEditor\",attrs:{\"recipients\":_vm.allRecipients,\"quoted-text\":_vm.body,\"is-reply-or-forward\":_vm.isReply || _vm.isForward},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}})],1),_vm._v(\" \"),_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus,\"upload-size-limit\":_vm.attachmentSizeLimit},on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right composer-actions\"},[_c('div',{staticClass:\"composer-actions--primary-actions\"},[_c('p',{staticClass:\"composer-actions-draft-status\"},[(_vm.savingDraft === true)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft ')))]):(!_vm.canSaveDraft)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Error saving draft')))]):(_vm.savingDraft === false)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),(!_vm.savingDraft && !_vm.canSaveDraft)?_c('VButton',{staticClass:\"button\",attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.onSave},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Download',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Save draft')}})]},proxy:true}],null,false,2227301918)}):_vm._e(),_vm._v(\" \"),(_vm.savingDraft === false)?_c('VButton',{staticClass:\"button\",attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.discardDraft},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Discard & close draft')}})]},proxy:true}],null,false,3896853704)}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions--secondary-actions\"},[_c('Actions',[(!_vm.isMoreActionsOpen)?[_c('ActionButton',{attrs:{\"icon\":\"icon-upload\"},on:{\"click\":_vm.onAddLocalAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Upload attachment'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-folder\"},on:{\"click\":_vm.onAddCloudAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"disabled\":_vm.encrypt,\"icon\":\"icon-public\"},on:{\"click\":_vm.onAddCloudAttachmentLink}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.addShareLink)+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.isScheduledSendingDisabled)?_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('SendClock',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Send later')}})]},proxy:true}],null,false,1769650344)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":!_vm.encrypt && !_vm.editorPlainText,\"disabled\":_vm.encrypt},on:{\"check\":function($event){_vm.editorMode = 'html'},\"uncheck\":function($event){_vm.editorMode = 'plaintext'}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enable formatting'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":_vm.requestMdn},on:{\"check\":function($event){_vm.requestMdn = true},\"uncheck\":function($event){_vm.requestMdn = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Request a read receipt'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.mailvelope.available)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.encrypt},on:{\"check\":function($event){_vm.encrypt = true},\"uncheck\":function($event){_vm.encrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with Mailvelope'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]:_vm._e(),_vm._v(\" \"),(_vm.isMoreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'Send later'),\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\\t\")]},proxy:true}],null,false,2922837455)}),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"value\":undefined,\"name\":\"sendLater\",\"checked\":!_vm.sendAtVal},on:{\"change\":function($event){return _vm.onChangeSendLater(undefined)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send now'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowAfternoon,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowAfternoon},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowAfternoon)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow afternoon'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowAfternoon))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateMondayMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtMondayMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateMondayMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Monday morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateMondayMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"name\":\"sendLater\",\"checked\":_vm.isSendAtCustom,\"value\":_vm.customSendTime},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Custom date and time'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionInput',{attrs:{\"type\":\"datetime-local\",\"first-day-of-week\":_vm.firstDayDatetimePicker,\"use12h\":_vm.showAmPm,\"formatter\":_vm.formatter,\"format\":'YYYY-MM-DD HH:mm',\"icon\":\"\",\"minute-step\":5,\"show-second\":false,\"disabled-date\":_vm.disabledDatetimepickerDate,\"disabled-time\":_vm.disabledDatetimepickerTime},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}},model:{value:(_vm.selectedDate),callback:function ($$v) {_vm.selectedDate=$$v},expression:\"selectedDate\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enter a date'))+\"\\n\\t\\t\\t\\t\\t\")])]:_vm._e()],2),_vm._v(\" \"),_c('button',{staticClass:\"button primary send-button\",attrs:{\"disabled\":!_vm.canSend,\"type\":\"submit\"},on:{\"click\":_vm.onSend}},[_c('Send',{attrs:{\"title\":_vm.submitButtonTitle,\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.submitButtonTitle)+\"\\n\\t\\t\\t\")],1)],1)])],1):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments '),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{staticClass:\"sending-hint\",attrs:{\"hint\":_vm.t('mail', 'Sending '),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.ERROR)?_c('EmptyContent',{staticClass:\"centered-content\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Error sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.onSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Retry'))+\"\\n\\t\")])]):(_vm.state === _vm.STATES.WARNING)?_c('div',{staticClass:\"emptycontent\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Warning sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":_vm.onForceSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Send anyway'))+\"\\n\\t\")])]):_c('EmptyContent',{attrs:{\"icon\":\"icon-checkmark\"}},[_c('h2',[_vm._v(_vm._s(_vm.sendAtVal ? _vm.t('mail', 'Message will be sent at') + ' ' + _vm.convertToLocalDate(_vm.sendAtVal) : _vm.t('mail', 'Message sent!')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal\n\t\tsize=\"normal\"\n\t\t:title=\"modalTitle\"\n\t\t@close=\"$emit('close', { restoreOriginalSendAt: true })\">\n\t\t<Composer\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:attachments-data=\"composerData.attachments\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:editor-body=\"convertEditorBody(composerData)\"\n\t\t\t:in-reply-to-message-id=\"composerData.inReplyToMessageId\"\n\t\t\t:reply-to=\"composerData.replyTo\"\n\t\t\t:forward-from=\"composerData.forwardFrom\"\n\t\t\t:draft-id=\"composerData.draftId\"\n\t\t\t:send-at=\"composerData.sendAt * 1000\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t\t:forwarded-messages=\"forwardedMessages\"\n\t\t\t@discard-draft=\"discardDraft\" />\n\t</Modal>\n</template>\n<script>\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport logger from '../logger'\nimport { toPlain, toHtml, plain } from '../util/text'\nimport { saveDraft } from '../service/MessageService'\nimport Composer from './Composer'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { UNDO_DELAY } from '../store/constants'\n\nexport default {\n\tname: 'NewMessageModal',\n\tcomponents: {\n\t\tModal,\n\t\tComposer,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\toriginal: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmodalTitle() {\n\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\treturn t('mail', 'Edit message')\n\t\t\t}\n\t\t\tif (this.composerData.draftId !== undefined) {\n\t\t\t\treturn t('mail', 'Draft')\n\t\t\t}\n\t\t\tif (this.composerData.replyTo) {\n\t\t\t\treturn t('mail', 'Reply')\n\t\t\t}\n\t\t\tif (this.composerData.forwardFrom) {\n\t\t\t\treturn t('mail', 'Forward')\n\t\t\t}\n\t\t\treturn t('mail', 'New message')\n\t\t},\n\t\tcomposerMessage() {\n\t\t\treturn this.$store.getters.composerMessage\n\t\t},\n\t\tcomposerData() {\n\t\t\treturn this.$store.getters.composerMessage?.data\n\t\t},\n\t\tforwardedMessages() {\n\t\t\treturn this.composerMessage?.options?.forwardedMessages ?? []\n\t\t},\n\t},\n\tmethods: {\n\t\ttoHtml,\n\t\tplain,\n\t\tasync saveDraft(data) {\n\t\t\tif (!this.composerMessage) {\n\t\t\t\tlogger.info('Ignoring draft because there is no message anymore', { data })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\tconst dataForServer = this.getDataForServer(data)\n\t\t\t\tawait this.$store.dispatch('outbox/updateMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst dataForServer = this.getDataForServer(data, true)\n\t\t\t\tconst { id } = await saveDraft(data.account, dataForServer)\n\n\t\t\t\t// Remove old draft envelope\n\t\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\n\t\t\t\t// Fetch new draft envelope\n\t\t\t\tawait this.$store.dispatch('fetchEnvelope', id)\n\n\t\t\t\treturn id\n\t\t\t}\n\t\t},\n\t\tgetDataForServer(data, serializeRecipients = false) {\n\t\t\treturn {\n\t\t\t\taccountId: data.account,\n\t\t\t\tsubject: data.subject,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t\teditorBody: data.body.value,\n\t\t\t\tisHtml: data.isHtml,\n\t\t\t\tto: serializeRecipients ? data.to.map(this.recipientToRfc822).join(', ') : data.to,\n\t\t\t\tcc: serializeRecipients ? data.cc.map(this.recipientToRfc822).join(', ') : data.cc,\n\t\t\t\tbcc: serializeRecipients ? data.bcc.map(this.recipientToRfc822).join(', ') : data.bcc,\n\t\t\t\tattachments: data.attachments,\n\t\t\t\taliasId: data.aliasId,\n\t\t\t\tinReplyToMessageId: data.inReplyToMessageId,\n\t\t\t\tsendAt: data.sendAt,\n\t\t\t}\n\t\t},\n\t\tasync sendMessage(data) {\n\t\t\tlogger.debug('sending message', { data })\n\t\t\tconst now = new Date().getTime()\n\t\t\tfor (const attachment of data.attachments) {\n\t\t\t\tif (!attachment.type) {\n\t\t\t\t\t// todo move to backend: https://github.com/nextcloud/mail/issues/6227\n\t\t\t\t\tattachment.type = 'local'\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst dataForServer = this.getDataForServer({\n\t\t\t\t...data,\n\t\t\t\tsendAt: data.sendAt ? data.sendAt : Math.floor((now + UNDO_DELAY) / 1000),\n\t\t\t})\n\t\t\tif (dataForServer.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\tdataForServer.sendAt = Math.floor((now + UNDO_DELAY) / 1000)\n\t\t\t}\n\n\t\t\tif (!this.composerData.id) {\n\t\t\t\tawait this.$store.dispatch('outbox/enqueueMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tawait this.$store.dispatch('outbox/updateMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (!data.sendAt || data.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\t// Awaiting here would keep the modal open for a long time and thus block the user\n\t\t\t\tthis.$store.dispatch('outbox/sendMessageWithUndo', { id: this.composerData.id })\n\t\t\t}\n\t\t\tif (data.draftId) {\n\t\t\t\t// Remove old draft envelope\n\t\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\t\t\t}\n\t\t\tthis.$emit('close')\n\t\t},\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tasync discardDraft(id) {\n\t\t\tconst isOutbox = this.composerMessage.type === 'outbox'\n\t\t\tif (isOutbox) {\n\t\t\t\tid = this.composerMessage.data.id\n\t\t\t}\n\t\t\tthis.$emit('close')\n\t\t\ttry {\n\t\t\t\tif (isOutbox) {\n\t\t\t\t\tawait this.$store.dispatch('outbox/deleteMessage', { id })\n\t\t\t\t} else {\n\t\t\t\t\tawait this.$store.dispatch('deleteMessage', { id })\n\t\t\t\t}\n\t\t\t\tshowSuccess(t('mail', 'Message discarded'))\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError(t('mail', 'Could not discard message'))\n\t\t\t}\n\t\t},\n\t\tconvertEditorBody(composerData) {\n\t\t\tif (composerData.editorBody) {\n\t\t\t\treturn composerData.editorBody\n\t\t\t}\n\t\t\tif (!composerData.body) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn toHtml(composerData.body).value\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n@media only screen and (max-width: 600px) {\n\t::v-deep .modal-container {\n\t\tmax-width: 80%;\n\t}\n}\n::v-deep .modal-wrapper .modal-container {\n\toverflow-y: auto !important;\n\toverflow-x: auto !important;\n\t// from original Modal max-height\n\theight: 90%;\n\t// Max editor + modal height\n\tmax-height: 700px !important;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=style&index=0&id=4ae59572&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./NewMessageModal.vue?vue&type=template&id=4ae59572&scoped=true&\"\nimport script from \"./NewMessageModal.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewMessageModal.vue?vue&type=style&index=0&id=4ae59572&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ae59572\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"size\":\"normal\",\"title\":_vm.modalTitle},on:{\"close\":function($event){return _vm.$emit('close', { restoreOriginalSendAt: true })}}},[_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"attachments-data\":_vm.composerData.attachments,\"body\":_vm.composerData.body,\"editor-body\":_vm.convertEditorBody(_vm.composerData),\"in-reply-to-message-id\":_vm.composerData.inReplyToMessageId,\"reply-to\":_vm.composerData.replyTo,\"forward-from\":_vm.composerData.forwardFrom,\"draft-id\":_vm.composerData.draftId,\"send-at\":_vm.composerData.sendAt * 1000,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage,\"forwarded-messages\":_vm.forwardedMessages},on:{\"discard-draft\":_vm.discardDraft}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageContent.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\" />\n\t\t<h2>{{ t('mail', 'Pending or not sent messages will show up here') }}</h2>\n\t\t<div />\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'OutboxMessageContent',\n\tcomponents: {\n\t},\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render, staticRenderFns } from \"./OutboxMessageContent.vue?vue&type=template&id=de3e1c82&scoped=true&\"\nimport script from \"./OutboxMessageContent.vue?vue&type=script&lang=js&\"\nexport * from \"./OutboxMessageContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de3e1c82\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Pending or not sent messages will show up here')))]),_vm._v(\" \"),_c('div')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default {\n\tcomputed: {\n\t\trecipients() {\n\t\t\tconst to = this.message.to ?? []\n\t\t\tconst cc = this.message.cc ?? []\n\t\t\treturn [...to, ...cc]\n\t\t},\n\t\tavatarDisplayName() {\n\t\t\treturn this.recipients[0]?.label ?? this.recipients[0]?.email ?? '?'\n\t\t},\n\t\tavatarEmail() {\n\t\t\treturn this.recipients[0]?.email ?? ''\n\t\t},\n\t},\n}\n","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<ListItem\n\t\tclass=\"outbox-message\"\n\t\t:class=\"{ selected }\"\n\t\t:title=\"title\"\n\t\t:details=\"details\"\n\t\t@click=\"openModal\">\n\t\t<template #icon>\n\t\t\t<div\n\t\t\t\tclass=\"account-color\"\n\t\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t\t<Avatar :display-name=\"avatarDisplayName\" :email=\"avatarEmail\" />\n\t\t</template>\n\t\t<template #subtitle>\n\t\t\t{{ subjectForSubtitle }}\n\t\t</template>\n\t\t<template slot=\"actions\">\n\t\t\t<ActionButton\n\t\t\t\ticon=\"icon-checkmark\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click=\"sendMessageNow\">\n\t\t\t\t{{ t('mail', 'Send now') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Send\n\t\t\t\t\t\t:title=\"t('mail', 'Send now')\"\n\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\ticon=\"icon-delete\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click=\"deleteMessage\">\n\t\t\t\t{{ t('mail', 'Delete') }}\n\t\t\t</ActionButton>\n\t\t</template>\n\t</ListItem>\n</template>\n\n<script>\nimport ListItem from '@nextcloud/vue/dist/Components/ListItem'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Avatar from './Avatar'\nimport { calculateAccountColor } from '../util/AccountColor'\nimport { getLanguage, translate as t } from '@nextcloud/l10n'\nimport OutboxAvatarMixin from '../mixins/OutboxAvatarMixin'\nimport moment from '@nextcloud/moment'\nimport logger from '../logger'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { matchError } from '../errors/match'\nimport { html, plain } from '../util/text'\nimport Send from 'vue-material-design-icons/Send'\nimport { UNDO_DELAY } from '../store/constants'\n\nexport default {\n\tname: 'OutboxMessageListItem',\n\tcomponents: {\n\t\tListItem,\n\t\tAvatar,\n\t\tActionButton,\n\t\tSend,\n\t},\n\tmixins: [\n\t\tOutboxAvatarMixin,\n\t],\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tselected() {\n\t\t\treturn this.$route.params.messageId === this.message.id\n\t\t},\n\t\taccountColor() {\n\t\t\tconst account = this.$store.getters.getAccount(this.message.accountId)\n\t\t\treturn calculateAccountColor(account?.emailAddress ?? '')\n\t\t},\n\t\ttitle() {\n\t\t\tconst recipientToString = recipient => recipient.label\n\t\t\tconst recipients = this.message.to.map(recipientToString)\n\t\t\t\t.concat(this.message.cc.map(recipientToString))\n\t\t\t\t.concat(this.message.bcc.map(recipientToString))\n\t\t\tconst formatter = new Intl.ListFormat(getLanguage(), { type: 'conjunction' })\n\t\t\treturn formatter.format(recipients)\n\t\t},\n\t\tdetails() {\n\t\t\tif (this.message.failed) {\n\t\t\t\treturn this.t('mail', 'Message could not be sent')\n\t\t\t}\n\t\t\tif (!this.message.sendAt) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn moment.unix(this.message.sendAt).fromNow()\n\t\t},\n\t\t/**\n\t\t * Subject of message or \"No Subject\".\n\t\t * @returns {string}\n\t\t */\n\t\tsubjectForSubtitle() {\n\t\t\t// We have to use || here (instead of ??) because the subject might be '', null\n\t\t\t// or undefined.\n\t\t\treturn this.message.subject || this.t('mail', 'No subject')\n\t\t},\n\t},\n\tmethods: {\n\t\tasync deleteMessage() {\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('outbox/deleteMessage', {\n\t\t\t\t\tid: this.message.id,\n\t\t\t\t})\n\t\t\t\tshowSuccess(t('mail', 'Message deleted'))\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync sendMessageNow() {\n\t\t\tconst message = {\n\t\t\t\t...this.message,\n\t\t\t\tfailed: false,\n\t\t\t\tsendAt: (new Date().getTime() + UNDO_DELAY) / 1000,\n\t\t\t}\n\t\t\tawait this.$store.dispatch('outbox/updateMessage', { message, id: message.id })\n\t\t\tawait this.$store.dispatch('outbox/sendMessageWithUndo', { id: message.id })\n\t\t},\n\t\tasync openModal() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttype: 'outbox',\n\t\t\t\tdata: {\n\t\t\t\t\t...this.message,\n\t\t\t\t\tbody: this.message.isHtml ? html(this.message.body) : plain(this.message.body),\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.outbox-message {\n\tlist-style: none;\n\t&.active {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: 16px;\n\t}\n\n\t.account-color {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: 2px;\n\t\theight: 69px;\n\t\tz-index: 1;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=style&index=0&id=e4a083f2&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./OutboxMessageListItem.vue?vue&type=template&id=e4a083f2&scoped=true&\"\nimport script from \"./OutboxMessageListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./OutboxMessageListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OutboxMessageListItem.vue?vue&type=style&index=0&id=e4a083f2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e4a083f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListItem',{staticClass:\"outbox-message\",class:{ selected: _vm.selected },attrs:{\"title\":_vm.title,\"details\":_vm.details},on:{\"click\":_vm.openModal},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('div',{staticClass:\"account-color\",style:({'background-color': _vm.accountColor})}),_vm._v(\" \"),_c('Avatar',{attrs:{\"display-name\":_vm.avatarDisplayName,\"email\":_vm.avatarEmail}})]},proxy:true},{key:\"subtitle\",fn:function(){return [_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.subjectForSubtitle)+\"\\n\\t\")]},proxy:true}])},[_vm._v(\" \"),_vm._v(\" \"),_c('template',{slot:\"actions\"},[_c('ActionButton',{attrs:{\"icon\":\"icon-checkmark\",\"close-after-click\":true},on:{\"click\":_vm.sendMessageNow},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Send',{attrs:{\"title\":_vm.t('mail', 'Send now'),\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send now'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":_vm.deleteMessage}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete'))+\"\\n\\t\\t\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<AppContent\n\t\tpane-config-key=\"mail\"\n\t\t:show-details=\"isMessageShown\"\n\t\t@update:showDetails=\"hideMessage\">\n\t\t<OutboxMessageContent />\n\t\t<!-- List -->\n\t\t<template #list>\n\t\t\t<AppContentList>\n\t\t\t\t<Error\n\t\t\t\t\tv-if=\"error\"\n\t\t\t\t\t:error=\"t('mail', 'Could not open outbox')\"\n\t\t\t\t\tmessage=\"\"\n\t\t\t\t\trole=\"alert\" />\n\t\t\t\t<Loading\n\t\t\t\t\tv-else-if=\"loading\"\n\t\t\t\t\t:hint=\"t('mail', 'Loading messages ')\" />\n\t\t\t\t<EmptyMailbox v-else-if=\"messages.length === 0\" />\n\t\t\t\t<OutboxMessageListItem\n\t\t\t\t\tv-for=\"message in messages\"\n\t\t\t\t\tv-else\n\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t:message=\"message\" />\n\t\t\t</AppContentList>\n\t\t</template>\n\t</AppContent>\n</template>\n\n<script>\nimport AppContent from '@nextcloud/vue/dist/Components/AppContent'\nimport AppContentList from '@nextcloud/vue/dist/Components/AppContentList'\nimport Loading from './Loading'\nimport Error from './Error'\nimport EmptyMailbox from './EmptyMailbox'\nimport OutboxMessageContent from './OutboxMessageContent'\nimport OutboxMessageListItem from './OutboxMessageListItem'\nimport logger from '../logger'\n\nexport default {\n\tname: 'Outbox',\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tError,\n\t\tLoading,\n\t\tEmptyMailbox,\n\t\tOutboxMessageListItem,\n\t\tOutboxMessageContent,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\tloading: false,\n\t\t\trefreshInterval: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisMessageShown() {\n\t\t\treturn !!this.$route.params.messageId\n\t\t},\n\t\tcurrentMessage() {\n\t\t\tif (!this.isMessageShown) {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\treturn this.$store.getters['outbox/getMessage'](this.$route.params.messageId)\n\t\t},\n\t\tmessages() {\n\t\t\treturn this.$store.getters['outbox/getAllMessages']\n\t\t},\n\t},\n\tcreated() {\n\t\t// Reload outbox contents every 60 seconds\n\t\tthis.refreshInterval = setInterval(async() => {\n\t\t\tawait this.fetchMessages()\n\t\t}, 60000)\n\t},\n\tasync mounted() {\n\t\tawait this.fetchMessages()\n\t},\n\tdestroyed() {\n\t\tclearInterval(this.refreshInterval)\n\t},\n\tmethods: {\n\t\thideMessage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'outbox',\n\t\t\t})\n\t\t},\n\t\tasync fetchMessages() {\n\t\t\tthis.loading = true\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('outbox/fetchMessages')\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = true\n\t\t\t\tlogger.error('Failed to fetch outbox messages', { error })\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Outbox.vue?vue&type=template&id=2be0933e&scoped=true&\"\nimport script from \"./Outbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Outbox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2be0933e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',{attrs:{\"pane-config-key\":\"mail\",\"show-details\":_vm.isMessageShown},on:{\"update:showDetails\":_vm.hideMessage},scopedSlots:_vm._u([{key:\"list\",fn:function(){return [_c('AppContentList',[(_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open outbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loading)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages ')}}):(_vm.messages.length === 0)?_c('EmptyMailbox'):_vm._l((_vm.messages),function(message){return _c('OutboxMessageListItem',{key:message.id,attrs:{\"message\":message}})})],2)]},proxy:true}])},[_c('OutboxMessageContent')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Content app-name=\"mail\">\n\t\t<Navigation />\n\t\t<Outbox v-if=\"$route.name === 'outbox'\" />\n\t\t<MailboxThread v-else-if=\"activeAccount\"\n\t\t\t:account=\"activeAccount\"\n\t\t\t:mailbox=\"activeMailbox\" />\n\t\t<NewMessageModal\n\t\t\tv-if=\"$store.getters.showMessageComposer\"\n\t\t\t@close=\"onCloseModal\" />\n\t</Content>\n</template>\n\n<script>\nimport Content from '@nextcloud/vue/dist/Components/Content'\n\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport logger from '../logger'\nimport MailboxThread from '../components/MailboxThread'\nimport NewMessageModal from '../components/NewMessageModal'\nimport Navigation from '../components/Navigation'\nimport Outbox from '../components/Outbox'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tMailboxThread,\n\t\tNavigation,\n\t\tNewMessageModal,\n\t\tOutbox,\n\t},\n\tmixins: [isMobile],\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.activeMailbox?.accountId)\n\t\t},\n\t\tactiveMailbox() {\n\t\t\treturn this.$store.getters.getMailbox(this.$route.params.mailboxId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.accounts\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first mailbox of first account', firstAccount.id, firstMailbox.databaseId)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\tlogger.debug('the only account we have is the unified one -> show the setup page')\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and mailbox', firstAccount.id, firstMailbox.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t\tthreadId: 'mailto',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tasync onCloseModal(opts) {\n\t\t\tawait this.$store.dispatch('closeMessageComposer', opts ?? {})\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=491f4e65&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=491f4e65&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=491f4e65&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"491f4e65\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\"\n\t\t:display-name=\"displayName\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n\t<BaseAvatar v-else\n\t\t:display-name=\"displayName\"\n\t\t:url=\"avatarUrl\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n</template>\n\n<script>\nimport BaseAvatar from '@nextcloud/vue/dist/Components/Avatar'\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\nimport logger from '../logger'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisableTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn this.avatarUrl !== undefined\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.email !== '') {\n\t\t\ttry {\n\t\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t\t} catch {\n\t\t\t\tlogger.debug('Could not fetch avatar', { email: this.email })\n\t\t\t}\n\t\t}\n\n\t\tthis.loading = false\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=5537882b&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport memoize from 'lodash/fp/memoize'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const fetchAvatarUrl = (email) => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then((resp) => resp.data)\n\t\t.then((avatar) => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = memoize(fetchAvatarUrl)\n"],"sourceRoot":""}